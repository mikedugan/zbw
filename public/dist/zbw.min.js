function submitAjax(t){$.ajax({url:$(t).attr("action"),type:$(t).attr("method")}).done(function(t){t=JSON.parse(t),t.success?($(".ajax-success").removeClass("hidden"),$(".ajax-success .message").text(t.message)):($(".ajax-error").removeClass("hidden"),$(".ajax-error .message").text(t.message))})}function highlightCorrect(){var t=$(".correct-answer").toArray();t.forEach(function(t){var e=$(t)[0].value,n=$(t).next().children("li")[e-1];$(n).addClass("correct")})}function pad2(t){return(10>t?"0":"")+t}function getTotalTime(t,e,n,i){var a=60*(e-t)+(i-n);return console.log(a),a}function validateCC(t){if(""==t.find("#cc").val())return!0;var e="Are you sure you want to CC the following: \r\n",n=t.find("#cc").val().replace(" ","").split(",");return n.forEach(function(t){var n=$("#userlist").find('[data-initials="'+t+'"]');e+=" "+n.data("name")+"("+t+")\r\n"}),window.confirm(e)}function getCarbonDate(){var t=new Date,e=t.getFullYear(),n=pad2(t.getMonth()),i=pad2(t.getDate()),a=pad2(t.getHours()),r=pad2(t.getMinutes()),o=pad2(t.getSeconds());return n+"-"+i+"-"+e+" "+a+":"+r+":"+o}function createDateChangeListener(){var t=0,e=0;$("#session_end").on("change",function(){e++}),$("#session_start").on("change",function(){t++}),$(".datepick").on("change",function(){t>0&&e>0&&$("button[type=submit]").removeAttr("disabled")})}+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){r.trigger("closed.bs.alert").remove()}var i=t(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var r=t(a);e&&e.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof e&&a[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();e+="Text",r.resetText||i.data("resetText",i[a]()),i[a](r[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),a=i.data("bs.button"),r="object"==typeof n&&n;a||i.data("bs.button",a=new e(this,r)),"toggle"==n?a.toggle():n&&a.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(jQuery),+function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,i=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),a=n||i[e](),r=this.interval,o="next"==e?"left":"right",s="next"==e?"first":"last",l=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[s]()}if(a.hasClass("active"))return this.sliding=!1;var d=t.Event("slide.bs.carousel",{relatedTarget:a[0],direction:o});return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(this.sliding=!0,r&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),a[0].offsetWidth,i.addClass(o),a.addClass(o),i.one(t.support.transition.end,function(){a.removeClass([e,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),r&&this.cycle(),this)};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),a=i.data("bs.carousel"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),o="string"==typeof n?n:r.slide;a||i.data("bs.carousel",a=new e(this,r)),"number"==typeof n?a.to(n):o?a[o]():r.interval&&a.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i=t(this),a=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},a.data(),i.data()),o=i.attr("data-slide-to");o&&(r.interval=!1),a.carousel(r),(o=i.attr("data-slide-to"))&&a.data("bs.carousel").to(o),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){"use strict";function e(e){t(i).remove(),t(a).each(function(){var i=n(t(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",a)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",a="[data-toggle=dropdown]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(i){var a=t(this);if(!a.is(".disabled, :disabled")){var r=n(a),o=r.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown",s),a.focus()}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),o=r.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&r.find(a).focus(),i.click();var s=" li:not(.divider):visible a",l=r.find("[role=menu]"+s+", [role=listbox]"+s);if(l.length){var d=l.index(l.filter(":focus"));38==e.keyCode&&d>0&&d--,40==e.keyCode&&d<l.length-1&&d++,~d||(d=0),l.eq(d).focus()}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,r.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",r.prototype.keydown)}(jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(a)}).emulateTransitionEnd(300):n.$element.focus().trigger(a)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var a=t(this),r=a.data("bs.modal"),o=t.extend({},e.DEFAULTS,a.data(),"object"==typeof n&&n);r||a.data("bs.modal",r=new e(this,o)),"string"==typeof n?r[n](i):o.show&&r.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),a=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},a.data(),n.data());n.is("a")&&e.preventDefault(),a.modal(r,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var o=a[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,o=r.test(a);o&&(a=a.replace(r,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var s=this.getPosition(),l=i[0].offsetWidth,d=i[0].offsetHeight;if(o){var c=this.$element.parent(),u=a,h=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),g="body"==this.options.container?0:c.offset().left;a="bottom"==a&&s.top+s.height+d-h>f?"top":"top"==a&&s.top-h-d<0?"bottom":"right"==a&&s.right+l>p?"left":"left"==a&&s.left-l<g?"right":a,i.removeClass(u).addClass(a)}var m=this.getCalculatedOffset(a,s,l,d);this.applyPlacement(m,a),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,v).emulateTransitionEnd(150):v()}},e.prototype.applyPlacement=function(e,n){var i,a=this.tip(),r=a[0].offsetWidth,o=a[0].offsetHeight,s=parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),e.top=e.top+s,e.left=e.left+l,t.offset.setOffset(a[0],t.extend({using:function(t){a.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),a.addClass("in");var d=a[0].offsetWidth,c=a[0].offsetHeight;if("top"==n&&c!=o&&(i=!0,e.top=e.top+o-c),/bottom|top/.test(n)){var u=0;e.left<0&&(u=-2*e.left,e.left=0,a.offset(e),d=a[0].offsetWidth,c=a[0].offsetHeight),this.replaceArrow(u-r+d,d,"left")}else this.replaceArrow(c-o,c,"top");i&&a.offset(e)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),a=i.data("bs.tooltip"),r="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.tooltip",a=new e(this,r)),"string"==typeof n&&a[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),a=i.data("bs.popover"),r="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.popover",a=new e(this,r)),"string"==typeof n&&a[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a")[0],r=t.Event("show.bs.tab",{relatedTarget:a});if(e.trigger(r),!r.isDefaultPrevented()){var o=t(i);this.activate(e.parent("li"),n),this.activate(o,o.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},e.prototype.activate=function(e,n,i){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),o=i&&t.support.transition&&r.hasClass("fade");o?r.one(t.support.transition.end,a).emulateTransitionEnd(150):a(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new e(this)),"string"==typeof n&&a[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),i=this.$window.scrollTop(),a=this.$element.offset(),r=this.options.offset,o=r.top,s=r.bottom;"top"==this.affixed&&(a.top+=i),"object"!=typeof r&&(s=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var l=null!=this.unpin&&i+this.unpin<=a.top?!1:null!=s&&a.top+this.$element.height()>=n-s?"bottom":null!=o&&o>=i?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var d="affix"+(l?"-"+l:""),c=t.Event(d+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(d).trigger(t.Event(d.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-s-this.$element.height()}))}}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),a=i.data("bs.affix"),r="object"==typeof n&&n;a||i.data("bs.affix",a=new e(this,r)),"string"==typeof n&&a[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var o=t.camelCase(["scroll",a].join("-"));this.$element.one(t.support.transition.end,t.proxy(r,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),a=i.data("bs.collapse"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);!a&&r.toggle&&"show"==n&&(n=!n),a||i.data("bs.collapse",a=new e(this,r)),"string"==typeof n&&a[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),a=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=t(a),o=r.data("bs.collapse"),s=o?"toggle":i.data(),l=i.attr("data-parent"),d=l&&t(l);o&&o.transitioning||(d&&d.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.collapse(s)})}(jQuery),+function(t){"use strict";function e(n,i){var a,r=t.proxy(this.process,this);this.$element=t(t(n).is("body")?window:n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",r),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||(a=t(n).attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);{var n=this;this.$body.find(this.selector).map(function(){var i=t(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&t(a);return r&&r.length&&r.is(":visible")&&[[r[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})}},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),a=this.offsets,r=this.targets,o=this.activeTarget;if(e>=i)return o!=(t=r.last()[0])&&this.activate(t);if(o&&e<=a[0])return o!=(t=r[0])&&this.activate(t);for(t=a.length;t--;)o!=r[t]&&e>=a[t]&&(!a[t+1]||e<=a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var a=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e()})}(jQuery),!function(t){var e=function(e,n){this.$form=t(e),this.options=t.extend({},t.fn.bootstrapValidator.DEFAULT_OPTIONS,n),this.$invalidFields=t([]),this.$submitButton=null,this.STATUS_NOT_VALIDATED="NOT_VALIDATED",this.STATUS_VALIDATING="VALIDATING",this.STATUS_INVALID="INVALID",this.STATUS_VALID="VALID";var i=function(){for(var t=3,e=document.createElement("div"),n=e.all||[];e.innerHTML="<!--[if gt IE "+ ++t+"]><br><![endif]-->",n[0];);return t>4?t:!t}(),a=document.createElement("div");this._changeEvent=9!==i&&"oninput"in a?"input":"keyup",this._submitIfValid=null,this._cacheFields={},this._init()};e.prototype={constructor:e,_init:function(){var e=this,n={excluded:this.$form.attr("data-bv-excluded"),trigger:this.$form.attr("data-bv-trigger"),message:this.$form.attr("data-bv-message"),container:this.$form.attr("data-bv-container"),group:this.$form.attr("data-bv-group"),submitButtons:this.$form.attr("data-bv-submitbuttons"),threshold:this.$form.attr("data-bv-threshold"),live:this.$form.attr("data-bv-live"),onSuccess:this.$form.attr("data-bv-onsuccess"),onError:this.$form.attr("data-bv-onerror"),fields:{},feedbackIcons:{valid:this.$form.attr("data-bv-feedbackicons-valid"),invalid:this.$form.attr("data-bv-feedbackicons-invalid"),validating:this.$form.attr("data-bv-feedbackicons-validating")}};this.$form.attr("novalidate","novalidate").addClass(this.options.elementClass).on("submit.bv",function(t){t.preventDefault(),e.validate()}).on("click.bv",this.options.submitButtons,function(){e.$submitButton=t(this),e._submitIfValid=!0}).find("[name], [data-bv-field]").each(function(){var i=t(this),a=i.attr("name")||i.attr("data-bv-field"),r=e._parseOptions(i);r&&(i.attr("data-bv-field",a),n.fields[a]=t.extend({},r,n.fields[a]))}),this.options=t.extend(!0,this.options,n);for(var i in this.options.fields)this._initField(i);
this.$form.trigger(t.Event("init.form.bv"),{bv:this,options:this.options}),this.options.onSuccess&&this.$form.on("success.form.bv",function(n){t.fn.bootstrapValidator.helpers.call(e.options.onSuccess,[n])}),this.options.onError&&this.$form.on("error.form.bv",function(n){t.fn.bootstrapValidator.helpers.call(e.options.onError,[n])})},_parseOptions:function(e){var n,i,a,r,o,s,l,d=e.attr("name")||e.attr("data-bv-field"),c={};for(i in t.fn.bootstrapValidator.validators)if(n=t.fn.bootstrapValidator.validators[i],a=e.attr("data-bv-"+i.toLowerCase())+"",l="function"==typeof n.enableByHtml5?n.enableByHtml5(e):null,l&&"false"!==a||l!==!0&&(""===a||"true"===a)){n.html5Attributes=t.extend({},{message:"message",onerror:"onError",onsuccess:"onSuccess"},n.html5Attributes),c[i]=t.extend({},l===!0?{}:l,c[i]);for(s in n.html5Attributes)r=n.html5Attributes[s],o=e.attr("data-bv-"+i.toLowerCase()+"-"+s),o&&("true"===o?o=!0:"false"===o&&(o=!1),c[i][r]=o)}var u={excluded:e.attr("data-bv-excluded"),feedbackIcons:e.attr("data-bv-feedbackicons"),trigger:e.attr("data-bv-trigger"),message:e.attr("data-bv-message"),container:e.attr("data-bv-container"),group:e.attr("data-bv-group"),selector:e.attr("data-bv-selector"),threshold:e.attr("data-bv-threshold"),onStatus:e.attr("data-bv-onstatus"),onSuccess:e.attr("data-bv-onsuccess"),onError:e.attr("data-bv-onerror"),validators:c},h=t.isEmptyObject(u),p=t.isEmptyObject(c);return!p||!h&&this.options.fields&&this.options.fields[d]?(u.validators=c,u):null},_initField:function(e){var n=t([]);switch(typeof e){case"object":n=e,e=e.attr("data-bv-field");break;case"string":n=this.getFieldElements(e),n.attr("data-bv-field",e)}if(null!==this.options.fields[e]&&null!==this.options.fields[e].validators){if(0===n.length)return void delete this.options.fields[e];var i;for(i in this.options.fields[e].validators)t.fn.bootstrapValidator.validators[i]||delete this.options.fields[e].validators[i];null===this.options.fields[e].enabled&&(this.options.fields[e].enabled=!0);for(var a=this,r=n.length,o=n.attr("type"),s=1===r||"radio"===o||"checkbox"===o,l="radio"===o||"checkbox"===o||"file"===o||"SELECT"===n.eq(0).get(0).tagName?"change":this._changeEvent,d=(this.options.fields[e].trigger||this.options.trigger||l).split(" "),c=t.map(d,function(t){return t+".update.bv"}).join(" "),u=0;r>u;u++){var h=n.eq(u),p=this.options.fields[e].group||this.options.group,f=h.parents(p),g=this.options.fields[e].container||this.options.container,m=g&&"tooltip"!==g&&"popover"!==g?t(g):this._getMessageContainer(h,p);g&&"tooltip"!==g&&"popover"!==g&&m.addClass("has-error"),m.find('.help-block[data-bv-validator][data-bv-for="'+e+'"]').remove(),f.find('i[data-bv-icon-for="'+e+'"]').remove(),h.off(c).on(c,function(){a.updateStatus(t(this),a.STATUS_NOT_VALIDATED)}),h.data("bv.messages",m);for(i in this.options.fields[e].validators)h.data("bv.result."+i,this.STATUS_NOT_VALIDATED),s&&u!==r-1||t("<small/>").css("display","none").addClass("help-block").attr("data-bv-validator",i).attr("data-bv-for",e).attr("data-bv-result",this.STATUS_NOT_VALIDATED).html(this._getMessage(e,i)).appendTo(m),this.options.fields[e].validators[i].onSuccess&&h.on("success.validator.bv",function(n,r){t.fn.bootstrapValidator.helpers.call(a.options.fields[e].validators[i].onSuccess,[n,r])}),this.options.fields[e].validators[i].onError&&h.on("error.validator.bv",function(n,r){t.fn.bootstrapValidator.helpers.call(a.options.fields[e].validators[i].onError,[n,r])});if(this.options.fields[e].feedbackIcons!==!1&&"false"!==this.options.fields[e].feedbackIcons&&this.options.feedbackIcons&&this.options.feedbackIcons.validating&&this.options.feedbackIcons.invalid&&this.options.feedbackIcons.valid&&(!s||u===r-1)){f.removeClass("has-success").removeClass("has-error").addClass("has-feedback");var v=t("<i/>").css("display","none").addClass("form-control-feedback").attr("data-bv-icon-for",e).insertAfter("checkbox"===o||"radio"===o?h.parent():h);0===f.find("label").length&&v.css("top",0),0!==f.find(".input-group").length&&v.css({top:0,"z-index":100}).insertAfter(f.find(".input-group").eq(0))}}switch(this.options.fields[e].onSuccess&&n.on("success.field.bv",function(n,i){t.fn.bootstrapValidator.helpers.call(a.options.fields[e].onSuccess,[n,i])}),this.options.fields[e].onError&&n.on("error.field.bv",function(n,i){t.fn.bootstrapValidator.helpers.call(a.options.fields[e].onError,[n,i])}),this.options.fields[e].onStatus&&n.on("status.field.bv",function(n,i){t.fn.bootstrapValidator.helpers.call(a.options.fields[e].onStatus,[n,i])}),c=t.map(d,function(t){return t+".live.bv"}).join(" "),this.options.live){case"submitted":break;case"disabled":n.off(c);break;case"enabled":default:n.off(c).on(c,function(){a._exceedThreshold(t(this))&&a.validateField(t(this))})}n.trigger(t.Event("init.field.bv"),{bv:this,field:e,element:n})}},_getMessage:function(e,n){if(!(this.options.fields[e]&&t.fn.bootstrapValidator.validators[n]&&this.options.fields[e].validators&&this.options.fields[e].validators[n]))return"";var i=this.options.fields[e].validators[n];switch(!0){case!!i.message:return i.message;case!!this.options.fields[e].message:return this.options.fields[e].message;case!!t.fn.bootstrapValidator.i18n[n]:return t.fn.bootstrapValidator.i18n[n]["default"];default:return this.options.message}},_getMessageContainer:function(t,e){var n=t.parent();if(n.is(e))return n;var i=n.attr("class");if(!i)return this._getMessageContainer(n,e);i=i.split(" ");for(var a=i.length,r=0;a>r;r++)if(/^col-(xs|sm|md|lg)-\d+$/.test(i[r])||/^col-(xs|sm|md|lg)-offset-\d+$/.test(i[r]))return n;return this._getMessageContainer(n,e)},_submit:function(){var e=this.isValid(),n=e?"success.form.bv":"error.form.bv",i=t.Event(n);this.$form.trigger(i),this.$submitButton&&(e?this._onSuccess(i):this._onError(i))},_isExcluded:function(e){var n=e.attr("data-bv-excluded"),i=e.attr("data-bv-field")||e.attr("name");switch(!0){case!!i&&this.options.fields&&this.options.fields[i]&&("true"===this.options.fields[i].excluded||this.options.fields[i].excluded===!0):case"true"===n:case""===n:return!0;case!!i&&this.options.fields&&this.options.fields[i]&&("false"===this.options.fields[i].excluded||this.options.fields[i].excluded===!1):case"false"===n:return!1;default:if(this.options.excluded){"string"==typeof this.options.excluded&&(this.options.excluded=t.map(this.options.excluded.split(","),function(e){return t.trim(e)}));for(var a=this.options.excluded.length,r=0;a>r;r++)if("string"==typeof this.options.excluded[r]&&e.is(this.options.excluded[r])||"function"==typeof this.options.excluded[r]&&this.options.excluded[r].call(this,e,this)===!0)return!0}return!1}},_exceedThreshold:function(e){var n=e.attr("data-bv-field"),i=this.options.fields[n].threshold||this.options.threshold;if(!i)return!0;var a=-1!==t.inArray(e.attr("type"),["button","checkbox","file","hidden","image","radio","reset","submit"]);return a||e.val().length>=i},_onError:function(e){if(!e.isDefaultPrevented()){if("submitted"===this.options.live){this.options.live="enabled";var n=this;for(var i in this.options.fields)!function(e){var a=n.getFieldElements(e);if(a.length){var r=t(a[0]).attr("type"),o="radio"===r||"checkbox"===r||"file"===r||"SELECT"===t(a[0]).get(0).tagName?"change":n._changeEvent,s=n.options.fields[i].trigger||n.options.trigger||o,l=t.map(s.split(" "),function(t){return t+".live.bv"}).join(" ");a.off(l).on(l,function(){n._exceedThreshold(t(this))&&n.validateField(t(this))})}}(i)}var a=this.$invalidFields.eq(0);if(a){var r,o=a.parents(".tab-pane");o&&(r=o.attr("id"))&&t('a[href="#'+r+'"][data-toggle="tab"]').tab("show"),a.focus()}}},_onSuccess:function(t){t.isDefaultPrevented()||this.disableSubmitButtons(!0).defaultSubmit()},_onFieldValidated:function(e,n){var i=e.attr("data-bv-field"),a=this.options.fields[i].validators,r={},o=0,s={bv:this,field:i,element:e,validator:n};if(n)switch(e.data("bv.result."+n)){case this.STATUS_INVALID:e.trigger(t.Event("error.validator.bv"),s);break;case this.STATUS_VALID:e.trigger(t.Event("success.validator.bv"),s)}r[this.STATUS_NOT_VALIDATED]=0,r[this.STATUS_VALIDATING]=0,r[this.STATUS_INVALID]=0,r[this.STATUS_VALID]=0;for(var l in a)if(a[l].enabled!==!1){o++;var d=e.data("bv.result."+l);d&&r[d]++}r[this.STATUS_VALID]===o?(this.$invalidFields=this.$invalidFields.not(e),e.trigger(t.Event("success.field.bv"),s)):0===r[this.STATUS_NOT_VALIDATED]&&0===r[this.STATUS_VALIDATING]&&r[this.STATUS_INVALID]>0&&(this.$invalidFields=this.$invalidFields.add(e),e.trigger(t.Event("error.field.bv"),s))},getFieldElements:function(e){return this._cacheFields[e]||(this._cacheFields[e]=this.options.fields[e]&&this.options.fields[e].selector?t(this.options.fields[e].selector):this.$form.find('[name="'+e+'"]')),this._cacheFields[e]},disableSubmitButtons:function(t){return t?"disabled"!==this.options.live&&this.$form.find(this.options.submitButtons).attr("disabled","disabled"):this.$form.find(this.options.submitButtons).removeAttr("disabled"),this},validate:function(){if(!this.options.fields)return this;this.disableSubmitButtons(!0);for(var t in this.options.fields)this.validateField(t);return this._submit(),this},validateField:function(e){var n=t([]);switch(typeof e){case"object":n=e,e=e.attr("data-bv-field");break;case"string":n=this.getFieldElements(e)}if(this.options.fields[e]&&this.options.fields[e].enabled===!1)return this;for(var i,a,r=this,o=n.attr("type"),s="radio"===o||"checkbox"===o?1:n.length,l="radio"===o||"checkbox"===o,d=this.options.fields[e].validators,c=0;s>c;c++){var u=n.eq(c);if(!this._isExcluded(u))for(i in d){u.data("bv.dfs."+i)&&u.data("bv.dfs."+i).reject();var h=u.data("bv.result."+i);h!==this.STATUS_VALID&&h!==this.STATUS_INVALID&&d[i].enabled!==!1?(u.data("bv.result."+i,this.STATUS_VALIDATING),a=t.fn.bootstrapValidator.validators[i].validate(this,u,d[i]),"object"==typeof a&&a.resolve?(this.updateStatus(l?e:u,this.STATUS_VALIDATING,i),u.data("bv.dfs."+i,a),a.done(function(t,e,n,i){t.removeData("bv.dfs."+e),i&&r.updateMessage(t,e,i),r.updateStatus(l?t.attr("data-bv-field"):t,n?r.STATUS_VALID:r.STATUS_INVALID,e),n&&r._submitIfValid===!0&&r._submit()})):"object"==typeof a&&void 0!==a.valid&&void 0!==a.message?(this.updateMessage(l?e:u,i,a.message),this.updateStatus(l?e:u,a.valid?this.STATUS_VALID:this.STATUS_INVALID,i)):"boolean"==typeof a&&this.updateStatus(l?e:u,a?this.STATUS_VALID:this.STATUS_INVALID,i)):this._onFieldValidated(u,i)}}return this},updateMessage:function(e,n,i){var a=t([]);switch(typeof e){case"object":a=e,e=e.attr("data-bv-field");break;case"string":a=this.getFieldElements(e)}a.each(function(){t(this).data("bv.messages").find('.help-block[data-bv-validator="'+n+'"][data-bv-for="'+e+'"]').html(i)})},updateStatus:function(e,n,i){var a=t([]);switch(typeof e){case"object":a=e,e=e.attr("data-bv-field");break;case"string":a=this.getFieldElements(e)}n===this.STATUS_NOT_VALIDATED&&(this._submitIfValid=!1);for(var r=this,o=a.attr("type"),s=this.options.fields[e].group||this.options.group,l="radio"===o||"checkbox"===o?1:a.length,d=0;l>d;d++){var c=a.eq(d);if(!this._isExcluded(c)){var u=c.parents(s),h=c.data("bv.messages"),p=h.find('.help-block[data-bv-validator][data-bv-for="'+e+'"]'),f=i?p.filter('[data-bv-validator="'+i+'"]'):p,g=u.find('.form-control-feedback[data-bv-icon-for="'+e+'"]'),m=this.options.fields[e].container||this.options.container,v=null;if(i)c.data("bv.result."+i,n);else for(var b in this.options.fields[e].validators)c.data("bv.result."+b,n);f.attr("data-bv-result",n);var y,w,C=c.parents(".tab-pane");switch(C&&(y=C.attr("id"))&&(w=t('a[href="#'+y+'"][data-toggle="tab"]').parent()),n){case this.STATUS_VALIDATING:v=null,this.disableSubmitButtons(!0),u.removeClass("has-success").removeClass("has-error"),g&&g.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).addClass(this.options.feedbackIcons.validating).show(),w&&w.removeClass("bv-tab-success").removeClass("bv-tab-error");break;case this.STATUS_INVALID:v=!1,this.disableSubmitButtons(!0),u.removeClass("has-success").addClass("has-error"),g&&g.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.validating).addClass(this.options.feedbackIcons.invalid).show(),w&&w.removeClass("bv-tab-success").addClass("bv-tab-error");break;case this.STATUS_VALID:v=0===p.filter('[data-bv-result="'+this.STATUS_NOT_VALIDATED+'"]').length?p.filter('[data-bv-result="'+this.STATUS_VALID+'"]').length===p.length:null,null!==v&&(this.disableSubmitButtons(this.$submitButton?!this.isValid():!v),g&&g.removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).removeClass(this.options.feedbackIcons.valid).addClass(v?this.options.feedbackIcons.valid:this.options.feedbackIcons.invalid).show()),u.removeClass("has-error has-success").addClass(this.isValidContainer(u)?"has-success":"has-error"),w&&w.removeClass("bv-tab-success").removeClass("bv-tab-error").addClass(this.isValidContainer(C)?"bv-tab-success":"bv-tab-error");break;case this.STATUS_NOT_VALIDATED:default:v=null,this.disableSubmitButtons(!1),u.removeClass("has-success").removeClass("has-error"),g&&g.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).hide(),w&&w.removeClass("bv-tab-success").removeClass("bv-tab-error")}switch(!0){case g&&"tooltip"===m:v===!1?g.css("cursor","pointer").tooltip("destroy").tooltip({html:!0,placement:"top",title:p.filter('[data-bv-result="'+r.STATUS_INVALID+'"]').eq(0).html()}):g.css("cursor","").tooltip("destroy");break;case g&&"popover"===m:v===!1?g.css("cursor","pointer").popover("destroy").popover({content:p.filter('[data-bv-result="'+r.STATUS_INVALID+'"]').eq(0).html(),html:!0,placement:"top",trigger:"hover click"}):g.css("cursor","").popover("destroy");break;default:n===this.STATUS_INVALID?f.show():f.hide()}c.trigger(t.Event("status.field.bv"),{bv:this,field:e,element:c,status:n}),this._onFieldValidated(c,i)}}return this},isValid:function(){for(var t in this.options.fields)if(!this.isValidField(t))return!1;return!0},isValidField:function(e){var n=t([]);switch(typeof e){case"object":n=e,e=e.attr("data-bv-field");break;case"string":n=this.getFieldElements(e)}if(0===n.length||null===this.options.fields[e]||this.options.fields[e].enabled===!1)return!0;for(var i,a,r,o=n.attr("type"),s="radio"===o||"checkbox"===o?1:n.length,l=0;s>l;l++)if(i=n.eq(l),!this._isExcluded(i))for(a in this.options.fields[e].validators)if(this.options.fields[e].validators[a].enabled!==!1&&(r=i.data("bv.result."+a),r!==this.STATUS_VALID))return!1;return!0},isValidContainer:function(e){var n=this,i={},a="string"==typeof e?t(e):e;if(0===a.length)return!0;a.find("[data-bv-field]").each(function(){var e=t(this),a=e.attr("data-bv-field");n._isExcluded(e)||i[a]||(i[a]=e)});for(var r in i){var o=i[r];if(0!==o.data("bv.messages").find('.help-block[data-bv-validator][data-bv-for="'+r+'"]').filter(function(){var e=t(this).attr("data-bv-validator"),i=t(this).attr("data-bv-for");return n.options.fields[i].validators[e].enabled!==!1&&o.data("bv.result."+e)&&o.data("bv.result."+e)!==n.STATUS_VALID}).length)return!1}return!0},defaultSubmit:function(){this.$submitButton&&t("<input/>").attr("type","hidden").attr("data-bv-submit-hidden","").attr("name",this.$submitButton.attr("name")).val(this.$submitButton.val()).appendTo(this.$form),this.$form.off("submit.bv").submit()},getInvalidFields:function(){return this.$invalidFields},getSubmitButton:function(){return this.$submitButton},getMessages:function(e,n){var i=this,a=[],r=t([]);switch(!0){case e&&"object"==typeof e:r=e;break;case e&&"string"==typeof e:var o=this.getFieldElements(e);if(o.length>0){var s=o.attr("type");r="radio"===s||"checkbox"===s?o.eq(0):o}break;default:r=this.$invalidFields}var l=n?'[data-bv-validator="'+n+'"]':"";return r.each(function(){a=a.concat(t(this).data("bv.messages").find('.help-block[data-bv-for="'+t(this).attr("data-bv-field")+'"][data-bv-result="'+i.STATUS_INVALID+'"]'+l).map(function(){var e=t(this).attr("data-bv-validator"),n=t(this).attr("data-bv-for");return i.options.fields[n].validators[e].enabled===!1?"":t(this).html()}).get())}),a},getOptions:function(t,e,n){if(!t)return this.options;if("object"==typeof t&&(t=t.attr("data-bv-field")),!this.options.fields[t])return null;var i=this.options.fields[t];return e?i.validators&&i.validators[e]?n?i.validators[e][n]:i.validators[e]:null:i},updateOption:function(t,e,n,i){return"object"==typeof t&&(t=t.attr("data-bv-field")),this.options.fields[t]&&this.options.fields[t].validators[e]&&(this.options.fields[t].validators[e][n]=i,this.updateStatus(t,this.STATUS_NOT_VALIDATED,e)),this},addField:function(e,n){var i=t([]);switch(typeof e){case"object":i=e,e=e.attr("data-bv-field")||e.attr("name");break;case"string":delete this._cacheFields[e],i=this.getFieldElements(e)}i.attr("data-bv-field",e);for(var a=i.attr("type"),r="radio"===a||"checkbox"===a?1:i.length,o=0;r>o;o++){var s=i.eq(o),l=this._parseOptions(s);l=null===l?n:t.extend(!0,n,l),this.options.fields[e]=t.extend(!0,this.options.fields[e],l),this._cacheFields[e]=this._cacheFields[e]?this._cacheFields[e].add(s):s,this._initField("checkbox"===a||"radio"===a?e:s)}return this.disableSubmitButtons(!1),this.$form.trigger(t.Event("added.field.bv"),{field:e,element:i,options:this.options.fields[e]}),this},removeField:function(e){var n=t([]);switch(typeof e){case"object":n=e,e=e.attr("data-bv-field")||e.attr("name"),n.attr("data-bv-field",e);break;case"string":n=this.getFieldElements(e)}if(0===n.length)return this;for(var i=n.attr("type"),a="radio"===i||"checkbox"===i?1:n.length,r=0;a>r;r++){var o=n.eq(r);this.$invalidFields=this.$invalidFields.not(o),this._cacheFields[e]=this._cacheFields[e].not(o)}return this._cacheFields[e]&&0!==this._cacheFields[e].length||delete this.options.fields[e],("checkbox"===i||"radio"===i)&&this._initField(e),this.disableSubmitButtons(!1),this.$form.trigger(t.Event("removed.field.bv"),{field:e,element:n}),this},resetField:function(e,n){var i=t([]);switch(typeof e){case"object":i=e,e=e.attr("data-bv-field");break;case"string":i=this.getFieldElements(e)}var a=i.length;if(this.options.fields[e])for(var r=0;a>r;r++)for(var o in this.options.fields[e].validators)i.eq(r).removeData("bv.dfs."+o);if(this.updateStatus(e,this.STATUS_NOT_VALIDATED),n){var s=i.attr("type");"radio"===s||"checkbox"===s?i.removeAttr("checked").removeAttr("selected"):i.val("")}return this},resetForm:function(e){for(var n in this.options.fields)this.resetField(n,e);return this.$invalidFields=t([]),this.$submitButton=null,this.disableSubmitButtons(!1),this},revalidateField:function(t){return this.updateStatus(t,this.STATUS_NOT_VALIDATED).validateField(t),this},enableFieldValidators:function(t,e,n){var i=this.options.fields[t].validators;if(n&&i&&i[n]&&i[n].enabled!==e)this.options.fields[t].validators[n].enabled=e,this.updateStatus(t,this.STATUS_NOT_VALIDATED,n);else if(!n&&this.options.fields[t].enabled!==e){this.options.fields[t].enabled=e;for(var a in i)this.enableFieldValidators(t,e,a)}return this},getDynamicOption:function(e,n){var i="string"==typeof e?this.getFieldElements(e):e,a=i.val();if("function"==typeof n)return t.fn.bootstrapValidator.helpers.call(n,[a,this,i]);if("string"==typeof n){var r=this.getFieldElements(n);return r.length?r.val():t.fn.bootstrapValidator.helpers.call(n,[a,this,i])}return null},destroy:function(){var t,e,n,i,a,r,o;for(t in this.options.fields){e=this.getFieldElements(t),r=this.options.fields[t].container||this.options.container,o=this.options.fields[t].group||this.options.group;for(var s=0;s<e.length;s++){if(n=e.eq(s),n.data("bv.messages").find('.help-block[data-bv-validator][data-bv-for="'+t+'"]').remove().end().end().removeData("bv.messages").parents(o).removeClass("has-feedback has-error has-success").end().off(".bv").removeAttr("data-bv-field"),a=n.parents(o).find('i[data-bv-icon-for="'+t+'"]'))switch(r){case"tooltip":a.tooltip("destroy").remove();break;case"popover":a.popover("destroy").remove();break;default:a.remove()}for(i in this.options.fields[t].validators)n.data("bv.dfs."+i)&&n.data("bv.dfs."+i).reject(),n.removeData("bv.result."+i).removeData("bv.dfs."+i)}}this.disableSubmitButtons(!1),this.$form.removeClass(this.options.elementClass).off(".bv").removeData("bootstrapValidator").find("[data-bv-submit-hidden]").remove()}},t.fn.bootstrapValidator=function(n){var i=arguments;return this.each(function(){var a=t(this),r=a.data("bootstrapValidator"),o="object"==typeof n&&n;r||(r=new e(this,o),a.data("bootstrapValidator",r)),"string"==typeof n&&r[n].apply(r,Array.prototype.slice.call(i,1))})},t.fn.bootstrapValidator.DEFAULT_OPTIONS={elementClass:"bv-form",message:"This value is not valid",group:".form-group",container:null,threshold:null,excluded:[":disabled",":hidden",":not(:visible)"],feedbackIcons:{valid:null,invalid:null,validating:null},submitButtons:'[type="submit"]',live:"enabled",fields:null},t.fn.bootstrapValidator.validators={},t.fn.bootstrapValidator.i18n={},t.fn.bootstrapValidator.Constructor=e,t.fn.bootstrapValidator.helpers={call:function(t,e){if("function"==typeof t)return t.apply(this,e);if("string"==typeof t){"()"===t.substring(t.length-2)&&(t=t.substring(0,t.length-2));for(var n=t.split("."),i=n.pop(),a=window,r=0;r<n.length;r++)a=a[n[r]];return a[i].apply(this,e)}},format:function(e,n){t.isArray(n)||(n=[n]);for(var i in n)e=e.replace("%s",n[i]);return e},date:function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n))return!1;if(n=parseInt(n,10),e=parseInt(e,10),t=parseInt(t,10),1e3>t||t>9999||0>=e||e>12)return!1;var a=[31,28,31,30,31,30,31,31,30,31,30,31];if((t%400===0||t%100!==0&&t%4===0)&&(a[1]=29),0>=n||n>a[e-1])return!1;if(i===!0){var r=new Date,o=r.getFullYear(),s=r.getMonth(),l=r.getDate();return o>t||t===o&&s>e-1||t===o&&e-1===s&&l>n}return!0},luhn:function(t){for(var e=t.length,n=0,i=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],a=0;e--;)a+=i[n][parseInt(t.charAt(e),10)],n^=1;return a%10===0&&a>0},mod11And10:function(t){for(var e=5,n=t.length,i=0;n>i;i++)e=(2*(e||10)%11+parseInt(t.charAt(i),10))%10;return 1===e},mod37And36:function(t,e){e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=e.length,i=t.length,a=Math.floor(n/2),r=0;i>r;r++)a=(2*(a||n)%(n+1)+e.indexOf(t.charAt(r)))%n;return 1===a}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.base64=t.extend(t.fn.bootstrapValidator.i18n.base64||{},{"default":"Please enter a valid base 64 encoded"}),t.fn.bootstrapValidator.validators.base64={validate:function(t,e){var n=e.val();return""===n?!0:/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.between=t.extend(t.fn.bootstrapValidator.i18n.between||{},{"default":"Please enter a value between %s and %s",notInclusive:"Please enter a value between %s and %s strictly"}),t.fn.bootstrapValidator.validators.between={html5Attributes:{message:"message",min:"min",max:"max",inclusive:"inclusive"},enableByHtml5:function(t){return"range"===t.attr("type")?{min:t.attr("min"),max:t.attr("max")}:!1},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=t.isNumeric(i.min)?i.min:e.getDynamicOption(n,i.min),o=t.isNumeric(i.max)?i.max:e.getDynamicOption(n,i.max);return a=parseFloat(a),i.inclusive===!0||void 0===i.inclusive?{valid:a>=r&&o>=a,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.between["default"],[r,o])}:{valid:a>r&&o>a,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.between.notInclusive,[r,o])}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.callback=t.extend(t.fn.bootstrapValidator.i18n.callback||{},{"default":"Please enter a valid value"}),t.fn.bootstrapValidator.validators.callback={html5Attributes:{message:"message",callback:"callback"},validate:function(e,n,i){var a=n.val();if(i.callback){var r=new t.Deferred,o=t.fn.bootstrapValidator.helpers.call(i.callback,[a,e,n]);return r.resolve(n,"callback","boolean"==typeof o?o:o.valid,"object"==typeof o&&o.message?o.message:null),r}return!0}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.choice=t.extend(t.fn.bootstrapValidator.i18n.choice||{},{"default":"Please enter a valid value",less:"Please choose %s options at minimum",more:"Please choose %s options at maximum",between:"Please choose %s - %s options"}),t.fn.bootstrapValidator.validators.choice={html5Attributes:{message:"message",min:"min",max:"max"},validate:function(e,n,i){var a=n.is("select")?e.getFieldElements(n.attr("data-bv-field")).find("option").filter(":selected").length:e.getFieldElements(n.attr("data-bv-field")).filter(":checked").length,r=i.min?t.isNumeric(i.min)?i.min:e.getDynamicOption(n,i.min):null,o=i.max?t.isNumeric(i.max)?i.max:e.getDynamicOption(n,i.max):null,s=!0,l=i.message||t.fn.bootstrapValidator.i18n.choice["default"];switch((r&&a<parseInt(r,10)||o&&a>parseInt(o,10))&&(s=!1),!0){case!!r&&!!o:l=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.choice.between,[parseInt(r,10),parseInt(o,10)]);break;case!!r:l=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.choice.less,parseInt(r,10));break;case!!o:l=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.choice.more,parseInt(o,10))}return{valid:s,message:l}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.creditCard=t.extend(t.fn.bootstrapValidator.i18n.creditCard||{},{"default":"Please enter a valid credit card number"}),t.fn.bootstrapValidator.validators.creditCard={validate:function(e,n){var i=n.val();if(""===i)return!0;if(/[^0-9-\s]+/.test(i))return!1;if(i=i.replace(/\D/g,""),!t.fn.bootstrapValidator.helpers.luhn(i))return!1;var a,r,o={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}};for(a in o)for(r in o[a].prefix)if(i.substr(0,o[a].prefix[r].length)===o[a].prefix[r]&&-1!==t.inArray(i.length,o[a].length))return!0;return!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.cusip=t.extend(t.fn.bootstrapValidator.i18n.cusip||{},{"default":"Please enter a valid CUSIP number"}),t.fn.bootstrapValidator.validators.cusip={validate:function(e,n){var i=n.val();if(""===i)return!0;if(i=i.toUpperCase(),!/^[0-9A-Z]{9}$/.test(i))return!1;for(var a=t.map(i.split(""),function(t){var e=t.charCodeAt(0);return e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?e-"A".charCodeAt(0)+10:t}),r=a.length,o=0,s=0;r-1>s;s++){var l=parseInt(a[s],10);s%2!==0&&(l*=2),l>9&&(l-=9),o+=l}return o=(10-o%10)%10,o===a[r-1]}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.cvv=t.extend(t.fn.bootstrapValidator.i18n.cvv||{},{"default":"Please enter a valid CVV number"}),t.fn.bootstrapValidator.validators.cvv={html5Attributes:{message:"message",ccfield:"creditCardField"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;if(!/^[0-9]{3,4}$/.test(a))return!1;if(!i.creditCardField)return!0;var r=e.getFieldElements(i.creditCardField).val();if(""===r)return!0;r=r.replace(/\D/g,"");var o,s,l={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}},d=null;for(o in l)for(s in l[o].prefix)if(r.substr(0,l[o].prefix[s].length)===l[o].prefix[s]&&-1!==t.inArray(r.length,l[o].length)){d=o;break}return null===d?!1:"AMERICAN_EXPRESS"===d?4===a.length:3===a.length}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.date=t.extend(t.fn.bootstrapValidator.i18n.date||{},{"default":"Please enter a valid date"}),t.fn.bootstrapValidator.validators.date={html5Attributes:{message:"message",format:"format",separator:"separator"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;i.format=i.format||"MM/DD/YYYY";var r=i.format.split(" "),o=r[0],s=r.length>1?r[1]:null,l=r.length>2?r[2]:null,d=a.split(" "),c=d[0],u=d.length>1?d[1]:null;if(r.length!==d.length)return!1;var h=i.separator;if(h||(h=-1!==c.indexOf("/")?"/":-1!==c.indexOf("-")?"-":null),null===h||-1===c.indexOf(h))return!1;if(c=c.split(h),o=o.split(h),c.length!==o.length)return!1;var p=c[t.inArray("YYYY",o)],f=c[t.inArray("MM",o)],g=c[t.inArray("DD",o)];if(!p||!f||!g)return!1;var m=null,v=null,b=null;if(s){if(s=s.split(":"),u=u.split(":"),s.length!==u.length)return!1;if(v=u.length>0?u[0]:null,m=u.length>1?u[1]:null,b=u.length>2?u[2]:null,b&&(b=parseInt(b,10),isNaN(b)||0>b||b>60))return!1;if(v&&(v=parseInt(v,10),isNaN(v)||0>v||v>=24||l&&v>12))return!1;if(m&&(m=parseInt(m,10),isNaN(m)||0>m||m>59))return!1}return t.fn.bootstrapValidator.helpers.date(p,f,g)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.different=t.extend(t.fn.bootstrapValidator.i18n.different||{},{"default":"Please enter a different value"}),t.fn.bootstrapValidator.validators.different={html5Attributes:{message:"message",field:"field"},validate:function(t,e,n){var i=e.val();if(""===i)return!0;var a=t.getFieldElements(n.field);return null===a?!0:i!==a.val()?(t.updateStatus(n.field,t.STATUS_VALID,"different"),!0):!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.digits=t.extend(t.fn.bootstrapValidator.i18n.digits||{},{"default":"Please enter only digits"}),t.fn.bootstrapValidator.validators.digits={validate:function(t,e){var n=e.val();return""===n?!0:/^\d+$/.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.ean=t.extend(t.fn.bootstrapValidator.i18n.ean||{},{"default":"Please enter a valid EAN number"}),t.fn.bootstrapValidator.validators.ean={validate:function(t,e){var n=e.val();if(""===n)return!0;if(!/^(\d{8}|\d{12}|\d{13})$/.test(n))return!1;for(var i=n.length,a=0,r=8===i?[3,1]:[1,3],o=0;i-1>o;o++)a+=parseInt(n.charAt(o),10)*r[o%2];return a=(10-a%10)%10,a+""===n.charAt(i-1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.emailAddress=t.extend(t.fn.bootstrapValidator.i18n.emailAddress||{},{"default":"Please enter a valid email address"}),t.fn.bootstrapValidator.validators.emailAddress={enableByHtml5:function(t){return"email"===t.attr("type")
},validate:function(t,e){var n=e.val();if(""===n)return!0;var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.file=t.extend(t.fn.bootstrapValidator.i18n.file||{},{"default":"Please choose a valid file"}),t.fn.bootstrapValidator.validators.file={html5Attributes:{extension:"extension",maxsize:"maxSize",message:"message",type:"type"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r,o=i.extension?i.extension.toLowerCase().split(","):null,s=i.type?i.type.toLowerCase().split(","):null,l=window.File&&window.FileList&&window.FileReader;if(l)for(var d=n.get(0).files,c=d.length,u=0;c>u;u++){if(i.maxSize&&d[u].size>parseInt(i.maxSize,10))return!1;if(r=d[u].name.substr(d[u].name.lastIndexOf(".")+1),o&&-1===t.inArray(r.toLowerCase(),o))return!1;if(s&&-1===t.inArray(d[u].type.toLowerCase(),s))return!1}else if(r=a.substr(a.lastIndexOf(".")+1),o&&-1===t.inArray(r.toLowerCase(),o))return!1;return!0}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.greaterThan=t.extend(t.fn.bootstrapValidator.i18n.greaterThan||{},{"default":"Please enter a value greater than or equal to %s",notInclusive:"Please enter a value greater than %s"}),t.fn.bootstrapValidator.validators.greaterThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(t){var e=t.attr("min");return e?{value:e}:!1},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=t.isNumeric(i.value)?i.value:e.getDynamicOption(n,i.value);return a=parseFloat(a),i.inclusive===!0||void 0===i.inclusive?{valid:a>=r,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.greaterThan["default"],r)}:{valid:a>r,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.greaterThan.notInclusive,r)}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.grid=t.extend(t.fn.bootstrapValidator.i18n.grid||{},{"default":"Please enter a valid GRId number"}),t.fn.bootstrapValidator.validators.grid={validate:function(e,n){var i=n.val();return""===i?!0:(i=i.toUpperCase(),/^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g.test(i)?(i=i.replace(/\s/g,"").replace(/-/g,""),"GRID:"===i.substr(0,5)&&(i=i.substr(5)),t.fn.bootstrapValidator.helpers.mod37And36(i)):!1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.hex=t.extend(t.fn.bootstrapValidator.i18n.hex||{},{"default":"Please enter a valid hexadecimal number"}),t.fn.bootstrapValidator.validators.hex={validate:function(t,e){var n=e.val();return""===n?!0:/^[0-9a-fA-F]+$/.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.hexColor=t.extend(t.fn.bootstrapValidator.i18n.hexColor||{},{"default":"Please enter a valid hex color"}),t.fn.bootstrapValidator.validators.hexColor={enableByHtml5:function(t){return"color"===t.attr("type")},validate:function(t,e){var n=e.val();return""===n?!0:/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.iban=t.extend(t.fn.bootstrapValidator.i18n.iban||{},{"default":"Please enter a valid IBAN number",countryNotSupported:"The country code %s is not supported",country:"Please enter a valid IBAN number in %s",countries:{AD:"Andorra",AE:"United Arab Emirates",AL:"Albania",AO:"Angola",AT:"Austria",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BR:"Brazil",CH:"Switzerland",CI:"Ivory Coast",CM:"Cameroon",CR:"Costa Rica",CV:"Cape Verde",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",DO:"Dominican Republic",DZ:"Algeria",EE:"Estonia",ES:"Spain",FI:"Finland",FO:"Faroe Islands",FR:"France",GB:"United Kingdom",GE:"Georgia",GI:"Gibraltar",GL:"Greenland",GR:"Greece",GT:"Guatemala",HR:"Croatia",HU:"Hungary",IE:"Ireland",IL:"Israel",IR:"Iran",IS:"Iceland",IT:"Italy",JO:"Jordan",KW:"Kuwait",KZ:"Kazakhstan",LB:"Lebanon",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MG:"Madagascar",MK:"Macedonia",ML:"Mali",MR:"Mauritania",MT:"Malta",MU:"Mauritius",MZ:"Mozambique",NL:"Netherlands",NO:"Norway",PK:"Pakistan",PL:"Poland",PS:"Palestinian",PT:"Portugal",QA:"Qatar",RO:"Romania",RS:"Serbia",SA:"Saudi Arabia",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",SM:"San Marino",SN:"Senegal",TN:"Tunisia",TR:"Turkey",VG:"Virgin Islands, British"}}),t.fn.bootstrapValidator.validators.iban={html5Attributes:{message:"message",country:"country"},REGEX:{AD:"AD[0-9]{2}[0-9]{4}[0-9]{4}[A-Z0-9]{12}",AE:"AE[0-9]{2}[0-9]{3}[0-9]{16}",AL:"AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}",AO:"AO[0-9]{2}[0-9]{21}",AT:"AT[0-9]{2}[0-9]{5}[0-9]{11}",AZ:"AZ[0-9]{2}[A-Z]{4}[A-Z0-9]{20}",BA:"BA[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{8}[0-9]{2}",BE:"BE[0-9]{2}[0-9]{3}[0-9]{7}[0-9]{2}",BF:"BF[0-9]{2}[0-9]{23}",BG:"BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}",BH:"BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}",BI:"BI[0-9]{2}[0-9]{12}",BJ:"BJ[0-9]{2}[A-Z]{1}[0-9]{23}",BR:"BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z][A-Z0-9]",CH:"CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}",CI:"CI[0-9]{2}[A-Z]{1}[0-9]{23}",CM:"CM[0-9]{2}[0-9]{23}",CR:"CR[0-9]{2}[0-9]{3}[0-9]{14}",CV:"CV[0-9]{2}[0-9]{21}",CY:"CY[0-9]{2}[0-9]{3}[0-9]{5}[A-Z0-9]{16}",CZ:"CZ[0-9]{2}[0-9]{20}",DE:"DE[0-9]{2}[0-9]{8}[0-9]{10}",DK:"DK[0-9]{2}[0-9]{14}",DO:"DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}",DZ:"DZ[0-9]{2}[0-9]{20}",EE:"EE[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{11}[0-9]{1}",ES:"ES[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{1}[0-9]{1}[0-9]{10}",FI:"FI[0-9]{2}[0-9]{6}[0-9]{7}[0-9]{1}",FO:"FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",FR:"FR[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",GB:"GB[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",GE:"GE[0-9]{2}[A-Z]{2}[0-9]{16}",GI:"GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}",GL:"GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",GR:"GR[0-9]{2}[0-9]{3}[0-9]{4}[A-Z0-9]{16}",GT:"GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}",HR:"HR[0-9]{2}[0-9]{7}[0-9]{10}",HU:"HU[0-9]{2}[0-9]{3}[0-9]{4}[0-9]{1}[0-9]{15}[0-9]{1}",IE:"IE[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",IL:"IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}",IR:"IR[0-9]{2}[0-9]{22}",IS:"IS[0-9]{2}[0-9]{4}[0-9]{2}[0-9]{6}[0-9]{10}",IT:"IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",JO:"JO[0-9]{2}[A-Z]{4}[0-9]{4}[0]{8}[A-Z0-9]{10}",KW:"KW[0-9]{2}[A-Z]{4}[0-9]{22}",KZ:"KZ[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LB:"LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}",LI:"LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}",LT:"LT[0-9]{2}[0-9]{5}[0-9]{11}",LU:"LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LV:"LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}",MC:"MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",MD:"MD[0-9]{2}[A-Z0-9]{20}",ME:"ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",MG:"MG[0-9]{2}[0-9]{23}",MK:"MK[0-9]{2}[0-9]{3}[A-Z0-9]{10}[0-9]{2}",ML:"ML[0-9]{2}[A-Z]{1}[0-9]{23}",MR:"MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}",MT:"MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}",MU:"MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{3}",MZ:"MZ[0-9]{2}[0-9]{21}",NL:"NL[0-9]{2}[A-Z]{4}[0-9]{10}",NO:"NO[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{1}",PK:"PK[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",PL:"PL[0-9]{2}[0-9]{8}[0-9]{16}",PS:"PS[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",PT:"PT[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{11}[0-9]{2}",QA:"QA[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",RO:"RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",RS:"RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",SA:"SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}",SE:"SE[0-9]{2}[0-9]{3}[0-9]{16}[0-9]{1}",SI:"SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}",SK:"SK[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{10}",SM:"SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",SN:"SN[0-9]{2}[A-Z]{1}[0-9]{23}",TN:"TN59[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",TR:"TR[0-9]{2}[0-9]{5}[A-Z0-9]{1}[A-Z0-9]{16}",VG:"VG[0-9]{2}[A-Z]{4}[0-9]{16}"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;a=a.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();var r=i.country;if(r?"string"==typeof r&&this.REGEX[r]||(r=e.getDynamicOption(n,r)):r=a.substr(0,2),!this.REGEX[r])return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(t.fn.bootstrapValidator.i18n.iban.countryNotSupported,r)};if(!new RegExp("^"+this.REGEX[r]+"$").test(a))return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.iban.country,t.fn.bootstrapValidator.i18n.iban.countries[r])};a=a.substr(4)+a.substr(0,4),a=t.map(a.split(""),function(t){var e=t.charCodeAt(0);return e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?e-"A".charCodeAt(0)+10:t}),a=a.join("");for(var o=parseInt(a.substr(0,1),10),s=a.length,l=1;s>l;++l)o=(10*o+parseInt(a.substr(l,1),10))%97;return{valid:1===o,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.iban.country,t.fn.bootstrapValidator.i18n.iban.countries[r])}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.id=t.extend(t.fn.bootstrapValidator.i18n.id||{},{"default":"Please enter a valid identification number",countryNotSupported:"The country code %s is not supported",country:"Please enter a valid %s identification number",countries:{BA:"Bosnia and Herzegovina",BG:"Bulgarian",BR:"Brazilian",CH:"Swiss",CL:"Chilean",CZ:"Czech",DK:"Danish",EE:"Estonian",ES:"Spanish",FI:"Finnish",HR:"Croatian",IE:"Irish",IS:"Iceland",LT:"Lithuanian",LV:"Latvian",ME:"Montenegro",MK:"Macedonian",NL:"Dutch",RO:"Romanian",RS:"Serbian",SE:"Swedish",SI:"Slovenian",SK:"Slovak",SM:"San Marino",ZA:"South African"}}),t.fn.bootstrapValidator.validators.id={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["BA","BG","BR","CH","CL","CZ","DK","EE","ES","FI","HR","IE","IS","LT","LV","ME","MK","NL","RO","RS","SE","SI","SK","SM","ZA"],validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=i.country;if(r?("string"!=typeof r||-1===t.inArray(r.toUpperCase(),this.COUNTRY_CODES))&&(r=e.getDynamicOption(n,r)):r=a.substr(0,2),-1===t.inArray(r,this.COUNTRY_CODES))return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(t.fn.bootstrapValidator.i18n.id.countryNotSupported,r)};var o=["_",r.toLowerCase()].join("");return this[o](a)?!0:{valid:!1,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.id.country,t.fn.bootstrapValidator.i18n.id.countries[r.toUpperCase()])}},_validateJMBG:function(t,e){if(!/^\d{13}$/.test(t))return!1;var n=parseInt(t.substr(0,2),10),i=parseInt(t.substr(2,2),10),a=(parseInt(t.substr(4,3),10),parseInt(t.substr(7,2),10)),r=parseInt(t.substr(12,1),10);if(n>31||i>12)return!1;for(var o=0,s=0;6>s;s++)o+=(7-s)*(parseInt(t.charAt(s),10)+parseInt(t.charAt(s+6),10));if(o=11-o%11,(10===o||11===o)&&(o=0),o!==r)return!1;switch(e.toUpperCase()){case"BA":return a>=10&&19>=a;case"MK":return a>=41&&49>=a;case"ME":return a>=20&&29>=a;case"RS":return a>=70&&99>=a;case"SI":return a>=50&&59>=a;default:return!0}},_ba:function(t){return this._validateJMBG(t,"BA")},_mk:function(t){return this._validateJMBG(t,"MK")},_me:function(t){return this._validateJMBG(t,"ME")},_rs:function(t){return this._validateJMBG(t,"RS")},_si:function(t){return this._validateJMBG(t,"SI")},_bg:function(e){if(!/^\d{10}$/.test(e)&&!/^\d{6}\s\d{3}\s\d{1}$/.test(e))return!1;e=e.replace(/\s/g,"");var n=parseInt(e.substr(0,2),10)+1900,i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10);if(i>40?(n+=100,i-=40):i>20&&(n-=100,i-=20),!t.fn.bootstrapValidator.helpers.date(n,i,a))return!1;for(var r=0,o=[2,4,8,5,10,9,7,3,6],s=0;9>s;s++)r+=parseInt(e.charAt(s),10)*o[s];return r=r%11%10,r+""===e.substr(9,1)},_br:function(t){if(/^1{11}|2{11}|3{11}|4{11}|5{11}|6{11}|7{11}|8{11}|9{11}|0{11}$/.test(t))return!1;if(!/^\d{11}$/.test(t)&&!/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(t))return!1;t=t.replace(/\./g,"").replace(/-/g,"");for(var e=0,n=0;9>n;n++)e+=(10-n)*parseInt(t.charAt(n),10);if(e=11-e%11,(10===e||11===e)&&(e=0),e+""!==t.charAt(9))return!1;var i=0;for(n=0;10>n;n++)i+=(11-n)*parseInt(t.charAt(n),10);return i=11-i%11,(10===i||11===i)&&(i=0),i+""===t.charAt(10)},_ch:function(t){if(!/^756[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{2}$/.test(t))return!1;t=t.replace(/\D/g,"").substr(3);for(var e=t.length,n=0,i=8===e?[3,1]:[1,3],a=0;e-1>a;a++)n+=parseInt(t.charAt(a),10)*i[a%2];return n=10-n%10,n+""===t.charAt(e-1)},_cl:function(t){if(!/^\d{7,8}[-]{0,1}[0-9K]$/i.test(t))return!1;for(t=t.replace(/\-/g,"");t.length<9;)t="0"+t;for(var e=0,n=[3,2,7,6,5,4,3,2],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,11===e?e=0:10===e&&(e="K"),e+""===t.charAt(8).toUpperCase()},_cz:function(e){if(!/^\d{9,10}$/.test(e))return!1;var n=1900+parseInt(e.substr(0,2),10),i=parseInt(e.substr(2,2),10)%50%20,a=parseInt(e.substr(4,2),10);if(9===e.length){if(n>=1980&&(n-=100),n>1953)return!1}else 1954>n&&(n+=100);if(!t.fn.bootstrapValidator.helpers.date(n,i,a))return!1;if(10===e.length){var r=parseInt(e.substr(0,9),10)%11;return 1985>n&&(r%=10),r+""===e.substr(9,1)}return!0},_dk:function(e){if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(e))return!1;e=e.replace(/-/g,"");var n=parseInt(e.substr(0,2),10),i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10);switch(!0){case-1!=="5678".indexOf(e.charAt(6))&&a>=58:a+=1800;break;case-1!=="0123".indexOf(e.charAt(6)):case-1!=="49".indexOf(e.charAt(6))&&a>=37:a+=1900;break;default:a+=2e3}return t.fn.bootstrapValidator.helpers.date(a,i,n)},_ee:function(t){return this._lt(t)},_es:function(t){if(!/^[0-9A-Z]{8}[-]{0,1}[0-9A-Z]$/.test(t)&&!/^[XYZ][-]{0,1}[0-9]{7}[-]{0,1}[0-9A-Z]$/.test(t))return!1;t=t.replace(/-/g,"");var e="XYZ".indexOf(t.charAt(0));-1!==e&&(t=e+t.substr(1)+"");var n=parseInt(t.substr(0,8),10);return n="TRWAGMYFPDXBNJZSQVHLCKE"[n%23],n===t.substr(8,1)},_fi:function(e){if(!/^[0-9]{6}[-+A][0-9]{3}[0-9ABCDEFHJKLMNPRSTUVWXY]$/.test(e))return!1;var n=parseInt(e.substr(0,2),10),i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10),r={"+":1800,"-":1900,A:2e3};if(a=r[e.charAt(6)]+a,!t.fn.bootstrapValidator.helpers.date(a,i,n))return!1;var o=parseInt(e.substr(7,3),10);if(2>o)return!1;var s=e.substr(0,6)+e.substr(7,3)+"";return s=parseInt(s,10),"0123456789ABCDEFHJKLMNPRSTUVWXY".charAt(s%31)===e.charAt(10)},_hr:function(e){return/^[0-9]{11}$/.test(e)?t.fn.bootstrapValidator.helpers.mod11And10(e):!1},_ie:function(t){if(!/^\d{7}[A-W][AHWTX]?$/.test(t))return!1;var e=function(t){for(;t.length<7;)t="0"+t;for(var e="WABCDEFGHIJKLMNOPQRSTUV",n=0,i=0;7>i;i++)n+=parseInt(t.charAt(i),10)*(8-i);return n+=9*e.indexOf(t.substr(7)),e[n%23]};return 9!==t.length||"A"!==t.charAt(8)&&"H"!==t.charAt(8)?t.charAt(7)===e(t.substr(0,7)):t.charAt(7)===e(t.substr(0,7)+t.substr(8)+"")},_is:function(e){if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(e))return!1;e=e.replace(/-/g,"");var n=parseInt(e.substr(0,2),10),i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10),r=parseInt(e.charAt(9),10);if(a=9===r?1900+a:100*(20+r)+a,!t.fn.bootstrapValidator.helpers.date(a,i,n,!0))return!1;for(var o=0,s=[3,2,7,6,5,4,3,2],l=0;8>l;l++)o+=parseInt(e.charAt(l),10)*s[l];return o=11-o%11,o+""===e.charAt(8)},_lt:function(e){if(!/^[0-9]{11}$/.test(e))return!1;var n=parseInt(e.charAt(0),10),i=parseInt(e.substr(1,2),10),a=parseInt(e.substr(3,2),10),r=parseInt(e.substr(5,2),10),o=n%2===0?17+n/2:17+(n+1)/2;if(i=100*o+i,!t.fn.bootstrapValidator.helpers.date(i,a,r,!0))return!1;for(var s=0,l=[1,2,3,4,5,6,7,8,9,1],d=0;10>d;d++)s+=parseInt(e.charAt(d),10)*l[d];if(s%=11,10!==s)return s+""===e.charAt(10);for(s=0,l=[3,4,5,6,7,8,9,1,2,3],d=0;10>d;d++)s+=parseInt(e.charAt(d),10)*l[d];return s%=11,10===s&&(s=0),s+""===e.charAt(10)},_lv:function(e){if(!/^[0-9]{6}[-]{0,1}[0-9]{5}$/.test(e))return!1;e=e.replace(/\D/g,"");var n=parseInt(e.substr(0,2),10),i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10);if(a=a+1800+100*parseInt(e.charAt(6),10),!t.fn.bootstrapValidator.helpers.date(a,i,n,!0))return!1;for(var r=0,o=[10,5,8,4,2,1,6,3,7,9],s=0;10>s;s++)r+=parseInt(e.charAt(s),10)*o[s];return r=(r+1)%11%10,r+""===e.charAt(10)},_nl:function(t){for(;t.length<9;)t="0"+t;if(!/^[0-9]{4}[.]{0,1}[0-9]{2}[.]{0,1}[0-9]{3}$/.test(t))return!1;if(t=t.replace(/\./g,""),0===parseInt(t,10))return!1;for(var e=0,n=t.length,i=0;n-1>i;i++)e+=(9-i)*parseInt(t.charAt(i),10);return e%=11,10===e&&(e=0),e+""===t.charAt(n-1)},_ro:function(e){if(!/^[0-9]{13}$/.test(e))return!1;var n=parseInt(e.charAt(0),10);if(0===n||7===n||8===n)return!1;var i=parseInt(e.substr(1,2),10),a=parseInt(e.substr(3,2),10),r=parseInt(e.substr(5,2),10),o={1:1900,2:1900,3:1800,4:1800,5:2e3,6:2e3};if(r>31&&a>12)return!1;if(9!==n&&(i=o[n+""]+i,!t.fn.bootstrapValidator.helpers.date(i,a,r)))return!1;for(var s=0,l=[2,7,9,1,4,6,3,5,8,2,7,9],d=e.length,c=0;d-1>c;c++)s+=parseInt(e.charAt(c),10)*l[c];return s%=11,10===s&&(s=1),s+""===e.charAt(d-1)},_se:function(e){if(!/^[0-9]{10}$/.test(e)&&!/^[0-9]{6}[-|+][0-9]{4}$/.test(e))return!1;e=e.replace(/[^0-9]/g,"");var n=parseInt(e.substr(0,2),10)+1900,i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10);return t.fn.bootstrapValidator.helpers.date(n,i,a)?t.fn.bootstrapValidator.helpers.luhn(e):!1},_sk:function(t){return this._cz(t)},_sm:function(t){return/^\d{5}$/.test(t)},_za:function(e){if(!/^[0-9]{10}[0|1][8|9][0-9]$/.test(e))return!1;var n=parseInt(e.substr(0,2),10),i=(new Date).getFullYear()%100,a=parseInt(e.substr(2,2),10),r=parseInt(e.substr(4,2),10);return n=n>=i?n+1900:n+2e3,t.fn.bootstrapValidator.helpers.date(n,a,r)?t.fn.bootstrapValidator.helpers.luhn(e):!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.identical=t.extend(t.fn.bootstrapValidator.i18n.identical||{},{"default":"Please enter the same value"}),t.fn.bootstrapValidator.validators.identical={html5Attributes:{message:"message",field:"field"},validate:function(t,e,n){var i=e.val();if(""===i)return!0;var a=t.getFieldElements(n.field);return null===a?!0:i===a.val()?(t.updateStatus(n.field,t.STATUS_VALID,"identical"),!0):!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.imei=t.extend(t.fn.bootstrapValidator.i18n.imei||{},{"default":"Please enter a valid IMEI number"}),t.fn.bootstrapValidator.validators.imei={validate:function(e,n){var i=n.val();if(""===i)return!0;switch(!0){case/^\d{15}$/.test(i):case/^\d{2}-\d{6}-\d{6}-\d{1}$/.test(i):case/^\d{2}\s\d{6}\s\d{6}\s\d{1}$/.test(i):return i=i.replace(/[^0-9]/g,""),t.fn.bootstrapValidator.helpers.luhn(i);case/^\d{14}$/.test(i):case/^\d{16}$/.test(i):case/^\d{2}-\d{6}-\d{6}(|-\d{2})$/.test(i):case/^\d{2}\s\d{6}\s\d{6}(|\s\d{2})$/.test(i):return!0;default:return!1}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.integer=t.extend(t.fn.bootstrapValidator.i18n.integer||{},{"default":"Please enter a valid number"}),t.fn.bootstrapValidator.validators.integer={enableByHtml5:function(t){return"number"===t.attr("type")&&(void 0===t.attr("step")||t.attr("step")%1===0)},validate:function(t,e){var n=e.val();return""===n?!0:/^(?:-?(?:0|[1-9][0-9]*))$/.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.ip=t.extend(t.fn.bootstrapValidator.i18n.ip||{},{"default":"Please enter a valid IP address",ipv4:"Please enter a valid IPv4 address",ipv6:"Please enter a valid IPv6 address"}),t.fn.bootstrapValidator.validators.ip={html5Attributes:{message:"message",ipv4:"ipv4",ipv6:"ipv6"},validate:function(e,n,i){var a=n.val();return""===a?!0:(i=t.extend({},{ipv4:!0,ipv6:!0},i),i.ipv4?{valid:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a),message:i.message||t.fn.bootstrapValidator.i18n.ip.ipv4}:i.ipv6?{valid:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(a),message:i.message||t.fn.bootstrapValidator.i18n.ip.ipv6}:!1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.isbn=t.extend(t.fn.bootstrapValidator.i18n.isbn||{},{"default":"Please enter a valid ISBN number"}),t.fn.bootstrapValidator.validators.isbn={validate:function(t,e){var n=e.val();if(""===n)return!0;var i;switch(!0){case/^\d{9}[\dX]$/.test(n):case 13===n.length&&/^(\d+)-(\d+)-(\d+)-([\dX])$/.test(n):case 13===n.length&&/^(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(n):i="ISBN10";break;case/^(978|979)\d{9}[\dX]$/.test(n):case 17===n.length&&/^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/.test(n):case 17===n.length&&/^(978|979)\s(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(n):i="ISBN13";break;default:return!1}n=n.replace(/[^0-9X]/gi,"");var a,r,o=n.split(""),s=o.length,l=0;switch(i){case"ISBN10":for(l=0,a=0;s-1>a;a++)l+=parseInt(o[a],10)*(10-a);return r=11-l%11,11===r?r=0:10===r&&(r="X"),r+""===o[s-1];case"ISBN13":for(l=0,a=0;s-1>a;a++)l+=a%2===0?parseInt(o[a],10):3*parseInt(o[a],10);return r=10-l%10,10===r&&(r="0"),r+""===o[s-1];default:return!1}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.isin=t.extend(t.fn.bootstrapValidator.i18n.isin||{},{"default":"Please enter a valid ISIN number"}),t.fn.bootstrapValidator.validators.isin={COUNTRY_CODES:"AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW",validate:function(t,e){var n=e.val();if(""===n)return!0;n=n.toUpperCase();var i=new RegExp("^("+this.COUNTRY_CODES+")[0-9A-Z]{10}$");if(!i.test(n))return!1;for(var a="",r=n.length,o=0;r-1>o;o++){var s=n.charCodeAt(o);a+=s>57?(s-55).toString():n.charAt(o)}var l="",d=a.length,c=d%2!==0?0:1;for(o=0;d>o;o++)l+=parseInt(a[o],10)*(o%2===c?2:1)+"";var u=0;for(o=0;o<l.length;o++)u+=parseInt(l.charAt(o),10);return u=(10-u%10)%10,u+""===n.charAt(r-1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.ismn=t.extend(t.fn.bootstrapValidator.i18n.ismn||{},{"default":"Please enter a valid ISMN number"}),t.fn.bootstrapValidator.validators.ismn={validate:function(t,e){var n=e.val();if(""===n)return!0;var i;switch(!0){case/^M\d{9}$/.test(n):case/^M-\d{4}-\d{4}-\d{1}$/.test(n):case/^M\s\d{4}\s\d{4}\s\d{1}$/.test(n):i="ISMN10";break;case/^9790\d{9}$/.test(n):case/^979-0-\d{4}-\d{4}-\d{1}$/.test(n):case/^979\s0\s\d{4}\s\d{4}\s\d{1}$/.test(n):i="ISMN13";break;default:return!1}"ISMN10"===i&&(n="9790"+n.substr(1)),n=n.replace(/[^0-9]/gi,"");for(var a=n.length,r=0,o=[1,3],s=0;a-1>s;s++)r+=parseInt(n.charAt(s),10)*o[s%2];return r=10-r%10,r+""===n.charAt(a-1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.issn=t.extend(t.fn.bootstrapValidator.i18n.issn||{},{"default":"Please enter a valid ISSN number"}),t.fn.bootstrapValidator.validators.issn={validate:function(t,e){var n=e.val();if(""===n)return!0;if(!/^\d{4}\-\d{3}[\dX]$/.test(n))return!1;n=n.replace(/[^0-9X]/gi,"");var i=n.split(""),a=i.length,r=0;"X"===i[7]&&(i[7]=10);for(var o=0;a>o;o++)r+=parseInt(i[o],10)*(8-o);return r%11===0}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.lessThan=t.extend(t.fn.bootstrapValidator.i18n.lessThan||{},{"default":"Please enter a value less than or equal to %s",notInclusive:"Please enter a value less than %s"}),t.fn.bootstrapValidator.validators.lessThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(t){var e=t.attr("max");return e?{value:e}:!1},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=t.isNumeric(i.value)?i.value:e.getDynamicOption(n,i.value);return a=parseFloat(a),i.inclusive===!0||void 0===i.inclusive?{valid:r>=a,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.lessThan["default"],r)}:{valid:r>a,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.lessThan.notInclusive,r)}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.mac=t.extend(t.fn.bootstrapValidator.i18n.mac||{},{"default":"Please enter a valid MAC address"}),t.fn.bootstrapValidator.validators.mac={validate:function(t,e){var n=e.val();return""===n?!0:/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(n)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.notEmpty=t.extend(t.fn.bootstrapValidator.i18n.notEmpty||{},{"default":"Please enter a value"}),t.fn.bootstrapValidator.validators.notEmpty={enableByHtml5:function(t){var e=t.attr("required")+"";return"required"===e||"true"===e},validate:function(e,n){var i=n.attr("type");return"radio"===i||"checkbox"===i?e.getFieldElements(n.attr("data-bv-field")).filter(":checked").length>0:""!==t.trim(n.val())}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.numeric=t.extend(t.fn.bootstrapValidator.i18n.numeric||{},{"default":"Please enter a valid float number"}),t.fn.bootstrapValidator.validators.numeric={html5Attributes:{message:"message",separator:"separator"},enableByHtml5:function(t){return"number"===t.attr("type")&&void 0!==t.attr("step")&&t.attr("step")%1!==0},validate:function(t,e,n){var i=e.val();if(""===i)return!0;var a=n.separator||".";return"."!==a&&(i=i.replace(a,".")),!isNaN(parseFloat(i))&&isFinite(i)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.phone=t.extend(t.fn.bootstrapValidator.i18n.phone||{},{"default":"Please enter a valid phone number",countryNotSupported:"The country code %s is not supported",country:"Please enter a valid phone number in %s",countries:{GB:"United Kingdom",US:"USA"}}),t.fn.bootstrapValidator.validators.phone={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["GB","US"],validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=i.country;if(("string"!=typeof r||-1===t.inArray(r,this.COUNTRY_CODES))&&(r=e.getDynamicOption(n,r)),!r||-1===t.inArray(r.toUpperCase(),this.COUNTRY_CODES))return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(t.fn.bootstrapValidator.i18n.phone.countryNotSupported,r)};var o=!0;switch(r.toUpperCase()){case"GB":a=t.trim(a),o=/^\(?(?:(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?\(?(?:0\)?[\s-]?\(?)?|0)(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}|\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4}|\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3})|\d{5}\)?[\s-]?\d{4,5}|8(?:00[\s-]?11[\s-]?11|45[\s-]?46[\s-]?4\d))(?:(?:[\s-]?(?:x|ext\.?\s?|\#)\d+)?)$/.test(a);break;case"US":default:a=a.replace(/\D/g,""),o=/^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(a)&&10===a.length}return{valid:o,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.phone.country,t.fn.bootstrapValidator.i18n.phone.countries[r])}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.regexp=t.extend(t.fn.bootstrapValidator.i18n.regexp||{},{"default":"Please enter a value matching the pattern"}),t.fn.bootstrapValidator.validators.regexp={html5Attributes:{message:"message",regexp:"regexp"},enableByHtml5:function(t){var e=t.attr("pattern");return e?{regexp:e}:!1},validate:function(t,e,n){var i=e.val();if(""===i)return!0;var a="string"==typeof n.regexp?new RegExp(n.regexp):n.regexp;return a.test(i)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.remote=t.extend(t.fn.bootstrapValidator.i18n.remote||{},{"default":"Please enter a valid value"}),t.fn.bootstrapValidator.validators.remote={html5Attributes:{message:"message",url:"url",name:"name"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=n.attr("data-bv-field"),o=i.data||{},s=i.url,l=i.type||"POST";"function"==typeof o&&(o=o.call(this,e)),"function"==typeof s&&(s=s.call(this,e)),o[i.name||r]=a;var d=new t.Deferred,c=t.ajax({type:l,url:s,dataType:"json",data:o});return c.then(function(t){d.resolve(n,"remote",t.valid===!0||"true"===t.valid,t.message?t.message:null)}),d.fail(function(){c.abort()}),d}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.rtn=t.extend(t.fn.bootstrapValidator.i18n.rtn||{},{"default":"Please enter a valid RTN number"}),t.fn.bootstrapValidator.validators.rtn={validate:function(t,e){var n=e.val();if(""===n)return!0;if(!/^\d{9}$/.test(n))return!1;for(var i=0,a=0;a<n.length;a+=3)i+=3*parseInt(n.charAt(a),10)+7*parseInt(n.charAt(a+1),10)+parseInt(n.charAt(a+2),10);return 0!==i&&i%10===0}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.sedol=t.extend(t.fn.bootstrapValidator.i18n.sedol||{},{"default":"Please enter a valid SEDOL number"}),t.fn.bootstrapValidator.validators.sedol={validate:function(t,e){var n=e.val();if(""===n)return!0;if(n=n.toUpperCase(),!/^[0-9A-Z]{7}$/.test(n))return!1;for(var i=0,a=[1,3,1,7,3,9,1],r=n.length,o=0;r-1>o;o++)i+=a[o]*parseInt(n.charAt(o),36);return i=(10-i%10)%10,i+""===n.charAt(r-1)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.siren=t.extend(t.fn.bootstrapValidator.i18n.siren||{},{"default":"Please enter a valid SIREN number"}),t.fn.bootstrapValidator.validators.siren={validate:function(e,n){var i=n.val();return""===i?!0:/^\d{9}$/.test(i)?t.fn.bootstrapValidator.helpers.luhn(i):!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.siret=t.extend(t.fn.bootstrapValidator.i18n.siret||{},{"default":"Please enter a valid SIRET number"}),t.fn.bootstrapValidator.validators.siret={validate:function(t,e){var n=e.val();if(""===n)return!0;for(var i,a=0,r=n.length,o=0;r>o;o++)i=parseInt(n.charAt(o),10),o%2===0&&(i=2*i,i>9&&(i-=9)),a+=i;return a%10===0}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.step=t.extend(t.fn.bootstrapValidator.i18n.step||{},{"default":"Please enter a valid step of %s"}),t.fn.bootstrapValidator.validators.step={html5Attributes:{message:"message",base:"baseValue",step:"step"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;if(i=t.extend({},{baseValue:0,step:1},i),a=parseFloat(a),!t.isNumeric(a))return!1;var r=function(t,e){var n=Math.pow(10,e);t*=n;var i=t>0|-(0>t),a=t%1===.5*i;return a?(Math.floor(t)+(i>0))/n:Math.round(t)/n},o=function(t,e){if(0===e)return 1;var n=(t+"").split("."),i=(e+"").split("."),a=(1===n.length?0:n[1].length)+(1===i.length?0:i[1].length);return r(t-e*Math.floor(t/e),a)},s=o(a-i.baseValue,i.step);return{valid:0===s||s===i.step,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.step["default"],[i.step])}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.stringCase=t.extend(t.fn.bootstrapValidator.i18n.stringCase||{},{"default":"Please enter only lowercase characters",upper:"Please enter only uppercase characters"}),t.fn.bootstrapValidator.validators.stringCase={html5Attributes:{message:"message","case":"case"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=(i["case"]||"lower").toLowerCase();return{valid:"upper"===r?a===a.toUpperCase():a===a.toLowerCase(),message:i.message||("upper"===r?t.fn.bootstrapValidator.i18n.stringCase.upper:t.fn.bootstrapValidator.i18n.stringCase["default"])}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.stringLength=t.extend(t.fn.bootstrapValidator.i18n.stringLength||{},{"default":"Please enter a value with valid length",less:"Please enter less than %s characters",more:"Please enter more than %s characters",between:"Please enter value between %s and %s characters long"}),t.fn.bootstrapValidator.validators.stringLength={html5Attributes:{message:"message",min:"min",max:"max"},enableByHtml5:function(t){var e=t.attr("maxlength");
return e?{max:parseInt(e,10)}:!1},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=t.isNumeric(i.min)?i.min:e.getDynamicOption(n,i.min),o=t.isNumeric(i.max)?i.max:e.getDynamicOption(n,i.max),s=a.length,l=!0,d=i.message||t.fn.bootstrapValidator.i18n.stringLength["default"];switch((r&&s<parseInt(r,10)||o&&s>parseInt(o,10))&&(l=!1),!0){case!!r&&!!o:d=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.stringLength.between,[parseInt(r,10),parseInt(o,10)]);break;case!!r:d=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.stringLength.more,parseInt(r,10));break;case!!o:d=t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.stringLength.less,parseInt(o,10))}return{valid:l,message:d}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.uri=t.extend(t.fn.bootstrapValidator.i18n.uri||{},{"default":"Please enter a valid URI"}),t.fn.bootstrapValidator.validators.uri={html5Attributes:{message:"message",allowlocal:"allowLocal"},enableByHtml5:function(t){return"url"===t.attr("type")},validate:function(t,e,n){var i=e.val();if(""===i)return!0;var a=n.allowLocal===!0||"true"===n.allowLocal,r=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:"+(a?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?$","i");return r.test(i)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.uuid=t.extend(t.fn.bootstrapValidator.i18n.uuid||{},{"default":"Please enter a valid UUID number",version:"Please enter a valid UUID version %s number"}),t.fn.bootstrapValidator.validators.uuid={html5Attributes:{message:"message",version:"version"},validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},o=i.version?i.version+"":"all";return{valid:null===r[o]?!0:r[o].test(a),message:i.version?t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.uuid.version,i.version):i.message||t.fn.bootstrapValidator.i18n.uuid["default"]}}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.vat=t.extend(t.fn.bootstrapValidator.i18n.vat||{},{"default":"Please enter a valid VAT number",countryNotSupported:"The country code %s is not supported",country:"Please enter a valid %s VAT number",countries:{AT:"Austrian",BE:"Belgian",BG:"Bulgarian",CH:"Swiss",CY:"Cypriot",CZ:"Czech",DE:"German",DK:"Danish",EE:"Estonian",ES:"Spanish",FI:"Finnish",FR:"French",GB:"United Kingdom",GR:"Greek",EL:"Greek",HU:"Hungarian",HR:"Croatian",IE:"Irish",IT:"Italian",LT:"Lithuanian",LU:"Luxembourg",LV:"Latvian",MT:"Maltese",NL:"Dutch",NO:"Norwegian",PL:"Polish",PT:"Portuguese",RO:"Romanian",RU:"Russian",RS:"Serbian",SE:"Swedish",SI:"Slovenian",SK:"Slovak"}}),t.fn.bootstrapValidator.validators.vat={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","EL","HU","IE","IT","LV","LT","LU","MT","NL","NO","PL","PT","RO","RU","RS","SK","SI","ES","SE","CH","GB"],validate:function(e,n,i){var a=n.val();if(""===a)return!0;var r=i.country;if(r?("string"!=typeof r||-1===t.inArray(r.toUpperCase(),this.COUNTRY_CODES))&&(r=e.getDynamicOption(n,r)):r=a.substr(0,2),-1===t.inArray(r,this.COUNTRY_CODES))return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(t.fn.bootstrapValidator.i18n.vat.countryNotSupported,r)};var o=["_",r.toLowerCase()].join("");return this[o](a)?!0:{valid:!1,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.vat.country,t.fn.bootstrapValidator.i18n.vat.countries[r.toUpperCase()])}},_at:function(t){if(!/^ATU[0-9]{8}$/.test(t))return!1;t=t.substr(3);for(var e=0,n=[1,2,1,2,1,2,1],i=0,a=0;7>a;a++)i=parseInt(t.charAt(a),10)*n[a],i>9&&(i=Math.floor(i/10)+i%10),e+=i;return e=10-(e+4)%10,10===e&&(e=0),e+""===t.substr(7,1)},_be:function(t){if(!/^BE[0]{0,1}[0-9]{9}$/.test(t))return!1;if(t=t.substr(2),9===t.length&&(t="0"+t),"0"===t.substr(1,1))return!1;var e=parseInt(t.substr(0,8),10)+parseInt(t.substr(8,2),10);return e%97===0},_bg:function(e){if(!/^BG[0-9]{9,10}$/.test(e))return!1;e=e.substr(2);var n=0,i=0;if(9===e.length){for(i=0;8>i;i++)n+=parseInt(e.charAt(i),10)*(i+1);if(n%=11,10===n)for(n=0,i=0;8>i;i++)n+=parseInt(e.charAt(i),10)*(i+3);return n%=10,n+""===e.substr(8)}if(10===e.length){var a=function(e){var n=parseInt(e.substr(0,2),10)+1900,i=parseInt(e.substr(2,2),10),a=parseInt(e.substr(4,2),10);if(i>40?(n+=100,i-=40):i>20&&(n-=100,i-=20),!t.fn.bootstrapValidator.helpers.date(n,i,a))return!1;for(var r=0,o=[2,4,8,5,10,9,7,3,6],s=0;9>s;s++)r+=parseInt(e.charAt(s),10)*o[s];return r=r%11%10,r+""===e.substr(9,1)},r=function(t){for(var e=0,n=[21,19,17,13,11,9,7,3,1],i=0;9>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%=10,e+""===t.substr(9,1)},o=function(t){for(var e=0,n=[4,3,2,7,6,5,4,3,2],i=0;9>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,10===e?!1:(11===e&&(e=0),e+""===t.substr(9,1))};return a(e)||r(e)||o(e)}return!1},_ch:function(t){if(!/^CHE[0-9]{9}(MWST)?$/.test(t))return!1;t=t.substr(3);for(var e=0,n=[5,4,3,2,7,6,5,4],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,10===e?!1:(11===e&&(e=0),e+""===t.substr(8,1))},_cy:function(t){if(!/^CY[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(t))return!1;if(t=t.substr(2),"12"===t.substr(0,2))return!1;for(var e=0,n={0:1,1:0,2:5,3:7,4:9,5:13,6:15,7:17,8:19,9:21},i=0;8>i;i++){var a=parseInt(t.charAt(i),10);i%2===0&&(a=n[a+""]),e+=a}return e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[e%26],e+""===t.substr(8,1)},_cz:function(e){if(!/^CZ[0-9]{8,10}$/.test(e))return!1;e=e.substr(2);var n=0,i=0;if(8===e.length){if(e.charAt(0)+""=="9")return!1;for(n=0,i=0;7>i;i++)n+=parseInt(e.charAt(i),10)*(8-i);return n=11-n%11,10===n&&(n=0),11===n&&(n=1),n+""===e.substr(7,1)}if(9===e.length&&e.charAt(0)+""=="6"){for(n=0,i=0;7>i;i++)n+=parseInt(e.charAt(i+1),10)*(8-i);return n=11-n%11,10===n&&(n=0),11===n&&(n=1),n=[8,7,6,5,4,3,2,1,0,9,10][n-1],n+""===e.substr(8,1)}if(9===e.length||10===e.length){var a=1900+parseInt(e.substr(0,2),10),r=parseInt(e.substr(2,2),10)%50%20,o=parseInt(e.substr(4,2),10);if(9===e.length){if(a>=1980&&(a-=100),a>1953)return!1}else 1954>a&&(a+=100);if(!t.fn.bootstrapValidator.helpers.date(a,r,o))return!1;if(10===e.length){var s=parseInt(e.substr(0,9),10)%11;return 1985>a&&(s%=10),s+""===e.substr(9,1)}return!0}return!1},_de:function(e){return/^DE[0-9]{9}$/.test(e)?(e=e.substr(2),t.fn.bootstrapValidator.helpers.mod11And10(e)):!1},_dk:function(t){if(!/^DK[0-9]{8}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[2,7,6,5,4,3,2,1],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%11===0},_ee:function(t){if(!/^EE[0-9]{9}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[3,7,1,3,7,1,3,7,1],i=0;9>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%10===0},_es:function(t){if(!/^ES[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(t))return!1;t=t.substr(2);var e=function(t){var e=parseInt(t.substr(0,8),10);return e="TRWAGMYFPDXBNJZSQVHLCKE"[e%23],e+""===t.substr(8,1)},n=function(t){var e=["XYZ".indexOf(t.charAt(0)),t.substr(1)].join("");return e=parseInt(e,10),e="TRWAGMYFPDXBNJZSQVHLCKE"[e%23],e+""===t.substr(8,1)},i=function(t){var e,n=t.charAt(0);if(-1!=="KLM".indexOf(n))return e=parseInt(t.substr(1,8),10),e="TRWAGMYFPDXBNJZSQVHLCKE"[e%23],e+""===t.substr(8,1);if(-1!=="ABCDEFGHJNPQRSUVW".indexOf(n)){for(var i=0,a=[2,1,2,1,2,1,2],r=0,o=0;7>o;o++)r=parseInt(t.charAt(o+1),10)*a[o],r>9&&(r=Math.floor(r/10)+r%10),i+=r;return i=10-i%10,i+""===t.substr(8,1)||"JABCDEFGHI"[i]===t.substr(8,1)}return!1},a=t.charAt(0);return/^[0-9]$/.test(a)?e(t):/^[XYZ]$/.test(a)?n(t):i(t)},_fi:function(t){if(!/^FI[0-9]{8}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[7,9,10,5,8,4,2,1],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%11===0},_fr:function(e){if(!/^FR[0-9A-Z]{2}[0-9]{9}$/.test(e))return!1;if(e=e.substr(2),!t.fn.bootstrapValidator.helpers.luhn(e.substr(2)))return!1;if(/^[0-9]{2}$/.test(e.substr(0,2)))return e.substr(0,2)===parseInt(e.substr(2)+"12",10)%97+"";var n,i="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";return n=/^[0-9]{1}$/.test(e.charAt(0))?24*i.indexOf(e.charAt(0))+i.indexOf(e.charAt(1))-10:34*i.indexOf(e.charAt(0))+i.indexOf(e.charAt(1))-100,(parseInt(e.substr(2),10)+1+Math.floor(n/11))%11===n%11},_gb:function(t){if(!(/^GB[0-9]{9}$/.test(t)||/^GB[0-9]{12}$/.test(t)||/^GBGD[0-9]{3}$/.test(t)||/^GBHA[0-9]{3}$/.test(t)||/^GB(GD|HA)8888[0-9]{5}$/.test(t)))return!1;t=t.substr(2);var e=t.length;if(5===e){var n=t.substr(0,2),i=parseInt(t.substr(2),10);return"GD"===n&&500>i||"HA"===n&&i>=500}if(11===e&&("GD8888"===t.substr(0,6)||"HA8888"===t.substr(0,6)))return"GD"===t.substr(0,2)&&parseInt(t.substr(6,3),10)>=500||"HA"===t.substr(0,2)&&parseInt(t.substr(6,3),10)<500?!1:parseInt(t.substr(6,3),10)%97===parseInt(t.substr(9,2),10);if(9===e||12===e){for(var a=0,r=[8,7,6,5,4,3,2,10,1],o=0;9>o;o++)a+=parseInt(t.charAt(o),10)*r[o];return a%=97,parseInt(t.substr(0,3),10)>=100?0===a||42===a||55===a:0===a}return!0},_gr:function(t){if(!/^GR[0-9]{9}$/.test(t))return!1;t=t.substr(2),8===t.length&&(t="0"+t);for(var e=0,n=[256,128,64,32,16,8,4,2],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=e%11%10,e+""===t.substr(8,1)},_el:function(t){return/^EL[0-9]{9}$/.test(t)?(t="GR"+t.substr(2),this._gr(t)):!1},_hu:function(t){if(!/^HU[0-9]{8}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[9,7,3,1,9,7,3,1],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%10===0},_hr:function(e){return/^HR[0-9]{11}$/.test(e)?(e=e.substr(2),t.fn.bootstrapValidator.helpers.mod11And10(e)):!1},_ie:function(t){if(!/^IE[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(t))return!1;t=t.substr(2);var e=function(t){for(;t.length<7;)t="0"+t;for(var e="WABCDEFGHIJKLMNOPQRSTUV",n=0,i=0;7>i;i++)n+=parseInt(t.charAt(i),10)*(8-i);return n+=9*e.indexOf(t.substr(7)),e[n%23]};return/^[0-9]+$/.test(t.substr(0,7))?t.charAt(7)===e(t.substr(0,7)+t.substr(8)+""):-1!=="ABCDEFGHIJKLMNOPQRSTUVWXYZ+*".indexOf(t.charAt(1))?t.charAt(7)===e(t.substr(2,5)+t.substr(0,1)+""):!0},_it:function(e){if(!/^IT[0-9]{11}$/.test(e))return!1;if(e=e.substr(2),0===parseInt(e.substr(0,7),10))return!1;var n=parseInt(e.substr(7,3),10);return 1>n||n>201&&999!==n&&888!==n?!1:t.fn.bootstrapValidator.helpers.luhn(e)},_lt:function(t){if(!/^LT([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(t))return!1;t=t.substr(2);var e,n=t.length,i=0;for(e=0;n-1>e;e++)i+=parseInt(t.charAt(e),10)*(1+e%9);var a=i%11;if(10===a)for(i=0,e=0;n-1>e;e++)i+=parseInt(t.charAt(e),10)*(1+(e+2)%9);return a=a%11%10,a+""===t.charAt(n-1)},_lu:function(t){return/^LU[0-9]{8}$/.test(t)?(t=t.substr(2),parseInt(t.substr(0,6),10)%89+""===t.substr(6,2)):!1},_lv:function(e){if(!/^LV[0-9]{11}$/.test(e))return!1;e=e.substr(2);var n,i=parseInt(e.charAt(0),10),a=0,r=[],o=e.length;if(i>3){for(a=0,r=[9,1,4,8,3,10,2,5,7,6,1],n=0;o>n;n++)a+=parseInt(e.charAt(n),10)*r[n];return a%=11,3===a}var s=parseInt(e.substr(0,2),10),l=parseInt(e.substr(2,2),10),d=parseInt(e.substr(4,2),10);if(d=d+1800+100*parseInt(e.charAt(6),10),!t.fn.bootstrapValidator.helpers.date(d,l,s))return!1;for(a=0,r=[10,5,8,4,2,1,6,3,7,9],n=0;o-1>n;n++)a+=parseInt(e.charAt(n),10)*r[n];return a=(a+1)%11%10,a+""===e.charAt(o-1)},_mt:function(t){if(!/^MT[0-9]{8}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[3,4,6,7,8,9,10,1],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%37===0},_nl:function(t){if(!/^NL[0-9]{9}B[0-9]{2}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[9,8,7,6,5,4,3,2],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%=11,e>9&&(e=0),e+""===t.substr(8,1)},_no:function(t){if(!/^NO[0-9]{9}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[3,2,7,6,5,4,3,2],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,11===e&&(e=0),e+""===t.substr(8,1)},_pl:function(t){if(!/^PL[0-9]{10}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[6,5,7,2,3,4,5,6,7,-1],i=0;10>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e%11===0},_pt:function(t){if(!/^PT[0-9]{9}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[9,8,7,6,5,4,3,2],i=0;8>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,e>9&&(e=0),e+""===t.substr(8,1)},_ro:function(t){if(!/^RO[1-9][0-9]{1,9}$/.test(t))return!1;t=t.substr(2);for(var e=t.length,n=[7,5,3,2,1,7,5,3,2].slice(10-e),i=0,a=0;e-1>a;a++)i+=parseInt(t.charAt(a),10)*n[a];return i=10*i%11%10,i+""===t.substr(e-1,1)},_ru:function(t){if(!/^RU([0-9]{9}|[0-9]{12})$/.test(t))return!1;t=t.substr(2);var e=0;if(10===t.length){var n=0,i=[2,4,10,3,5,9,4,6,8,0];for(e=0;10>e;e++)n+=parseInt(t.charAt(e),10)*i[e];return n%=11,n>9&&(n%=10),n+""===t.substr(9,1)}if(12===t.length){var a=0,r=[7,2,4,10,3,5,9,4,6,8,0],o=0,s=[3,7,2,4,10,3,5,9,4,6,8,0];for(e=0;11>e;e++)a+=parseInt(t.charAt(e),10)*r[e],o+=parseInt(t.charAt(e),10)*s[e];return a%=11,a>9&&(a%=10),o%=11,o>9&&(o%=10),a+""===t.substr(10,1)&&o+""===t.substr(11,1)}return!1},_rs:function(t){if(!/^RS[0-9]{9}$/.test(t))return!1;t=t.substr(2);for(var e=10,n=0,i=0;8>i;i++)n=(parseInt(t.charAt(i),10)+e)%10,0===n&&(n=10),e=2*n%11;return(e+parseInt(t.substr(8,1),10))%10===1},_se:function(e){return/^SE[0-9]{10}01$/.test(e)?(e=e.substr(2,10),t.fn.bootstrapValidator.helpers.luhn(e)):!1},_si:function(t){if(!/^SI[0-9]{8}$/.test(t))return!1;t=t.substr(2);for(var e=0,n=[8,7,6,5,4,3,2],i=0;7>i;i++)e+=parseInt(t.charAt(i),10)*n[i];return e=11-e%11,10===e&&(e=0),e+""===t.substr(7,1)},_sk:function(t){return/^SK[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(t)?parseInt(t.substr(2),10)%11===0:!1}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.vin=t.extend(t.fn.bootstrapValidator.i18n.vin||{},{"default":"Please enter a valid VIN number"}),t.fn.bootstrapValidator.validators.vin={validate:function(t,e){var n=e.val();if(""===n)return!0;if(!/^[a-hj-npr-z0-9]{8}[0-9xX][a-hj-npr-z0-9]{8}$/i.test(n))return!1;n=n.toUpperCase();for(var i={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0},a=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],r=0,o=n.length,s=0;o>s;s++)r+=i[n.charAt(s)+""]*a[s];var l=r%11;return 10===l&&(l="X"),l+""===n.charAt(8)}}}(window.jQuery),function(t){t.fn.bootstrapValidator.i18n.zipCode=t.extend(t.fn.bootstrapValidator.i18n.zipCode||{},{"default":"Please enter a valid zip code",countryNotSupported:"The country code %s is not supported",country:"Please enter a valid %s",countries:{CA:"Canadian postal code",DK:"Danish postal code",GB:"United Kingdom postal code",IT:"Italian postal code",NL:"Dutch postal code",SE:"Swiss postal code",SG:"Singapore postal code",US:"US zip code"}}),t.fn.bootstrapValidator.validators.zipCode={html5Attributes:{message:"message",country:"country"},COUNTRY_CODES:["CA","DK","GB","IT","NL","SE","SG","US"],validate:function(e,n,i){var a=n.val();if(""===a||!i.country)return!0;var r=i.country;if(("string"!=typeof r||-1===t.inArray(r,this.COUNTRY_CODES))&&(r=e.getDynamicOption(n,r)),!r||-1===t.inArray(r.toUpperCase(),this.COUNTRY_CODES))return{valid:!1,message:t.fn.bootstrapValidator.helpers.format(t.fn.bootstrapValidator.i18n.zipCode.countryNotSupported,r)};var o=!1;switch(r=r.toUpperCase()){case"CA":o=/^(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}\s?[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}[0-9]{1}$/i.test(a);break;case"DK":o=/^(DK(-|\s)?)?\d{4}$/i.test(a);break;case"GB":o=this._gb(a);break;case"IT":o=/^(I-|IT-)?\d{5}$/i.test(a);break;case"NL":o=/^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(a);break;case"SE":o=/^(S-)?\d{3}\s?\d{2}$/i.test(a);break;case"SG":o=/^([0][1-9]|[1-6][0-9]|[7]([0-3]|[5-9])|[8][0-2])(\d{4})$/i.test(a);break;case"US":default:o=/^\d{4,5}([\-]?\d{4})?$/.test(a)}return{valid:o,message:t.fn.bootstrapValidator.helpers.format(i.message||t.fn.bootstrapValidator.i18n.zipCode.country,t.fn.bootstrapValidator.i18n.zipCode.countries[r])}},_gb:function(t){for(var e="[ABCDEFGHIJKLMNOPRSTUWYZ]",n="[ABCDEFGHKLMNOPQRSTUVWXY]",i="[ABCDEFGHJKPMNRSTUVWXY]",a="[ABEHMNPRVWXY]",r="[ABDEFGHJLNPQRSTUWXYZ]",o=[new RegExp("^("+e+"{1}"+n+"?[0-9]{1,2})(\\s*)([0-9]{1}"+r+"{2})$","i"),new RegExp("^("+e+"{1}[0-9]{1}"+i+"{1})(\\s*)([0-9]{1}"+r+"{2})$","i"),new RegExp("^("+e+"{1}"+n+"{1}?[0-9]{1}"+a+"{1})(\\s*)([0-9]{1}"+r+"{2})$","i"),new RegExp("^(BF1)(\\s*)([0-6]{1}[ABDEFGHJLNPQRST]{1}[ABDEFGHJLNPQRSTUWZYZ]{1})$","i"),/^(GIR)(\s*)(0AA)$/i,/^(BFPO)(\s*)([0-9]{1,4})$/i,/^(BFPO)(\s*)(c\/o\s*[0-9]{1,3})$/i,/^([A-Z]{4})(\s*)(1ZZ)$/i,/^(AI-2640)$/i],s=0;s<o.length;s++)if(o[s].test(t))return!0;return!1}}}(window.jQuery),function(t){"use strict";var e={i18n:{ru:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeek:["Paz","Pts","Sal","ar","Per","Cum","Cts"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},th:{months:["","","","","","","","","","","",""],dayOfWeek:[".",".",".",".",".",".","."]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeek:["nd","pn","wt","r","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",step:60,closeOnDateSelect:0,closeOnWithoutClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!0,allowBlank:!1,yearStart:1950,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[],yearOffset:0};Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var n=e||0,i=this.length;i>n;n++)if(this[n]===t)return n;return-1}),t.fn.xdsoftScroller=function(e){return this.each(function(){var n=t(this);if(!t(this).hasClass("xdsoft_scroller_box")){var i=function(t){var e={x:0,y:0};if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=n.pageX,e.y=n.pageY}else("mousedown"==t.type||"mouseup"==t.type||"mousemove"==t.type||"mouseover"==t.type||"mouseout"==t.type||"mouseenter"==t.type||"mouseleave"==t.type)&&(e.x=t.pageX,e.y=t.pageY);return e},a=0,r=n.children().eq(0),o=n[0].clientHeight,s=r[0].offsetHeight,l=t('<div class="xdsoft_scrollbar"></div>'),d=t('<div class="xdsoft_scroller"></div>'),c=100,u=!1;l.append(d),n.addClass("xdsoft_scroller_box").append(l),d.on("mousedown.xdsoft_scroller",function(i){o||n.trigger("resize_scroll.xdsoft_scroller",[e]);var r=i.pageY,s=parseInt(d.css("margin-top")),u=l[0].offsetHeight;t(document.body).addClass("xdsoft_noselect"),t([document.body,window]).on("mouseup.xdsoft_scroller",function h(){t([document.body,window]).off("mouseup.xdsoft_scroller",h).off("mousemove.xdsoft_scroller",a).removeClass("xdsoft_noselect")}),t(document.body).on("mousemove.xdsoft_scroller",a=function(t){var e=t.pageY-r+s;0>e&&(e=0),e+d[0].offsetHeight>u&&(e=u-d[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[c?e/c:0])})}),n.on("scroll_element.xdsoft_scroller",function(t,e){o||n.trigger("resize_scroll.xdsoft_scroller",[e,!0]),e=e>1?1:0>e||isNaN(e)?0:e,d.css("margin-top",c*e),r.css("marginTop",-parseInt((s-o)*e))}).on("resize_scroll.xdsoft_scroller",function(t,e,i){o=n[0].clientHeight,s=r[0].offsetHeight;var a=o/s,u=a*l[0].offsetHeight;a>1?d.hide():(d.show(),d.css("height",parseInt(u>10?u:10)),c=l[0].offsetHeight-d[0].offsetHeight,i!==!0&&n.trigger("scroll_element.xdsoft_scroller",[e?e:Math.abs(parseInt(r.css("marginTop")))/(s-o)]))}),n.mousewheel&&n.mousewheel(function(t,e){var i=Math.abs(parseInt(r.css("marginTop")));return n.trigger("scroll_element.xdsoft_scroller",[(i-20*e)/(s-o)]),t.stopPropagation(),!1}),n.on("touchstart",function(t){u=i(t)}),n.on("touchmove",function(t){if(u){var e=i(t),a=Math.abs(parseInt(r.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(a-(e.y-u.y))/(s-o)]),t.stopPropagation(),t.preventDefault()}}),n.on("touchend touchcancel",function(){u=!1})}n.trigger("resize_scroll.xdsoft_scroller",[e])})},t.fn.datetimepicker=function(n){var i=48,a=57,r=96,o=105,s=17,l=46,d=13,c=27,u=8,h=37,p=38,f=39,g=40,m=9,v=116,b=65,y=67,w=86,C=90,x=89,_=!1,T=t.isPlainObject(n)||!n?t.extend(!0,{},e,n):t.extend({},e),S=function(e){var n=t("<div "+(T.id?'id="'+T.id+'"':"")+" "+(T.style?'style="'+T.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+T.className+'"></div>'),S=t('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),E=t('<div class="xdsoft_datepicker active"></div>'),A=t('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),k=t('<div class="xdsoft_calendar"></div>'),N=t('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),R=N.find(".xdsoft_time_box").eq(0),D=t('<div class="xdsoft_time_variant"></div>'),I=t('<div class="xdsoft_scrollbar"></div>'),O=(t('<div class="xdsoft_scroller"></div>'),t('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>')),P=t('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');A.find(".xdsoft_month span").after(O),A.find(".xdsoft_year span").after(P),A.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(e){A.find(".xdsoft_select").hide();var n=t(this).find(".xdsoft_select").eq(0),i=0,a=0;L.currentTime&&(i=L.currentTime[t(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n.show();for(var r=n.find("div.xdsoft_option"),o=0;o<r.length&&r.eq(o).data("value")!=i;o++)a+=r[0].offsetHeight;return n.xdsoftScroller(a/(n.children()[0].offsetHeight-n[0].clientHeight)),e.stopPropagation(),!1}),A.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(t){t.stopPropagation(),t.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){L&&L.currentTime&&L.currentTime[t(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](t(this).data("value")),t(this).parent().parent().hide(),n.trigger("xchange.xdsoft"),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,L.currentTime,n.data("input"))}),n.setOptions=function(S){T=t.extend(!0,{},T,S),!T.open&&!T.opened||T.inline||e.trigger("open.xdsoft"),T.inline&&(n.addClass("xdsoft_inline"),e.after(n).hide(),n.trigger("afterOpen.xdsoft")),T.inverseButton&&(T.next="xdsoft_prev",T.prev="xdsoft_next"),T.datepicker?E.addClass("active"):E.removeClass("active"),T.timepicker?N.addClass("active"):N.removeClass("active"),T.value&&(e&&e.val&&e.val(T.value),L.setCurrentTime(T.value)),T.dayOfWeekStart=isNaN(T.dayOfWeekStart)||parseInt(T.dayOfWeekStart)<0||parseInt(T.dayOfWeekStart)>6?0:parseInt(T.dayOfWeekStart),T.timepickerScrollbar||I.hide();var k,R=[];if(T.minDate&&(R=/^-(.*)$/.exec(T.minDate))&&(R=Date.parseDate(R[1],T.formatDate))&&(k=R.getTime()+-1*R.getTimezoneOffset()*6e4,T.minDate=new Date(L.now().getTime()-k).dateFormat(T.formatDate)),T.maxDate&&(R=/^\+(.*)$/.exec(T.maxDate))&&(R=Date.parseDate(R[1],T.formatDate))&&(k=R.getTime()+-1*R.getTimezoneOffset()*6e4,T.maxDate=new Date(L.now().getTime()+k).dateFormat(T.formatDate)),A.find(".xdsoft_today_button").css("visibility",T.todayButton?"visible":"hidden"),T.mask){var D=function(t){try{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();return e.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange)return t.selectionStart}catch(n){return 0}},O=function(t,e){var t="string"==typeof t||t instanceof String?document.getElementById(t):t;if(!t)return!1;if(t.createTextRange){var n=t.createTextRange();return n.collapse(!0),n.moveEnd(e),n.moveStart(e),n.select(),!0}return t.setSelectionRange?(t.setSelectionRange(e,e),!0):!1},P=function(t,e){var n=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(e)};switch(e.off("keydown.xdsoft"),!0){case T.mask===!0:T.mask=T.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case"string"==t.type(T.mask):P(T.mask,e.val())||e.val(T.mask.replace(/[0-9]/g,"_")),e.on("keydown.xdsoft",function(n){var S=this.value,E=n.which;switch(!0){case E>=i&&a>=E||E>=r&&o>=E||E==u||E==l:var A=D(this),k=E!=u&&E!=l?String.fromCharCode(E>=r&&o>=E?E-i:E):"_";for(E!=u&&E!=l||!A||(A--,k="_");/[^0-9_]/.test(T.mask.substr(A,1))&&A<T.mask.length&&A>0;)A+=E==u||E==l?-1:1;if(S=S.substr(0,A)+k+S.substr(A+1),""==t.trim(S))S=T.mask.replace(/[0-9]/g,"_");else if(A==T.mask.length)break;for(A+=E==u||E==l?0:1;/[^0-9_]/.test(T.mask.substr(A,1))&&A<T.mask.length&&A>0;)A+=E==u||E==l?-1:1;P(T.mask,S)?(this.value=S,O(this,A)):""==t.trim(S)?this.value=T.mask.replace(/[0-9]/g,"_"):e.trigger("error_input.xdsoft");break;case!!~[b,y,w,C,x].indexOf(E)&&_:case!!~[c,p,g,h,f,v,s,m,d].indexOf(E):return!0}return n.preventDefault(),!1})}}T.validateOnBlur&&e.off("blur.xdsoft").on("blur.xdsoft",function(){T.allowBlank&&!t.trim(t(this).val()).length?(t(this).val(null),n.data("xdsoft_datetime").empty()):Date.parseDate(t(this).val(),T.format)?n.data("xdsoft_datetime").setCurrentTime(t(this).val()):(t(this).val(L.now().dateFormat(T.format)),n.data("xdsoft_datetime").setCurrentTime(t(this).val())),n.trigger("changedatetime.xdsoft")}),T.dayOfWeekStartPrev=0==T.dayOfWeekStart?6:T.dayOfWeekStart-1,n.trigger("xchange.xdsoft")},n.data("options",T).on("mousedown.xdsoft",function(t){return t.stopPropagation(),t.preventDefault(),P.hide(),O.hide(),!1});var M=N.find(".xdsoft_time_box");M.append(D),M.xdsoftScroller(),n.on("afterOpen.xdsoft",function(){M.xdsoftScroller()}),n.append(E).append(N),T.withoutCopyright!==!0&&n.append(S),E.append(A).append(k),t("body").append(n);var L=new function(){var t=this;t.now=function(){var t=new Date;return T.yearOffset&&t.setFullYear(t.getFullYear()+T.yearOffset),t},t.currentTime=this.now(),t.isValidDate=function(t){return"[object Date]"!==Object.prototype.toString.call(t)?!1:!isNaN(t.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strtodatetime(e):t.isValidDate(e)?e:t.now(),n.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(){return t.currentTime},t.nextMonth=function(){var e=t.currentTime.getMonth()+1;return 12==e&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),e=0),t.currentTime.setDate(Math.min(Date.daysInMonth[e],t.currentTime.getDate())),t.currentTime.setMonth(e),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,L.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),e},t.prevMonth=function(){var e=t.currentTime.getMonth()-1;return-1==e&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),e=11),t.currentTime.setDate(Math.min(Date.daysInMonth[e],t.currentTime.getDate())),t.currentTime.setMonth(e),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,L.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),e},t.strtodatetime=function(e){var n=e?Date.parseDate(e,T.format):t.now();return t.isValidDate(n)||(n=t.now()),n},t.strtodate=function(e){var n=e?Date.parseDate(e,T.formatDate):t.now();return t.isValidDate(n)||(n=t.now()),n},t.strtotime=function(e){var n=e?Date.parseDate(e,T.formatTime):t.now();return t.isValidDate(n)||(n=t.now()),n},t.str=function(){return t.currentTime.dateFormat(T.format)}};A.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){n.data("changed",!0),L.setCurrentTime(0),n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){e.val(L.str()),n.trigger("close.xdsoft")}),A.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),n=0,i=!1;!function a(t){L.currentTime.getMonth();e.hasClass(T.next)?L.nextMonth():e.hasClass(T.prev)&&L.prevMonth(),!i&&(n=setTimeout(a,t?t:100))}(500),t([document.body,window]).on("mouseup.xdsoft",function r(){clearTimeout(n),i=!0,t([document.body,window]).off("mouseup.xdsoft",r)})}),N.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),n=0,i=!1,a=110;!function r(t){var o=R[0].clientHeight,s=D[0].offsetHeight,l=Math.abs(parseInt(D.css("marginTop")));e.hasClass(T.next)&&s-o-T.timeHeightInTimePicker>=l?D.css("marginTop","-"+(l+T.timeHeightInTimePicker)+"px"):e.hasClass(T.prev)&&l-T.timeHeightInTimePicker>=0&&D.css("marginTop","-"+(l-T.timeHeightInTimePicker)+"px"),R.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(D.css("marginTop"))/(s-o))]),a=a>10?10:a-10,!i&&(n=setTimeout(r,t?t:a))}(500),t([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),i=!0,t([document.body,window]).off("mouseup.xdsoft",o)})}),n.on("xchange.xdsoft",function(e){for(var i="",a=new Date(L.currentTime.getFullYear(),L.currentTime.getMonth(),1,12,0,0),r=0,o=L.now();a.getDay()!=T.dayOfWeekStart;)a.setDate(a.getDate()-1);i+="<table><thead><tr>";for(var s=0;7>s;s++)i+="<th>"+T.i18n[T.lang].dayOfWeek[s+T.dayOfWeekStart>6?0:s+T.dayOfWeekStart]+"</th>";i+="</tr></thead>",i+="<tbody><tr>";
var l=!1,d=!1;T.maxDate!==!1&&(l=L.strtodate(T.maxDate),l=new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59,59,999)),T.minDate!==!1&&(d=L.strtodate(T.minDate),d=new Date(d.getFullYear(),d.getMonth(),d.getDate()));for(var c,u,h,p=[];r<L.currentTime.getDaysInMonth()||a.getDay()!=T.dayOfWeekStart||L.currentTime.getMonth()==a.getMonth();)p=[],r++,c=a.getDate(),u=a.getFullYear(),h=a.getMonth(),p.push("xdsoft_date"),(l!==!1&&a>l||d!==!1&&d>a)&&p.push("xdsoft_disabled"),L.currentTime.getMonth()!=h&&p.push("xdsoft_other_month"),(T.defaultSelect||n.data("changed"))&&L.currentTime.dateFormat("d.m.Y")==a.dateFormat("d.m.Y")&&p.push("xdsoft_current"),o.dateFormat("d.m.Y")==a.dateFormat("d.m.Y")&&p.push("xdsoft_today"),(0==a.getDay()||6==a.getDay()||~T.weekends.indexOf(a.dateFormat("d.m.Y")))&&p.push("xdsoft_weekend"),i+='<td data-date="'+c+'" data-month="'+h+'" data-year="'+u+'" class="xdsoft_date xdsoft_day_of_week'+a.getDay()+" "+p.join(" ")+'"><div>'+c+"</div></td>",a.getDay()==T.dayOfWeekStartPrev&&(i+="</tr>"),a.setDate(c+1);i+="</tbody></table>",k.html(i),A.find(".xdsoft_label span").eq(0).text(T.i18n[T.lang].months[L.currentTime.getMonth()]),A.find(".xdsoft_label span").eq(1).text(L.currentTime.getFullYear());var f="",g="",h="",m=function(t,e){var i=L.now();i.setHours(t),t=parseInt(i.getHours()),i.setMinutes(e),e=parseInt(i.getMinutes()),p=[],(T.maxTime!==!1&&L.strtotime(T.maxTime).getTime()<i.getTime()||T.minTime!==!1&&L.strtotime(T.minTime).getTime()>i.getTime())&&p.push("xdsoft_disabled"),(T.initTime||T.defaultSelect||n.data("changed"))&&parseInt(L.currentTime.getHours())==parseInt(t)&&(T.step>59||Math[T.roundTime](L.currentTime.getMinutes()/T.step)*T.step==parseInt(e))&&(T.defaultSelect||n.data("changed")?p.push("xdsoft_current"):T.initTime&&p.push("xdsoft_init_time")),parseInt(o.getHours())==parseInt(t)&&parseInt(o.getMinutes())==parseInt(e)&&p.push("xdsoft_today"),f+='<div class="xdsoft_time '+p.join(" ")+'" data-hour="'+t+'" data-minute="'+e+'">'+i.dateFormat(T.formatTime)+"</div>"};if(T.allowTimes&&t.isArray(T.allowTimes)&&T.allowTimes.length)for(var r=0;r<T.allowTimes.length;r++)g=L.strtotime(T.allowTimes[r]).getHours(),h=L.strtotime(T.allowTimes[r]).getMinutes(),m(g,h);else for(var r=0,s=0;r<(T.hours12?12:24);r++)for(s=0;60>s;s+=T.step)g=(10>r?"0":"")+r,h=(10>s?"0":"")+s,m(g,h);D.html(f);var v="",r=0;for(r=parseInt(T.yearStart,10)+T.yearOffset;r<=parseInt(T.yearEnd,10)+T.yearOffset;r++)v+='<div class="xdsoft_option '+(L.currentTime.getFullYear()==r?"xdsoft_current":"")+'" data-value="'+r+'">'+r+"</div>";for(P.children().eq(0).html(v),r=0,v="";11>=r;r++)v+='<div class="xdsoft_option '+(L.currentTime.getMonth()==r?"xdsoft_current":"")+'" data-value="'+r+'">'+T.i18n[T.lang].months[r]+"</div>";O.children().eq(0).html(v),t(this).trigger("generate.xdsoft"),e.stopPropagation()}).on("afterOpen.xdsoft",function(){if(T.timepicker){var t;if(D.find(".xdsoft_current").length?t=".xdsoft_current":D.find(".xdsoft_init_time").length&&(t=".xdsoft_init_time"),t){var e=R[0].clientHeight,n=D[0].offsetHeight,i=D.find(t).index()*T.timeHeightInTimePicker+1;i>n-e&&(i=n-e),D.css("marginTop","-"+parseInt(i)+"px"),R.trigger("scroll_element.xdsoft_scroller",[parseInt(i)/(n-e)])}}});var $=0;k.on("click.xdsoft","td",function(){$++;var i=t(this),a=L.currentTime;return i.hasClass("xdsoft_disabled")?!1:(a.setFullYear(i.data("year")),a.setMonth(i.data("month")),a.setDate(i.data("date")),n.trigger("select.xdsoft",[a]),e.val(L.str()),($>1||T.closeOnDateSelect===!0||0===T.closeOnDateSelect&&!T.timepicker)&&!T.inline&&n.trigger("close.xdsoft"),T.onSelectDate&&T.onSelectDate.call&&T.onSelectDate.call(n,L.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft"),void setTimeout(function(){$=0},200))}),D.on("click.xdsoft","div",function(){var e=t(this),i=L.currentTime;return e.hasClass("xdsoft_disabled")?!1:(i.setHours(e.data("hour")),i.setMinutes(e.data("minute")),n.trigger("select.xdsoft",[i]),n.data("input").val(L.str()),!T.inline&&n.trigger("close.xdsoft"),T.onSelectTime&&T.onSelectTime.call&&T.onSelectTime.call(n,L.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),void n.trigger("changedatetime.xdsoft"))}),n.mousewheel&&E.mousewheel(function(t,e){return T.scrollMonth?(0>e?L.nextMonth():L.prevMonth(),!1):!0}),n.mousewheel&&R.unmousewheel().mousewheel(function(t,e){if(!T.scrollTime)return!0;var n=R[0].clientHeight,i=D[0].offsetHeight,a=Math.abs(parseInt(D.css("marginTop"))),r=!0;return 0>e&&i-n-T.timeHeightInTimePicker>=a?(D.css("marginTop","-"+(a+T.timeHeightInTimePicker)+"px"),r=!1):e>0&&a-T.timeHeightInTimePicker>=0&&(D.css("marginTop","-"+(a-T.timeHeightInTimePicker)+"px"),r=!1),R.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(D.css("marginTop"))/(i-n))]),t.stopPropagation(),r}),n.on("changedatetime.xdsoft",function(){if(T.onChangeDateTime&&T.onChangeDateTime.call){var t=n.data("input");T.onChangeDateTime.call(n,L.currentTime,t),t.trigger("change")}}).on("generate.xdsoft",function(){T.onGenerate&&T.onGenerate.call&&T.onGenerate.call(n,L.currentTime,n.data("input"))});var B=0;e.mousewheel&&e.mousewheel(function(t,i,a,r){return T.scrollInput?!T.datepicker&&T.timepicker?(B=D.find(".xdsoft_current").length?D.find(".xdsoft_current").eq(0).index():0,B+i>=0&&B+i<D.children().length&&(B+=i),D.children().eq(B).length&&D.children().eq(B).trigger("mousedown"),!1):T.datepicker&&!T.timepicker?(E.trigger(t,[i,a,r]),e.val&&e.val(L.str()),n.trigger("changedatetime.xdsoft"),!1):void 0:!0});var F=function(){var e=n.data("input").offset(),i=e.top+n.data("input")[0].offsetHeight-1,a=e.left;i+n[0].offsetHeight>t(window).height()+t(window).scrollTop()&&(i=e.top-n[0].offsetHeight+1),0>i&&(i=0),a+n[0].offsetWidth>t(window).width()&&(a=e.left-n[0].offsetWidth+n.data("input")[0].offsetWidth),n.css({left:a,top:i})};n.on("open.xdsoft",function(){var e=!0;T.onShow&&T.onShow.call&&(e=T.onShow.call(n,L.currentTime,n.data("input"))),e!==!1&&(n.show(),n.trigger("afterOpen.xdsoft"),F(),t(window).off("resize.xdsoft",F).on("resize.xdsoft",F),T.closeOnWithoutClick&&t([document.body,window]).on("mousedown.xdsoft",function i(){n.trigger("close.xdsoft"),t([document.body,window]).off("mousedown.xdsoft",i)}))}).on("close.xdsoft",function(t){var e=!0;T.onClose&&T.onClose.call&&(e=T.onClose.call(n,L.currentTime,n.data("input"))),e===!1||T.opened||T.inline||n.hide(),t.stopPropagation()}).data("input",e);var H=0;n.data("xdsoft_datetime",L),n.setOptions(T);var V=T.value?T.value:e&&e.val&&e.val()?e.val():"";V&&L.isValidDate(V=Date.parseDate(V,T.format))?n.data("changed",!0):V="",L.setCurrentTime(V?V:0),n.trigger("afterOpen.xdsoft"),e.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||(clearTimeout(H),H=setTimeout(function(){e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||(L.setCurrentTime(e&&e.val&&e.val()?e.val():0),n.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){var i=(this.value,e.which);switch(!0){case!!~[d].indexOf(i):var a=t("input:visible,textarea:visible");return n.trigger("close.xdsoft"),a.eq(a.index(this)+1).focus(),!1;case!!~[m].indexOf(i):return n.trigger("close.xdsoft"),!0}})},E=function(e){var n=e.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),e.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),t(window).off("resize.xdsoft"),t([window,document.body]).off("mousedown.xdsoft"),e.unmousewheel&&e.unmousewheel())};return t(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){t.keyCode==s&&(_=!0)}).on("keyup.xdsoftctrl",function(t){t.keyCode==s&&(_=!1)}),this.each(function(){var e;if(e=t(this).data("xdsoft_datetimepicker")){if("string"===t.type(n))switch(n){case"show":t(this).select().focus(),e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"destroy":E(t(this));break;case"reset":this.value=this.defaultValue,this.value&&e.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,T.format))||e.data("changed",!1),e.data("xdsoft_datetime").setCurrentTime(this.value)}else e.setOptions(n);return 0}"string"!==t.type(n)&&S(t(this))})}}(jQuery),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(t){null==Date.formatFunctions[t]&&Date.createNewFormat(t);var e=Date.formatFunctions[t];return this[e]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(t){switch(t){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(t)+"' + "}},Date.parseDate=function(t,e){null==Date.parseFunctions[e]&&Date.createParser(e);var n=Date.parseFunctions[e];return Date[n](t)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(t,e){switch(t){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+e+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+e+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+e+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+e+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+e+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(t)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var t=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var e=0;e<this.getMonth();++e)t+=Date.daysInMonth[e];return t+this.getDate()-1},Date.prototype.getWeekOfYear=function(){var t=this.getDayOfYear()+(4-this.getDay()),e=new Date(this.getFullYear(),0,1),n=7-e.getDay()+4;return document.write(n),String.leftPad((t-n)/7+1,2,"0")},Date.prototype.isLeapYear=function(){var t=this.getFullYear();return 0==(3&t)&&(t%100||t%400==0&&t)},Date.prototype.getFirstDayOfMonth=function(){var t=(this.getDay()-(this.getDate()-1))%7;return 0>t?t+7:t},Date.prototype.getLastDayOfMonth=function(){var t=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>t?t+7:t},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(t){return t.replace(/('|\\)/g,"\\$1")},String.leftPad=function(t,e,n){var i=new String(t);for(null==n&&(n=" ");i.length<e;)i=n+i;return i},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a,r=e||window.event,o=[].slice.call(arguments,1),s=0,l=0,d=0,c=0,u=0;return e=t.event.fix(r),e.type="mousewheel",r.wheelDelta&&(s=r.wheelDelta),r.detail&&(s=-1*r.detail),r.deltaY&&(d=-1*r.deltaY,s=d),r.deltaX&&(l=r.deltaX,s=-1*l),void 0!==r.wheelDeltaY&&(d=r.wheelDeltaY),void 0!==r.wheelDeltaX&&(l=-1*r.wheelDeltaX),c=Math.abs(s),(!n||n>c)&&(n=c),u=Math.max(Math.abs(d),Math.abs(l)),(!i||i>u)&&(i=u),a=s>0?"floor":"ceil",s=Math[a](s/n),l=Math[a](l/i),d=Math[a](d/i),o.unshift(e,s,l,d),(t.event.dispatch||t.event.handle).apply(this,o)}var n,i,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var o=a.length;o;)t.event.fixHooks[a[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})});var rwindow,rdocument;if("undefined"==typeof RELANG)var RELANG={};var RLANG={html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",unlink:"Unlink",formatting:"Formatting",paragraph:"Paragraph",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment"};!function(t){jQuery.fn.redactor=function(n){return this.each(function(){var i=t(this),a=i.data("redactor");a||i.data("redactor",a=new e(this,n))})};var e=function(e,n){this.$el=t(e),"undefined"!=typeof n&&"undefined"!=typeof n.lang&&"en"!==n.lang&&"undefined"!=typeof RELANG[n.lang]&&(RLANG=RELANG[n.lang]),this.opts=t.extend({iframe:!1,css:!1,lang:"en",direction:"ltr",callback:!1,keyupCallback:!1,keydownCallback:!1,execCommandCallback:!1,plugins:!1,cleanup:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,fixed:!1,fixedTop:0,fixedBox:!1,source:!0,shortcuts:!0,mobile:!0,air:!1,wym:!1,convertLinks:!0,convertDivs:!0,protocol:"http://",autosave:!1,autosaveCallback:!1,interval:60,imageGetJson:!1,imageUpload:!1,imageUploadCallback:!1,imageUploadErrorCallback:!1,fileUpload:!1,fileUploadCallback:!1,fileUploadErrorCallback:!1,uploadCrossDomain:!1,uploadFields:!1,observeImages:!0,overlay:!0,allowedTags:["form","input","button","select","option","datalist","output","textarea","fieldset","legend","section","header","hgroup","aside","footer","article","details","nav","progress","time","canvas","code","span","div","label","a","br","p","b","i","del","strike","u","img","video","source","track","audio","iframe","object","embed","param","blockquote","mark","cite","small","ul","ol","li","hr","dl","dt","dd","sup","sub","big","pre","code","figure","figcaption","strong","em","table","tr","td","th","tbody","thead","tfoot","h1","h2","h3","h4","h5","h6"],toolbarExternal:!1,buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","fontcolor","backcolor","|","alignment","|","horizontalrule"],airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","fontcolor","backcolor"],formattingTags:["p","blockquote","pre","h1","h2","h3","h4"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],emptyHtml:"<p><br /></p>",buffer:!1,visual:!0,modal_file:String()+'<div id="redactor_modal_content"><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>Name (optional)</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="file" /></div></form><br></div>',modal_image_edit:String()+'<div id="redactor_modal_content"><label>'+RLANG.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+RLANG.link+'</label><input id="redactor_file_link" class="redactor_input" /><label>'+RLANG.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+RLANG.none+'</option><option value="left">'+RLANG.left+'</option><option value="right">'+RLANG.right+'</option></select></div><div id="redactor_modal_footer"><a href="javascript:void(null);" id="redactor_image_delete_btn" class="redactor_modal_btn">'+RLANG._delete+'</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="save" class="redactor_modal_btn" id="redactorSaveBtn" value="'+RLANG.save+'" /></div>',modal_image:String()+'<div id="redactor_modal_content"><div id="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">'+RLANG.upload+'</a><a href="javascript:void(null);">'+RLANG.choose+'</a><a href="javascript:void(null);">'+RLANG.link+'</a></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="file" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+RLANG.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_upload_btn" value="'+RLANG.insert+'" /></div>',modal_link:String()+'<div id="redactor_modal_content"><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">URL</a><a href="javascript:void(null);">Email</a><a href="javascript:void(null);">'+RLANG.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+RLANG.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+RLANG.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_link_btn" value="'+RLANG.insert+'" /></div>',modal_table:String()+'<div id="redactor_modal_content"><label>'+RLANG.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+RLANG.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_insert_table_btn" value="'+RLANG.insert+'" /></div>',modal_video:String()+'<div id="redactor_modal_content"><form id="redactorInsertVideoForm"><label>'+RLANG.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_video_btn" value="'+RLANG.insert+'" /></div>',toolbar:{html:{title:RLANG.html,func:"toggle"},formatting:{title:RLANG.formatting,func:"show",dropdown:{p:{title:RLANG.paragraph,exec:"formatblock"},blockquote:{title:RLANG.quote,exec:"formatblock",className:"redactor_format_blockquote"},pre:{title:RLANG.code,exec:"formatblock",className:"redactor_format_pre"},h1:{title:RLANG.header1,exec:"formatblock",className:"redactor_format_h1"},h2:{title:RLANG.header2,exec:"formatblock",className:"redactor_format_h2"},h3:{title:RLANG.header3,exec:"formatblock",className:"redactor_format_h3"},h4:{title:RLANG.header4,exec:"formatblock",className:"redactor_format_h4"}}},bold:{title:RLANG.bold,exec:"bold"},italic:{title:RLANG.italic,exec:"italic"},deleted:{title:RLANG.deleted,exec:"strikethrough"},underline:{title:RLANG.underline,exec:"underline"},unorderedlist:{title:"&bull; "+RLANG.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+RLANG.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+RLANG.outdent,exec:"outdent"},indent:{title:"> "+RLANG.indent,exec:"indent"},image:{title:RLANG.image,func:"showImage"},video:{title:RLANG.video,func:"showVideo"},file:{title:RLANG.file,func:"showFile"},table:{title:RLANG.table,func:"show",dropdown:{insert_table:{title:RLANG.insert_table,func:"showTable"},separator_drop1:{name:"separator"},insert_row_above:{title:RLANG.insert_row_above,func:"insertRowAbove"},insert_row_below:{title:RLANG.insert_row_below,func:"insertRowBelow"},insert_column_left:{title:RLANG.insert_column_left,func:"insertColumnLeft"},insert_column_right:{title:RLANG.insert_column_right,func:"insertColumnRight"},separator_drop2:{name:"separator"},add_head:{title:RLANG.add_head,func:"addHead"},delete_head:{title:RLANG.delete_head,func:"deleteHead"},separator_drop3:{name:"separator"},delete_column:{title:RLANG.delete_column,func:"deleteColumn"},delete_row:{title:RLANG.delete_row,func:"deleteRow"},delete_table:{title:RLANG.delete_table,func:"deleteTable"}}},link:{title:RLANG.link,func:"show",dropdown:{link:{title:RLANG.link_insert,func:"showLink"},unlink:{title:RLANG.unlink,exec:"unlink"}}},fontcolor:{title:RLANG.fontcolor,func:"show"},backcolor:{title:RLANG.backcolor,func:"show"},alignment:{title:RLANG.alignment,func:"show",dropdown:{alignleft:{title:RLANG.align_left,exec:"JustifyLeft"},aligncenter:{title:RLANG.align_center,exec:"JustifyCenter"},alignright:{title:RLANG.align_right,exec:"JustifyRight"},justify:{title:RLANG.align_justify,exec:"JustifyFull"}}},alignleft:{exec:"JustifyLeft",title:RLANG.align_left},aligncenter:{exec:"JustifyCenter",title:RLANG.align_center},alignright:{exec:"JustifyRight",title:RLANG.align_right},justify:{exec:"JustifyFull",title:RLANG.align_justify},horizontalrule:{exec:"inserthorizontalrule",title:RLANG.horizontalrule}}},n,this.$el.data()),this.dropdowns=[],this.init()};e.prototype={init:function(){function e(){if(this.enableAir(),this.buildToolbar(),"object"==typeof this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(e,n){"undefined"!=typeof RedactorPlugins[n]&&(t.extend(this,RedactorPlugins[n]),"undefined"!=typeof RedactorPlugins[n].init&&this.init())},this)),this.opts.activeButtons!==!1&&this.opts.toolbar!==!1){var e=t.proxy(function(){this.observeFormatting()},this);this.$editor.click(e).keyup(e)}var n=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var i=this.browser("version").split(".");i[0]<536&&(n=!0)}if(this.isMobile(!0)===!1&&n===!1&&this.$editor.bind("paste",t.proxy(function(){if(this.opts.cleanup===!1)return!0;this.pasteRunning=!0,this.setBuffer(),this.saveScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop();var e=this.extractContent();setTimeout(t.proxy(function(){var t=this.extractContent();this.$editor.append(e),this.restoreSelection();var n=this.getFragmentHtml(t);this.pasteCleanUp(n),this.pasteRunning=!1},this),1)},this)),this.keyup(),this.keydown(),this.opts.autosave!==!1&&this.autoSave(),setTimeout(t.proxy(function(){this.observeImages(),this.observeTables()},this),1),this.browser("mozilla")){this.$editor.click(t.proxy(function(){this.saveSelection()},this));try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}}this.opts.focus&&setTimeout(t.proxy(function(){this.$editor.focus()},this),1),this.opts.fixed&&(this.observeScroll(),t(document).scroll(t.proxy(this.observeScroll,this))),"function"==typeof this.opts.callback&&this.opts.callback(this),this.opts.toolbar!==!1&&this.$toolbar.find("a").attr("tabindex","-1")}if(this.height=this.$el.css("height"),this.width=this.$el.css("width"),rdocument=this.document=document,rwindow=this.window=window,this.opts.mobile===!1&&this.isMobile())return this.build(!0),!1;if(this.opts.iframe&&(this.opts.autoresize=!1),this.opts.air)this.opts.buttons=this.opts.airButtons;else if(this.opts.toolbar!==!1){if(this.opts.source===!1){var n=this.opts.buttons.indexOf("html"),i=this.opts.buttons[n+1];this.opts.buttons.splice(n,1),"undefined"!=typeof i&&"|"===i&&this.opts.buttons.splice(n,1)}t.extend(this.opts.toolbar,this.opts.buttonsCustom),t.each(this.opts.buttonsAdd,t.proxy(function(t,e){this.opts.buttons.push(e)},this))}this.opts.toolbar!==!1&&t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e){"-1"==t.inArray(e,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[e]},this)),this.build(!1,e)},shortcuts:function(t,e){t.preventDefault(),this.execCommand(e,!1)},keyup:function(){this.$editor.keyup(t.proxy(function(t){var e=t.keyCode||t.which;return this.browser("mozilla")&&!this.pasteRunning&&this.saveSelection(),"function"==typeof this.opts.keyupCallback&&this.opts.keyupCallback(this,t),8===e||46===e?(this.observeImages(),this.formatEmpty(t)):(13!==e||t.shiftKey||t.ctrlKey||t.metaKey||(this.browser("webkit")&&this.formatNewLine(t),this.opts.convertLinks&&this.$editor.linkify()),void this.syncCode())
},this))},keydown:function(){this.$editor.keydown(t.proxy(function(e){var n=e.keyCode||e.which,i=this.getParentNode(),a=this.getCurrentNode(),r=!1,o=e.ctrlKey||e.metaKey;if(!i&&!a||"PRE"!==t(i).get(0).tagName&&"PRE"!==t(a).get(0).tagName||(r=!0),"function"==typeof this.opts.keydownCallback&&this.opts.keydownCallback(this,e),o&&this.opts.shortcuts&&(90===n?this.opts.buffer!==!1?(e.preventDefault(),this.getBuffer()):e.shiftKey?this.shortcuts(e,"redo"):this.shortcuts(e,"undo"):77===n?this.shortcuts(e,"removeFormat"):66===n?this.shortcuts(e,"bold"):73===n?this.shortcuts(e,"italic"):74===n?this.shortcuts(e,"insertunorderedlist"):75===n?this.shortcuts(e,"insertorderedlist"):76===n?this.shortcuts(e,"superscript"):72===n&&this.shortcuts(e,"subscript")),o||90===n||(this.opts.buffer=!1),r===!0&&13===n){e.preventDefault();var s=t(a).parent().text();return this.insertNodeAtCaret(this.document.createTextNode("\r\n")),-1==s.search(/\s$/)&&this.insertNodeAtCaret(this.document.createTextNode("\r\n")),this.syncCode(),!1}if(this.opts.shortcuts&&!e.shiftKey&&9===n){if(r!==!1)return e.preventDefault(),this.insertNodeAtCaret(this.document.createTextNode("	")),this.syncCode(),!1;this.shortcuts(e,"indent")}else this.opts.shortcuts&&e.shiftKey&&9===n&&this.shortcuts(e,"outdent");return this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")?this.safariShiftKeyEnter(e,n):void 0},this))},build:function(e,n){function i(){this.$editor=this.$content.contents().find("body").attr("contenteditable",!0).attr("dir",this.opts.direction),rdocument=this.document=this.$editor[0].ownerDocument,rwindow=this.window=this.document.defaultView||window,this.opts.css!==!1&&this.$content.contents().find("head").append('<link rel="stylesheet" href="'+this.opts.css+'" />'),this.$editor.html(o),n&&(n.call(this),n=null)}if(e!==!0){if(this.$box=t('<div class="redactor_box"></div>'),this.opts.air&&(this.air=t('<div class="redactor_air" style="display: none;"></div>')),this.$content=null,this.textareamode=!0,"TEXTAREA"===this.$el.get(0).tagName){if(this.opts.iframe){var a=this;this.$content=t('<iframe style="width: 100%;" frameborder="0"></iframe>').load(function(){i.call(a)})}else this.$content=this.$editor=t("<div></div>");var r=this.$el.get(0).className.split(/\s+/);t.each(r,t.proxy(function(t,e){this.$content.addClass("redactor_"+e)},this))}else this.textareamode=!1,this.$content=this.$editor=this.$el,this.$el=t('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height);this.$editor&&this.$editor.addClass("redactor_editor").attr("contenteditable",!0).attr("dir",this.opts.direction),this.opts.tabindex!==!1&&this.$content.attr("tabindex",this.opts.tabindex),this.opts.minHeight!==!1&&this.$content.css("min-height",this.opts.minHeight+"px"),this.opts.wym===!0&&this.$content.addClass("redactor_editor_wym"),this.opts.autoresize===!1&&this.$content.css("height",this.height),this.$el.hide();var o="";this.textareamode?(o=this.$el.val(),o=this.savePreCode(o),this.$box.insertAfter(this.$el).append(this.$content).append(this.$el)):(o=this.$editor.html(),o=this.savePreCode(o),this.$box.insertAfter(this.$content).append(this.$el).append(this.$editor)),o=this.paragraphy(o),this.$editor&&this.$editor.html(o),this.textareamode===!1&&this.syncCode()}else if("TEXTAREA"!==this.$el.get(0).tagName){var o=this.$el.val(),s=t('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height).val(o);this.$el.hide(),this.$el.after(s)}n&&this.$editor&&n.call(this)},enableAir:function(){return this.opts.air===!1?!1:(this.air.hide(),this.$editor.bind("textselect",t.proxy(function(t){this.showAir(t)},this)),void this.$editor.bind("textunselect",t.proxy(function(){this.air.hide()},this)))},showAir:function(e){t(".redactor_air").hide();var n=this.air.innerWidth(),i=e.clientX;t(this.document).width()<i+n&&(i-=n);var a=e.clientY+t(document).scrollTop()+14;this.opts.iframe===!0&&(a+=this.$box.position().top,i+=this.$box.position().left),this.air.css({left:i+"px",top:a+"px"}).show()},syncCode:function(){this.$el.val(this.$editor.html())},setCode:function(t){t=this.stripTags(t),this.$editor.html(t).focus(),this.syncCode()},getCode:function(){var t="";return t=this.opts.visual?this.$editor.html():this.$el.val(),this.stripTags(t)},insertHtml:function(t){this.$editor.focus(),this.pasteHtmlAtCaret(t),this.observeImages(),this.syncCode()},pasteHtmlAtCaret:function(t){var e,n;if(this.document.getSelection){if(e=this.window.getSelection(),e.getRangeAt&&e.rangeCount){n=e.getRangeAt(0),n.deleteContents();var i=this.document.createElement("div");i.innerHTML=t;for(var a,r,o=this.document.createDocumentFragment();a=i.firstChild;)r=o.appendChild(a);n.insertNode(o),r&&(n=n.cloneRange(),n.setStartAfter(r),n.collapse(!0),e.removeAllRanges(),e.addRange(n))}}else this.document.selection&&"Control"!=this.document.selection.type&&this.document.selection.createRange().pasteHTML(t)},destroy:function(){var e=this.getCode();this.textareamode?(this.$box.after(this.$el),this.$box.remove(),this.$el.height(this.height).val(e).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$editor.removeClass("redactor_editor").removeClass("redactor_editor_wym").attr("contenteditable",!1).html(e).show()),this.opts.toolbarExternal&&t(this.opts.toolbarExternal).empty(),t(".redactor_air").remove();for(var n=0;n<this.dropdowns.length;n++)this.dropdowns[n].remove(),delete this.dropdowns[n];this.opts.autosave!==!1&&clearInterval(this.autosaveInterval)},observeFormatting:function(){var e=this.getCurrentNode();this.inactiveAllButtons(),t.each(this.opts.activeButtonsStates,t.proxy(function(n,i){0!=t(e).closest(n,this.$editor.get()[0]).length&&this.setBtnActive(i)},this));var n=t(e).closest(["p","div","h1","h2","h3","h4","h5","h6","blockquote","td"]);if("undefined"!=typeof n[0]&&"undefined"!=typeof n[0].elem&&0!=t(n[0].elem).size()){var i=t(n[0].elem).css("text-align");switch(i){case"right":this.setBtnActive("alignright");break;case"center":this.setBtnActive("aligncenter");break;case"justify":this.setBtnActive("justify");break;default:this.setBtnActive("alignleft")}}},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(t.proxy(function(e,n){this.browser("msie")&&t(n).attr("unselectable","on"),this.resizeImage(n)},this))},observeTables:function(){this.$editor.find("table").click(t.proxy(this.tableObserver,this))},observeScroll:function(){var e=t(this.document).scrollTop(),n=this.$box.offset().top,i=0;if(e>n){var a="100%";this.opts.fixedBox&&(i=this.$box.offset().left,a=this.$box.innerWidth()),this.fixed=!0,this.$toolbar.css({position:"fixed",width:a,zIndex:1005,top:this.opts.fixedTop+"px",left:i})}else this.fixed=!1,this.$toolbar.css({position:"relative",width:"auto",zIndex:1,top:0,left:i})},setBuffer:function(){this.saveSelection(),this.opts.buffer=this.$editor.html()},getBuffer:function(){return this.opts.buffer===!1?!1:(this.$editor.html(this.opts.buffer),this.browser("msie")||this.restoreSelection(),void(this.opts.buffer=!1))},execCommand:function(e,n){if(0==this.opts.visual)return this.$el.focus(),!1;try{var i;if("inserthtml"===e)this.browser("msie")?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(n)):this.pasteHtmlAtCaret(n),this.observeImages();else if("unlink"===e)i=this.getParentNode(),"A"===t(i).get(0).tagName?t(i).replaceWith(t(i).text()):this.execRun(e,n);else if("JustifyLeft"===e||"JustifyCenter"===e||"JustifyRight"===e||"JustifyFull"===e){i=this.getCurrentNode();var a=t(i).get(0).tagName;if(this.opts.iframe===!1&&0==t(i).parents(".redactor_editor").size())return!1;var r=["P","DIV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","TD"];if(-1!=t.inArray(a,r)){var o=!1;"JustifyCenter"===e?o="center":"JustifyRight"===e?o="right":"JustifyFull"===e&&(o="justify"),o===!1?t(i).css("text-align",""):t(i).css("text-align",o)}else this.execRun(e,n)}else if("formatblock"===e&&"blockquote"===n)if(i=this.getCurrentNode(),"BLOCKQUOTE"===t(i).get(0).tagName)if(this.browser("msie")){var s=t("<p>"+t(i).html()+"</p>");t(i).replaceWith(s)}else this.execRun(e,"p");else if("P"===t(i).get(0).tagName){var l=t(i).parent();if("BLOCKQUOTE"===t(l).get(0).tagName){var s=t("<p>"+t(i).html()+"</p>");t(l).replaceWith(s),this.setSelection(s[0],0,s[0],0)}else if(this.browser("msie")){var s=t("<blockquote>"+t(i).html()+"</blockquote>");t(i).replaceWith(s)}else this.execRun(e,n)}else this.execRun(e,n);else"formatblock"!==e||"pre"!==n&&"p"!==n?("inserthorizontalrule"===e&&this.browser("msie")&&this.$editor.focus(),"formatblock"===e&&this.browser("mozilla")&&this.$editor.focus(),this.execRun(e,n)):(i=this.getParentNode(),"PRE"===t(i).get(0).tagName?t(i).replaceWith("<p>"+this.encodeEntities(t(i).text())+"</p>"):this.execRun(e,n));"inserthorizontalrule"===e&&this.$editor.find("hr").removeAttr("id"),this.syncCode(),this.oldIE()&&this.$editor.focus(),"function"==typeof this.opts.execCommandCallback&&this.opts.execCommandCallback(this,e),this.opts.air&&this.air.hide()}catch(d){}},execRun:function(t,e){"formatblock"===t&&this.browser("msie")&&(e="<"+e+">"),this.document.execCommand(t,!1,e)},formatNewLine:function(){var e=this.getParentNode();if("DIV"===e.nodeName&&"redactor_editor"===e.className){var n=t(this.getCurrentNode());if("DIV"===n.get(0).tagName&&(""===n.html()||"<br>"===n.html())){var i=t("<p>").append(n.clone().get(0).childNodes);n.replaceWith(i),i.html("<br />"),this.setSelection(i[0],0,i[0],0)}}},safariShiftKeyEnter:function(e,n){return e.shiftKey&&13===n?(e.preventDefault(),this.insertNodeAtCaret(t("<span><br /></span>").get(0)),this.syncCode(),!1):!0},formatEmpty:function(e){var n=t.trim(this.$editor.html());this.browser("mozilla")&&(n=n.replace(/<br>/i,""));var i=n.replace(/<(?:.|\n)*?>/gm,"");if(""===n||""===i){e.preventDefault();var a=t(this.opts.emptyHtml).get(0);return this.$editor.html(a),this.setSelection(a,0,a,0),this.syncCode(),!1}this.syncCode()},paragraphy:function(e){if(e=t.trim(e),""===e||"<p></p>"===e)return this.opts.emptyHtml;this.opts.convertDivs&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"));var n=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},i=function(t,i){return n(e,t,i)},a="(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])";return e+="\n",i("<br />\\s*<br />","\n\n"),i("(<"+a+"[^>]*>)","\n$1"),i("(</"+a+">)","$1\n\n"),i("\r\n|\r","\n"),i("\n\n+","\n\n"),i("\n?((.|\n)+?)$","<p>$1</p>\n"),i("<p>\\s*?</p>",""),i("<p>(<div[^>]*>\\s*)","$1<p>"),i("<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)","<p>$1</p>$2"),i("<p>\\s*(</?"+a+"[^>]*>)\\s*</p>","$1"),i("<p>(<li.+?)</p>","$1"),i("<p>\\s*(</?"+a+"[^>]*>)","$1"),i("(</?"+a+"[^>]*>)\\s*</p>","$1"),i("(</?"+a+"[^>]*>)\\s*<br />","$1"),i("<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","$1"),-1!=e.indexOf("<pre")&&i("(<pre(.|\n)*?>)((.|\n)*?)</pre>",function(t,e,i,a){return n(e,"\\\\(['\"\\\\])","$1")+n(n(n(a,"<p>","\n"),"</p>|<br />",""),"\\\\(['\"\\\\])","$1")+"</pre>"}),i("\n</p>$","</p>")},stripTags:function(e){var n=this.opts.allowedTags,i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(i,function(e,i){return t.inArray(i.toLowerCase(),n)>"-1"?e:""})},savePreCode:function(e){var n=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==n&&t.each(n,t.proxy(function(t,n){var i=n.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);i[2]=this.encodeEntities(i[2]),e=e.replace(n,"<pre"+i[1]+">"+i[2]+"</pre>")},this)),e},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanupPre:function(t){t=t.replace(/<br>/gi,"\n"),t=t.replace(/<\/p>/gi,"\n"),t=t.replace(/<\/div>/gi,"\n");var e=this.document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText},pasteCleanUp:function(e){var n=this.getParentNode();return"PRE"===t(n).get(0).tagName?(e=this.cleanupPre(e),this.pasteCleanUpInsert(e),!0):(e=e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),e=e.replace(/(&nbsp;){2,}/gi,"&nbsp;"),e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=this.stripTags(e),e=e.replace(/<td><\/td>/gi,"[td]"),e=e.replace(/<td>&nbsp;<\/td>/gi,"[td]"),e=e.replace(/<td><br><\/td>/gi,"[td]"),e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),e=e.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),e=e.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),e=e.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),e=e.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),e=e.replace(/<param(.*?)>/gi,"[param$1]"),e=e.replace(/<img(.*?)style="(.*?)"(.*?)>/gi,"[img$1$3]"),e=e.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),e=e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/\[td\]/gi,"<td>&nbsp;</td>"),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),e=e.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),e=e.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),e=e.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),e=e.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),e=e.replace(/\[param(.*?)\]/gi,"<param$1>"),e=e.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>")),e=e.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),this.browser("mozilla")&&(e=e.replace(/<br>$/gi,"")),void this.pasteCleanUpInsert(e))},pasteCleanUpInsert:function(e){this.execCommand("inserthtml",e),this.opts.autoresize===!0?t(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},formattingRemove:function(e){var n=[],i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&t.each(i,function(t,i){e=e.replace(i,"prebuffer_"+t),n.push(i)}),e=e.replace(/\s{2,}/g," "),e=e.replace(/\n/g," "),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g,""),e=e.replace(/[\s\n]*$/g,""),e=e.replace(/>\s+</g,"><"),n&&(t.each(n,function(t,n){e=e.replace("prebuffer_"+t,n)}),n=[]),e},formattingIndenting:function(t){return t=t.replace(/<li/g,"	<li"),t=t.replace(/<tr/g,"	<tr"),t=t.replace(/<td/g,"		<td"),t=t.replace(/<\/tr>/g,"	</tr>")},formattingEmptyTags:function(t){for(var e=["<pre></pre>","<blockquote>\\s*</blockquote>","<em>\\s*</em>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<b>\\s*</b>","<b>&nbsp;</b>","<p>\\s*</p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"],n=0;n<e.length;++n){var i=e[n];t=t.replace(new RegExp(i,"gi"),"")}return t},formattingAddBefore:function(t){for(var e="\r\n",n=["<p","<form","</ul>","</ol>","<fieldset","<legend","<object","<embed","<select","<option","<input","<textarea","<pre","<blockquote","<ul","<ol","<li","<dl","<dt","<dd","<table","<thead","<tbody","<caption","</caption>","<th","<tr","<td","<figure"],i=0;i<n.length;++i){var a=n[i];t=t.replace(new RegExp(a,"gi"),e+a)}return t},formattingAddAfter:function(t){for(var e="\r\n",n=["</p>","</div>","</h1>","</h2>","</h3>","</h4>","</h5>","</h6>","<br>","<br />","</dl>","</dt>","</dd>","</form>","</blockquote>","</pre>","</legend>","</fieldset>","</object>","</embed>","</textarea>","</select>","</option>","</table>","</thead>","</tbody>","</tr>","</td>","</th>","</figure>"],i=0;i<n.length;++i){var a=n[i];t=t.replace(new RegExp(a,"gi"),a+e)}return t},formatting:function(t){return t=this.formattingRemove(t),t=this.formattingEmptyTags(t),t=this.formattingAddBefore(t),t=this.formattingAddAfter(t),t=this.formattingIndenting(t)},toggle:function(){var t;if(this.opts.visual){var e=this.$editor.innerHeight();this.$editor.hide(),this.$content.hide(),t=this.$editor.html(),this.$el.height(e).val(t).show().focus(),this.setBtnActive("html"),this.opts.visual=!1}else{this.$el.hide();var t=this.$el.val();this.$editor.html(t).show(),this.$content.show(),""===this.$editor.html()&&this.setCode(this.opts.emptyHtml),this.$editor.focus(),this.setBtnInactive("html"),this.opts.visual=!0,this.observeImages(),this.observeTables()}},autoSave:function(){this.autosaveInterval=setInterval(t.proxy(function(){t.ajax({url:this.opts.autosave,type:"post",data:this.$el.attr("name")+"="+escape(encodeURIComponent(this.getCode())),success:t.proxy(function(t){"function"==typeof this.opts.autosaveCallback&&this.opts.autosaveCallback(t,this)},this)})},this),1e3*this.opts.interval)},buildToolbar:function(){return this.opts.toolbar===!1?!1:(this.$toolbar=t("<ul>").addClass("redactor_toolbar"),this.opts.air?(t(this.air).append(this.$toolbar),t("body").append(this.air)):this.opts.toolbarExternal===!1?this.$box.prepend(this.$toolbar):t(this.opts.toolbarExternal).html(this.$toolbar),void t.each(this.opts.buttons,t.proxy(function(e,n){if("|"!==n&&"undefined"!=typeof this.opts.toolbar[n]){var i=this.opts.toolbar[n];if(this.opts.fileUpload===!1&&"file"===n)return!0;this.$toolbar.append(t("<li>").append(this.buildButton(n,i)))}"|"===n&&this.$toolbar.append(t('<li class="redactor_separator"></li>'))},this)))},buildButton:function(e,n){var i=t('<a href="javascript:void(null);" title="'+n.title+'" class="redactor_btn_'+e+'"></a>');if("undefined"==typeof n.func?i.click(t.proxy(function(){-1!=t.inArray(e,this.opts.activeButtons)&&(this.inactiveAllButtons(),this.setBtnActive(e)),this.browser("mozilla")&&this.$editor.focus(),this.execCommand(n.exec,e)},this)):"show"!==n.func&&i.click(t.proxy(function(t){this[n.func](t)},this)),"undefined"!=typeof n.callback&&n.callback!==!1&&i.click(t.proxy(function(t){n.callback(this,t,e)},this)),"backcolor"===e||"fontcolor"===e||"undefined"!=typeof n.dropdown){var a=t('<div class="redactor_dropdown" style="display: none;">');a="backcolor"===e||"fontcolor"===e?this.buildColorPicker(a,e):this.buildDropdown(a,n.dropdown),this.dropdowns.push(a.appendTo(t(document.body))),this.hdlShowDropDown=t.proxy(function(t){this.showDropDown(t,a,e)},this),i.click(this.hdlShowDropDown)}return i},buildDropdown:function(e,n){return t.each(n,t.proxy(function(n,i){"undefined"==typeof i.className&&(i.className="");var a;"undefined"!=typeof i.name&&"separator"===i.name?a=t('<a class="redactor_separator_drop">'):(a=t('<a href="javascript:void(null);" class="'+i.className+'">'+i.title+"</a>"),t(a).click("function"==typeof i.callback?t.proxy(function(t){i.callback(this,t,n)},this):"undefined"==typeof i.func?t.proxy(function(){this.execCommand(i.exec,n)},this):t.proxy(function(t){this[i.func](t)},this))),t(e).append(a)},this)),e},buildColorPicker:function(e,n){var i;i="backcolor"===n?this.browser("msie")?"BackColor":"hilitecolor":"forecolor",t(e).width(210);for(var a=this.opts.colors.length,r=0;a>r;++r){var o=this.opts.colors[r],s=t('<a rel="'+o+'" href="javascript:void(null);" class="redactor_color_link"></a>').css({backgroundColor:o});t(e).append(s);var l=this;t(s).click(function(){l.execCommand(i,t(this).attr("rel")),"forecolor"===i&&l.$editor.find("font").replaceWith(function(){return t('<span style="color: '+t(this).attr("color")+';">'+t(this).html()+"</span>")}),l.browser("msie")&&"BackColor"===i&&l.$editor.find("font").replaceWith(function(){return t('<span style="'+t(this).attr("style")+'">'+t(this).html()+"</span>")})})}var d=t('<a href="javascript:void(null);" class="redactor_color_none"></a>').html(RLANG.none);return d.click("backcolor"===n?t.proxy(this.setBackgroundNone,this):t.proxy(this.setColorNone,this)),t(e).append(d),e},setBackgroundNone:function(){t(this.getParentNode()).css("background-color","transparent"),this.syncCode()},setColorNone:function(){t(this.getParentNode()).attr("color","").css("color",""),this.syncCode()},showDropDown:function(e,n,i){if(this.getBtn(i).hasClass("dropact"))this.hideAllDropDown();else{this.hideAllDropDown(),this.setBtnActive(i),this.getBtn(i).addClass("dropact");var a=this.getBtn(i).offset().left;if(this.opts.air){var r=this.air.offset().top;t(n).css({position:"absolute",left:a+"px",top:r+30+"px"}).show()}else if(this.opts.fixed&&this.fixed)t(n).css({position:"fixed",left:a+"px",top:"30px"}).show();else{var o=this.$toolbar.offset().top+30;t(n).css({position:"absolute",left:a+"px",top:o+"px"}).show()}}var s=t.proxy(function(t){this.hideDropDown(t,n,i)},this);t(document).one("click",s),this.$editor.one("click",s),this.$content.one("click",s),e.stopPropagation()},hideAllDropDown:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),t(".redactor_dropdown").hide()},hideDropDown:function(e,n){t(e.target).hasClass("dropact")||(t(n).removeClass("dropact"),this.showedDropDown=!1,this.hideAllDropDown())},getBtn:function(e){return this.opts.toolbar===!1?!1:t(this.$toolbar.find("a.redactor_btn_"+e))},setBtnActive:function(t){this.getBtn(t).addClass("redactor_act")},setBtnInactive:function(t){this.getBtn(t).removeClass("redactor_act")},inactiveAllButtons:function(){t.each(this.opts.activeButtons,t.proxy(function(t,e){this.setBtnInactive(e)},this))},changeBtnIcon:function(t,e){this.getBtn(t).addClass("redactor_btn_"+e)},removeBtnIcon:function(t,e){this.getBtn(t).removeClass("redactor_btn_"+e)},addBtnSeparator:function(){this.$toolbar.append(t('<li class="redactor_separator"></li>'))},addBtnSeparatorAfter:function(e){var n=this.getBtn(e);n.parent().after(t('<li class="redactor_separator"></li>'))},addBtnSeparatorBefore:function(e){var n=this.getBtn(e);n.parent().before(t('<li class="redactor_separator"></li>'))},removeBtnSeparatorAfter:function(t){var e=this.getBtn(t);e.parent().next().remove()},removeBtnSeparatorBefore:function(t){var e=this.getBtn(t);e.parent().prev().remove()},setBtnRight:function(t){return this.opts.toolbar===!1?!1:void this.getBtn(t).parent().addClass("redactor_btn_right")},setBtnLeft:function(t){return this.opts.toolbar===!1?!1:void this.getBtn(t).parent().removeClass("redactor_btn_right")},addBtn:function(e,n,i,a){if(this.opts.toolbar===!1)return!1;var r=this.buildButton(e,{title:n,callback:i,dropdown:a});this.$toolbar.append(t("<li>").append(r))},addBtnFirst:function(e,n,i,a){if(this.opts.toolbar===!1)return!1;var r=this.buildButton(e,{title:n,callback:i,dropdown:a});this.$toolbar.prepend(t("<li>").append(r))},addBtnAfter:function(e,n,i,a,r){if(this.opts.toolbar===!1)return!1;var o=this.buildButton(n,{title:i,callback:a,dropdown:r}),s=this.getBtn(e);s.parent().after(t("<li>").append(o))},addBtnBefore:function(e,n,i,a,r){if(this.opts.toolbar===!1)return!1;var o=this.buildButton(n,{title:i,callback:a,dropdown:r}),s=this.getBtn(e);s.parent().before(t("<li>").append(o))},removeBtn:function(t,e){var n=this.getBtn(t);e===!0&&n.parent().next().remove(),n.parent().removeClass("redactor_btn_right"),n.remove()},getFragmentHtml:function(t){var e=t.cloneNode(!0),n=this.document.createElement("div");return n.appendChild(e),n.innerHTML},extractContent:function(){for(var t,e=this.$editor.get(0),n=this.document.createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},saveSelection:function(){this.$editor.focus(),this.savedSel=this.getOrigin(),this.savedSelObj=this.getFocus()},restoreSelection:function(){"undefined"!=typeof this.savedSel&&null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?this.opts.iframe===!1&&0==t(this.savedSel[0]).closest(".redactor_editor").size()?this.$editor.focus():(this.browser("opera")&&this.$editor.focus(),this.setSelection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]),this.browser("mozilla")&&this.$editor.focus()):this.$editor.focus()},getSelection:function(){var t=this.document;return this.window.getSelection?this.window.getSelection():t.getSelection?t.getSelection():t.selection.createRange()},hasSelection:function(){if(this.oldIE()){var t,e=this.$editor.get(0);return e.focus(),e.document.selection?(t=e.document.selection.createRange(),t&&t.parentElement().document===e.document):!1}var n;return(n=this.getSelection())&&null!=n.focusNode&&null!=n.anchorNode},getOrigin:function(){if(this.oldIE()){var t,e=this.$editor.get(0);return e.focus(),this.hasSelection()?(t=e.document.selection.createRange(),this._getBoundary(e.document,t,!0)):null}var n;return(n=this.getSelection())&&null!=n.anchorNode?[n.anchorNode,n.anchorOffset]:null},getFocus:function(){if(this.oldIE()){var t,e=this.$editor.get(0);return e.focus(),this.hasSelection()?(t=e.document.selection.createRange(),this._getBoundary(e.document,t,!1)):null}var n;return(n=this.getSelection())&&null!=n.focusNode?[n.focusNode,n.focusOffset]:null},setSelection:function(t,e,n,i){if(null==n&&(n=t),null==i&&(i=e),this.oldIE()){var a=this.$editor.get(0),o=a.document.body.createTextRange();return this._moveBoundary(a.document,o,!1,n,i),this._moveBoundary(a.document,o,!0,t,e),o.select()}var s=this.getSelection();if(s)if(s.collapse&&s.extend)s.collapse(t,e),s.extend(n,i);else{r=this.document.createRange(),r.setStart(t,e),r.setEnd(n,i);try{s.removeAllRanges()}catch(l){}s.addRange(r)}},getCurrentNode:function(){return"undefined"!=typeof this.window.getSelection?this.getSelectedNode().parentNode:"undefined"!=typeof this.document.selection?this.getSelection().parentElement():void 0},getParentNode:function(){return t(this.getCurrentNode()).parent()[0]},getSelectedNode:function(){if(this.oldIE())return this.getSelection().parentElement();if("undefined"!=typeof this.window.getSelection){var t=this.window.getSelection();return t.rangeCount>0?this.getSelection().getRangeAt(0).commonAncestorContainer:!1}return"undefined"!=typeof this.document.selection?this.getSelection():void 0},_getBoundary:function(t,e,n){var i,a,r,o,s;for(a=t.createElement("a"),i=e.duplicate(),i.collapse(n),s=i.parentElement();;)if(s.insertBefore(a,a.previousSibling),i.moveToElementText(a),!(i.compareEndPoints(n?"StartToStart":"StartToEnd",e)>0&&null!=a.previousSibling))break;return-1===i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&a.nextSibling?(i.setEndPoint(n?"EndToStart":"EndToEnd",e),r=a.nextSibling,o=i.text.length):(r=a.parentNode,o=this._getChildIndex(a)),a.parentNode.removeChild(a),[r,o]},_moveBoundary:function(t,e,n,i,a){var r,o,s,l,d;return d=0,r=this._isText(i)?i:i.childNodes[a],o=this._isText(i)?i.parentNode:i,this._isText(i)&&(d=a),l=t.createElement("a"),o.insertBefore(l,r||null),s=t.body.createTextRange(),s.moveToElementText(l),l.parentNode.removeChild(l),e.setEndPoint(n?"StartToStart":"EndToEnd",s),e[n?"moveStart":"moveEnd"]("character",d)},_isText:function(t){return null!=t?3==t.nodeType:!1},_getChildIndex:function(t){for(var e=0;t=t.previousSibling;)e++;return e},insertNodeAfterCaret:function(t){this.saveSelection(),this.insertNodeAtCaret(t),this.restoreSelection()},insertNodeAtCaret:function(t){if(this.window.getSelection){var e=this.getSelection();if(e.rangeCount){var n=e.getRangeAt(0);n.collapse(!1),n.insertNode(t),n=n.cloneRange(),n.selectNodeContents(t),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}}else if(this.document.selection){var i=1===t.nodeType?t.outerHTML:t.data,a="marker_"+(""+Math.random()).slice(2);i+='<span id="'+a+'"></span>';var r=this.getSelection();r.collapse(!1),r.pasteHTML(i);var o=this.document.getElementById(a);r.moveToElementText(o),r.select(),o.parentNode.removeChild(o)}},getSelectedHtml:function(){var t="";if(this.window.getSelection){var e=this.window.getSelection();if(e.rangeCount){for(var n=this.document.createElement("div"),i=0,a=e.rangeCount;a>i;++i)n.appendChild(e.getRangeAt(i).cloneContents());t=n.innerHTML}}else this.document.selection&&"Text"===this.document.selection.type&&(t=this.document.selection.createRange().htmlText);return t},resizeImage:function(e){var n,i,a=!1,r=!1,o=t(e).width()/t(e).height(),s=10,l=10;t(e).off("hover mousedown mouseup click mousemove"),t(e).hover(function(){t(e).css("cursor","nw-resize")},function(){t(e).css("cursor",""),a=!1}),t(e).mousedown(function(s){s.preventDefault(),o=t(e).width()/t(e).height(),a=!0,r=!0,n=Math.round(s.pageX-t(e).eq(0).offset().left),i=Math.round(s.pageY-t(e).eq(0).offset().top)}),t(e).mouseup(t.proxy(function(){a=!1,t(e).css("cursor",""),this.syncCode()},this)),t(e).click(t.proxy(function(t){r&&this.imageEdit(t)},this)),t(e).mousemove(function(d){if(a){r=!1;var c=(Math.round(d.pageX-t(this).eq(0).offset().left)-n,Math.round(d.pageY-t(this).eq(0).offset().top)-i),u=t(e).height(),h=parseInt(u,10)+c,p=h*o;p>s&&t(e).width(p),h>l&&t(e).height(h),n=Math.round(d.pageX-t(this).eq(0).offset().left),i=Math.round(d.pageY-t(this).eq(0).offset().top)}})},showTable:function(){this.saveSelection(),this.modalInit(RLANG.table,this.opts.modal_table,300,t.proxy(function(){t("#redactor_insert_table_btn").click(t.proxy(this.insertTable,this)),setTimeout(function(){t("#redactor_table_rows").focus()},200)},this))},insertTable:function(){for(var e=t("#redactor_table_rows").val(),n=t("#redactor_table_columns").val(),i=t("<div></div>"),a=Math.floor(99999*Math.random()),r=t('<table id="table'+a+'"><tbody></tbody></table>'),o=0;e>o;o++){for(var s=t("<tr></tr>"),l=0;n>l;l++){var d=t("<td><br></td>");t(s).append(d)}t(r).append(s)}t(i).append(r);var c=t(i).html()+"<p></p>";this.restoreSelection(),this.execCommand("inserthtml",c),this.modalClose(),this.observeTables()},tableObserver:function(e){this.$table=t(e.target).closest("table"),this.$table_tr=this.$table.find("tr"),this.$table_td=this.$table.find("td"),this.$tbody=t(e.target).closest("tbody"),this.$thead=t(this.$table).find("thead"),this.$current_td=t(e.target),this.$current_tr=t(e.target).closest("tr")},deleteTable:function(){t(this.$table).remove(),this.$table=!1,this.syncCode()},deleteRow:function(){t(this.$current_tr).remove(),this.syncCode()},deleteColumn:function(){var e=t(this.$current_td).get(0).cellIndex;t(this.$table).find("tr").each(function(){t(this).find("td").eq(e).remove()}),this.syncCode()},addHead:function(){if(0!==t(this.$table).find("thead").size())this.deleteHead();else{var e=t(this.$table).find("tr").first().clone();e.find("td").html("&nbsp;"),this.$thead=t("<thead></thead>"),this.$thead.append(e),t(this.$table).prepend(this.$thead),this.syncCode()}},deleteHead:function(){t(this.$thead).remove(),this.$thead=!1,this.syncCode()},insertRowAbove:function(){this.insertRow("before")},insertRowBelow:function(){this.insertRow("after")},insertColumnLeft:function(){this.insertColumn("before")},insertColumnRight:function(){this.insertColumn("after")},insertRow:function(e){var n=t(this.$current_tr).clone();n.find("td").html("&nbsp;"),"after"===e?t(this.$current_tr).after(n):t(this.$current_tr).before(n),this.syncCode()},insertColumn:function(e){var n=0;this.$current_tr.find("td").each(t.proxy(function(e,i){t(i)[0]===this.$current_td[0]&&(n=e)},this)),this.$table_tr.each(function(i,a){var r=t(a).find("td").eq(n),o=r.clone();o.html("&nbsp;"),"after"===e?t(r).after(o):t(r).before(o)}),this.syncCode()},showVideo:function(){this.saveSelection(),this.modalInit(RLANG.video,this.opts.modal_video,600,t.proxy(function(){t("#redactor_insert_video_btn").click(t.proxy(this.insertVideo,this)),setTimeout(function(){t("#redactor_insert_video_area").focus()},200)},this))},insertVideo:function(){var e=t("#redactor_insert_video_area").val();e=this.stripTags(e),this.restoreSelection(),this.execCommand("inserthtml",e),this.modalClose()},imageEdit:function(e){var n=t(e.target),i=n.parent(),a=t.proxy(function(){t("#redactor_file_alt").val(n.attr("alt")),t("#redactor_image_edit_src").attr("href",n.attr("src")),t("#redactor_form_image_align").val(n.css("float")),"A"===t(i).get(0).tagName&&t("#redactor_file_link").val(t(i).attr("href")),t("#redactor_image_delete_btn").click(t.proxy(function(){this.imageDelete(n)
},this)),t("#redactorSaveBtn").click(t.proxy(function(){this.imageSave(n)},this))},this);this.modalInit(RLANG.image,this.opts.modal_image_edit,380,a)},imageDelete:function(e){t(e).remove(),this.modalClose(),this.syncCode()},imageSave:function(e){var n=t(e).parent();t(e).attr("alt",t("#redactor_file_alt").val());var i=t("#redactor_form_image_align").val();t(e).css("left"===i?{"float":"left",margin:"0 10px 10px 0"}:"right"===i?{"float":"right",margin:"0 0 10px 10px"}:{"float":"none",margin:"0"});var a=t.trim(t("#redactor_file_link").val());""!==a?"A"!==t(n).get(0).tagName?t(e).replaceWith('<a href="'+a+'">'+this.outerHTML(e)+"</a>"):t(n).attr("href",a):"A"===t(n).get(0).tagName&&t(n).replaceWith(this.outerHTML(e)),this.modalClose(),this.observeImages(),this.syncCode()},showImage:function(){this.saveSelection();var e=t.proxy(function(){if(this.opts.imageGetJson!==!1?t.getJSON(this.opts.imageGetJson,t.proxy(function(e){var n={},i=0;t.each(e,t.proxy(function(t,e){"undefined"!=typeof e.folder&&(i++,n[e.folder]=i)},this));var a=!1;if(t.each(e,t.proxy(function(e,i){var r="";"undefined"!=typeof i.title&&(r=i.title);var o=0;t.isEmptyObject(n)||"undefined"==typeof i.folder||(o=n[i.folder],a===!1&&(a=".redactorfolder"+o));var s=t('<img src="'+i.thumb+'" class="redactorfolder redactorfolder'+o+'" rel="'+i.image+'" title="'+r+'" />');t("#redactor_image_box").append(s),t(s).click(t.proxy(this.imageSetThumb,this))},this)),!t.isEmptyObject(n)){t(".redactorfolder").hide(),t(a).show();var r=function(e){t(".redactorfolder").hide(),t(".redactorfolder"+t(e.target).val()).show()},o=t('<select id="redactor_image_box_select">');t.each(n,function(e,n){o.append(t('<option value="'+n+'">'+e+"</option>"))}),t("#redactor_image_box").before(o),o.change(r)}},this)):t("#redactor_tabs a").eq(1).remove(),this.opts.imageUpload!==!1)this.opts.uploadCrossDomain===!1&&this.isMobile()===!1&&0!==t("#redactor_file").size()&&t("#redactor_file").dragupload({url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:t.proxy(this.imageUploadCallback,this),error:t.proxy(this.opts.imageUploadErrorCallback,this)}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:t.proxy(this.imageUploadCallback,this),error:t.proxy(this.opts.imageUploadErrorCallback,this)});else if(t(".redactor_tab").hide(),this.opts.imageGetJson===!1)t("#redactor_tabs").remove(),t("#redactor_tab3").show();else{var e=t("#redactor_tabs a");e.eq(0).remove(),e.eq(1).addClass("redactor_tabs_act"),t("#redactor_tab2").show()}t("#redactor_upload_btn").click(t.proxy(this.imageUploadCallbackLink,this)),this.opts.imageUpload===!1&&this.opts.imageGetJson===!1&&setTimeout(function(){t("#redactor_file_link").focus()},200)},this);this.modalInit(RLANG.image,this.opts.modal_image,610,e)},imageSetThumb:function(e){this._imageSet('<img src="'+t(e.target).attr("rel")+'" alt="'+t(e.target).attr("title")+'" />',!0)},imageUploadCallbackLink:function(){if(""!==t("#redactor_file_link").val()){var e='<img src="'+t("#redactor_file_link").val()+'" />';this._imageSet(e,!0)}else this.modalClose()},imageUploadCallback:function(t){this._imageSet(t)},_imageSet:function(t,e){if(this.restoreSelection(),t!==!1){var n="";n=e!==!0?'<p><img src="'+t.filelink+'" /></p>':t,this.execCommand("inserthtml",n),e!==!0&&"function"==typeof this.opts.imageUploadCallback&&this.opts.imageUploadCallback(this,t)}this.modalClose(),this.observeImages()},showLink:function(){this.saveSelection();var e=t.proxy(function(){this.insert_link_node=!1;var e=this.getSelection(),n="",i="",a="";if(this.browser("msie")){var r=this.getParentNode();"A"===r.nodeName?(this.insert_link_node=t(r),i=this.insert_link_node.text(),n=this.insert_link_node.attr("href"),a=this.insert_link_node.attr("target")):i=this.oldIE()?e.text:e.toString()}else e&&e.anchorNode&&"A"===e.anchorNode.parentNode.tagName?(n=e.anchorNode.parentNode.href,i=e.anchorNode.parentNode.text,a=e.anchorNode.parentNode.target,""===e.toString()&&(this.insert_link_node=e.anchorNode.parentNode)):i=e.toString();t(".redactor_link_text").val(i);var o=self.location.href.replace(/\/$/i,""),s=n.replace(o,"");0===n.search("mailto:")?(this.setModalTab(2),t("#redactor_tab_selected").val(2),t("#redactor_link_mailto").val(n.replace("mailto:",""))):0===s.search(/^#/gi)?(this.setModalTab(3),t("#redactor_tab_selected").val(3),t("#redactor_link_anchor").val(s.replace(/^#/gi,""))):t("#redactor_link_url").val(s),"_blank"===a&&t("#redactor_link_blank").attr("checked",!0),t("#redactor_insert_link_btn").click(t.proxy(this.insertLink,this)),setTimeout(function(){t("#redactor_link_url").focus()},200)},this);this.modalInit(RLANG.link,this.opts.modal_link,460,e)},insertLink:function(){var e=t("#redactor_tab_selected").val(),n="",i="",a="";if("1"===e){n=t("#redactor_link_url").val(),i=t("#redactor_link_url_text").val(),t("#redactor_link_blank").attr("checked")&&(a=' target="_blank"');var r="/(w+:{0,1}w*@)?(S+)(:[0-9]+)?(/|/([w#!:.?+=&%@!-/]))?/",o=new RegExp("^(http|ftp|https)://"+r,"i"),s=new RegExp("^"+r,"i");-1==n.search(o)&&0==n.search(s)&&this.opts.protocol!==!1&&(n=this.opts.protocol+n)}else"2"===e?(n="mailto:"+t("#redactor_link_mailto").val(),i=t("#redactor_link_mailto_text").val()):"3"===e&&(n="#"+t("#redactor_link_anchor").val(),i=t("#redactor_link_anchor_text").val());this._insertLink('<a href="'+n+'"'+a+">"+i+"</a>",t.trim(i),n,a)},_insertLink:function(e,n,i,a){this.$editor.focus(),this.restoreSelection(),""!==n&&(this.insert_link_node?(t(this.insert_link_node).text(n),t(this.insert_link_node).attr("href",i),""!==a?t(this.insert_link_node).attr("target",a):t(this.insert_link_node).removeAttr("target"),this.syncCode()):this.execCommand("inserthtml",e)),this.modalClose()},showFile:function(){this.saveSelection();var e=t.proxy(function(){var e=this.getSelection(),n="";n=this.oldIE()?e.text:e.toString(),t("#redactor_filename").val(n),this.opts.uploadCrossDomain===!1&&this.isMobile()===!1&&t("#redactor_file").dragupload({url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:t.proxy(this.fileUploadCallback,this),error:t.proxy(this.opts.fileUploadErrorCallback,this)}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:t.proxy(this.fileUploadCallback,this),error:t.proxy(this.opts.fileUploadErrorCallback,this)})},this);this.modalInit(RLANG.file,this.opts.modal_file,500,e)},fileUploadCallback:function(e){if(this.restoreSelection(),e!==!1){var n=t("#redactor_filename").val();""===n&&(n=e.filename);var i='<a href="'+e.filelink+'">'+n+"</a>";this.browser("webkit")&&this.window.chrome&&(i+="&nbsp;"),this.execCommand("inserthtml",i),"function"==typeof this.opts.fileUploadCallback&&this.opts.fileUploadCallback(this,e)}this.modalClose()},modalInit:function(e,n,i,a){if(0===t("#redactor_modal_overlay").size()&&(this.overlay=t('<div id="redactor_modal_overlay" style="display: none;"></div>'),t("body").prepend(this.overlay)),this.opts.overlay&&(t("#redactor_modal_overlay").show(),t("#redactor_modal_overlay").click(t.proxy(this.modalClose,this))),0===t("#redactor_modal").size()&&(this.modal=t('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><div id="redactor_modal_header"></div><div id="redactor_modal_inner"></div></div>'),t("body").append(this.modal)),t("#redactor_modal_close").click(t.proxy(this.modalClose,this)),this.hdlModalClose=t.proxy(function(t){return 27===t.keyCode?(this.modalClose(),!1):void 0},this),t(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),t("#redactor_modal_inner").empty().append(0==n.indexOf("#")?t(n).html():n),t("#redactor_modal_header").html(e),"undefined"!=typeof t.fn.draggable&&(t("#redactor_modal").draggable({handle:"#redactor_modal_header"}),t("#redactor_modal_header").css("cursor","move")),0!==t("#redactor_tabs").size()){var r=this;t("#redactor_tabs a").each(function(e,n){e++,t(n).click(function(){if(t("#redactor_tabs a").removeClass("redactor_tabs_act"),t(this).addClass("redactor_tabs_act"),t(".redactor_tab").hide(),t("#redactor_tab"+e).show(),t("#redactor_tab_selected").val(e),r.isMobile()===!1){var n=t("#redactor_modal").outerHeight();t("#redactor_modal").css("margin-top","-"+(n+10)/2+"px")}})})}t("#redactor_modal .redactor_btn_modal_close").click(t.proxy(this.modalClose,this)),this.isMobile()===!1?(t("#redactor_modal").css({position:"fixed",top:"-2000px",left:"50%",width:i+"px",marginLeft:"-"+(i+60)/2+"px"}).show(),this.modalSaveBodyOveflow=t(document.body).css("overflow"),t(document.body).css("overflow","hidden")):t("#redactor_modal").css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof a&&a(),this.isMobile()===!1&&setTimeout(function(){var e=t("#redactor_modal").outerHeight();t("#redactor_modal").css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(e+10)/2+"px"})},20)},modalClose:function(){return t("#redactor_modal_close").unbind("click",this.modalClose),t("#redactor_modal").fadeOut("fast",t.proxy(function(){t("#redactor_modal_inner").html(""),this.opts.overlay&&(t("#redactor_modal_overlay").hide(),t("#redactor_modal_overlay").unbind("click",this.modalClose)),t(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose)},this)),this.isMobile()===!1&&t(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},setModalTab:function(e){t(".redactor_tab").hide();var n=t("#redactor_tabs a");n.removeClass("redactor_tabs_act"),n.eq(e-1).addClass("redactor_tabs_act"),t("#redactor_tab"+e).show()},uploadInit:function(e,n){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},t.extend(this.uploadOptions,n),0!==t("#"+e).size()&&"INPUT"===t("#"+e).get(0).tagName?(this.uploadOptions.input=t("#"+e),this.element=t(t("#"+e).get(0).form)):this.element=t("#"+e),this.element_action=this.element.attr("action"),this.uploadOptions.auto?t(this.uploadOptions.input).change(t.proxy(function(){this.element.submit(function(){return!1}),this.uploadSubmit()},this)):this.uploadOptions.trigger&&t("#"+this.uploadOptions.trigger).click(t.proxy(this.uploadSubmit,this))},uploadSubmit:function(){this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var e=this.document.createElement("div"),n='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return e.innerHTML=n,t(e).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),t("#"+this.id).load(t.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(e,n){if(this.uploadOptions.input){var i="redactorUploadForm"+this.id,a="redactorUploadFile"+this.id;this.form=t('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+n+'" name="'+i+'" id="'+i+'" enctype="multipart/form-data"></form>'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&t.each(this.opts.uploadFields,t.proxy(function(e,n){0===n.toString().indexOf("#")&&(n=t(n).val());var i=t("<input/>",{type:"hidden",name:e,value:n});t(this.form).append(i)},this));var r=this.uploadOptions.input,o=t(r).clone();t(r).attr("id",a),t(r).before(o),t(r).appendTo(this.form),t(this.form).css("position","absolute"),t(this.form).css("top","-2000px"),t(this.form).css("left","-2000px"),t(this.form).appendTo("body"),this.form.submit()}else e.attr("target",n),e.attr("method","POST"),e.attr("enctype","multipart/form-data"),e.attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var e,n=t("#"+this.id)[0];if(e=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if("undefined"!=typeof e){var i=e.body.innerHTML,a=i.match(/\{(.|\n)*\}/)[0],r=t.parseJSON(a);"undefined"==typeof r.error?this.uploadOptions.success(r):(this.uploadOptions.error(this,r),this.modalClose())}else alert("Upload failed!"),this.modalClose();this.element.attr("action",this.element_action),this.element.attr("target","")},browser:function(t){var e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"version"==t?n[2]:"webkit"==t?"chrome"==n[1]||"webkit"==n[1]:n[1]==t},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},outerHTML:function(e){return t("<p>").append(t(e).eq(0).clone()).html()},normalize:function(t){return parseInt(t.replace("px",""),10)},isMobile:function(t){return t===!0&&/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)?!0:/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)?!0:!1}},t.fn.getObject=function(){return this.data("redactor")},t.fn.getEditor=function(){return this.data("redactor").$editor},t.fn.getCode=function(){return t.trim(this.data("redactor").getCode())},t.fn.getText=function(){return this.data("redactor").$editor.text()},t.fn.getSelected=function(){return this.data("redactor").getSelectedHtml()},t.fn.setCode=function(t){this.data("redactor").setCode(t)},t.fn.insertHtml=function(t){this.data("redactor").insertHtml(t)},t.fn.destroyEditor=function(){this.each(function(){"undefined"!=typeof t(this).data("redactor")&&(t(this).data("redactor").destroy(),t(this).removeData("redactor"))})},t.fn.setFocus=function(){this.data("redactor").$editor.focus()},t.fn.execCommand=function(t,e){this.data("redactor").execCommand(t,e)}}(jQuery),function(t){"use strict";function e(e,n){this.opts=t.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:RLANG.drop_file_here,atext:RLANG.or_choose},n),this.$el=t(e)}t.fn.dragupload=function(t){return this.each(function(){var n=new e(this,t);n.init()})},e.prototype={init:function(){if(-1===navigator.userAgent.search("MSIE")){this.droparea=t('<div class="redactor_droparea"></div>'),this.dropareabox=t('<div class="redactor_dropareabox">'+this.opts.text+"</div>"),this.dropalternative=t('<div class="redactor_dropalternative">'+this.opts.atext+"</div>"),this.droparea.append(this.dropareabox),this.$el.before(this.droparea),this.$el.before(this.dropalternative),this.dropareabox.bind("dragover",t.proxy(function(){return this.ondrag()},this)),this.dropareabox.bind("dragleave",t.proxy(function(){return this.ondragleave()},this));var e=t.proxy(function(t){var e=parseInt(t.loaded/t.total*100,10);this.dropareabox.text("Loading "+e+"%")},this),n=jQuery.ajaxSettings.xhr();n.upload&&n.upload.addEventListener("progress",e,!1);var i=function(){return n};this.dropareabox.get(0).ondrop=t.proxy(function(e){e.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop");var n=e.dataTransfer.files[0],a=new FormData;this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&t.each(this.opts.uploadFields,t.proxy(function(e,n){0===n.toString().indexOf("#")&&(n=t(n).val()),a.append(e,n)},this)),a.append("file",n),t.ajax({url:this.opts.url,dataType:"html",data:a,xhr:i,cache:!1,contentType:!1,processData:!1,type:"POST",success:t.proxy(function(e){var n=t.parseJSON(e);"undefined"==typeof n.error?this.opts.success(n):(this.opts.error(this,n),this.opts.success(!1))},this)})},this)}},ondrag:function(){return this.dropareabox.addClass("hover"),!1},ondragleave:function(){return this.dropareabox.removeClass("hover"),!1}}}(jQuery),function(t){"use strict";var e="http://",n=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,i=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,a=function(){for(var r=this.childNodes,o=r.length;o--;){var s=r[o];if(3===s.nodeType){var l=s.nodeValue;l&&(l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(n,'$1<a href="'+e+'$2">$2</a>$3').replace(i,'$1<a href="$2">$2</a>$5'),t(s).after(l).remove())}else 1!==s.nodeType||/^(a|button|textarea)$/i.test(s.tagName)||a.call(s)}};t.fn.linkify=function(){this.each(a)}}(jQuery),eval(function(t,e,n,i,a,r){if(a=function(t){return(e>t?"":a(parseInt(t/e)))+((t%=e)>35?String.fromCharCode(t+29):t.toString(36))},!"".replace(/^/,String)){for(;n--;)r[a(n)]=i[n]||a(n);i=[function(t){return r[t]}],a=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(t=t.replace(new RegExp("\\b"+a(n)+"\\b","g"),i[n]));return t}('(5($){$.1.4.7={t:5(0,v){$(2).0("8",c);$(2).0("r",0);$(2).l(\'g\',$.1.4.7.b)},u:5(0){$(2).w(\'g\',$.1.4.7.b)},b:5(1){9 0=$(2).0("r");9 3=$.1.4.7.f(0).h();6(3!=\'\'){$(2).0("8",x);1.j="7";1.3=3;$.1.i.m(2,k)}},f:5(0){9 3=\'\';6(q.e){3=q.e()}o 6(d.e){3=d.e()}o 6(d.p){3=d.p.B().3}A 3}};$.1.4.a={t:5(0,v){$(2).0("n",0);$(2).0("8",c);$(2).l(\'g\',$.1.4.a.b);$(2).l(\'D\',$.1.4.a.s)},u:5(0){$(2).w(\'g\',$.1.4.a.b)},b:5(1){6($(2).0("8")){9 0=$(2).0("n");9 3=$.1.4.7.f(0).h();6(3==\'\'){$(2).0("8",c);1.j="a";$.1.i.m(2,k)}}},s:5(1){6($(2).0("8")){9 0=$(2).0("n");9 3=$.1.4.7.f(0).h();6((1.y=z)&&(3==\'\')){$(2).0("8",c);1.j="a";$.1.i.m(2,k)}}}}})(C);',40,40,"data|event|this|text|special|function|if|textselect|textselected|var|textunselect|handler|false|rdocument|getSelection|getSelectedText|mouseup|toString|handle|type|arguments|bind|apply|rttt|else|selection|rwindow|ttt|handlerKey|setup|teardown|namespaces|unbind|true|keyCode|27|return|createRange|jQuery|keyup".split("|"),0,{})),function(){function t(t){var e,n,i,a,r,o,s,l=new Array,d=0,c=t.rows.length;for(i=0;c>i;){for(var e=t.rows[i],a=0,r=0;a<e.cells.length||r<l.length;)if(l[r])l[r++]--;else if(a>=e.cells.length)r++;else for(n=e.cells[a++],s=Math.max(1,parseInt(n.rowSpan)),o=Math.max(1,parseInt(n.colSpan));o>0&&!l[r];o--)l[r++]=s-1;d=Math.max(r,d),i++}return d}function e(e,i,a,r,o,s){var l,d,c,u,h,p,f,g,m=[],v=[],b=e.rows.length,y=t(e),w=[];if(i>0)for(c=a;a+i>c;c++)e.insertRow(c);for(c=0;b>c;){for(var l=e.rows[c],u=0,h=0;y>h;){if(r>0&&h===o)for(p=0;r>p;p++)w.push(n(l,u++,s.placeHolder));if(m[h])if(0>i&&c===a-i&&v[h]&&1==v[h].rowSpan)for(d=v[h],u>=l.cells.length?l.appendChild(d):l.insertBefore(d,l.cells[u]),u++,g=d.rowSpan=m[h],f=Math.max(1,parseInt(d.colSpan));f>0;--f)m[h++]=g-1;else for(0===--m[h++]&&(v[h]=null);m[h]&&!v[h];)--m[h++];else{u>=l.cells.length&&w.push(n(l,u,s.placeHolder)),d=l.cells[u++],g=Math.max(1,parseInt(d.rowSpan)),g>1&&(v[h]=d,0>i&&c>=a&&a-i>c&&(d.rowSpan=1));var C=h;for(f=Math.max(1,parseInt(d.colSpan));f>0;--f){if(m[h]){d.colSpan-=f;break}m[h++]=g-1}if(0>i&&c>=a&&a-i>c);else if(r>0&&h>o&&o>C)d.colSpan+=r;else if(0>r&&o-r>C&&h>o){var x=Math.max(0,o-C)+Math.max(0,h-(o-r));x?d.colSpan=x:l.deleteCell(--u)}}}if(r>0&&h===o)for(p=0;r>p;p++)w.push(n(l,u++,s.placeHolder));if(c++,i>0&&c===a)for(p=0;y>p;p++)m[p]&&(m[p]+=i),v[p]&&(v[p].rowSpan+=i);else if(0>i&&c===a)for(p=0;p<v.length;p++)v[p]&&(v[p].rowSpan-=Math.min(-i,m[p]))}if(0>i)for(c=a;a-i>c;c++)e.deleteRow(c);return w}function n(t,e,n){var i,a;if(e>0?i=t.cells[e-1]:e<t.cells.length&&(i=t.cells[e+1]),a=t.insertCell(e),i&&"TH"===i.tagName){var r=document.createElement("th");n&&(r.innerHTML=n),pi(a).replaceWith(r)}else n&&(a.innerHTML=n);return a}function a(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function r(t,e,n){li[t]=n,di[t]=e}function o(t,e,n){if("undefined"==typeof li[t])r(t,e,n);else{n=n||e;for(var i in n)li[t][i]=n[i]}}function s(t){oi!==t&&(oi=t,yi.eachInstance(function(){this.localeChange()}))}function l(t,e){if("undefined"!=typeof li[oi]&&"undefined"!=typeof li[oi][t])return li[oi][t];if("undefined"!=typeof li[si]&&"undefined"!=typeof li[si][t])return li[si][t];for(var n in di)if("undefined"!=typeof li[n][t])return li[n][t];return e?!1:t}function d(t,e){if(!oi){var n=yi.persist("locale");n&&(oi=n)}if(oi||(oi="en"),t=l(t,e===!1),t===!1)return!1;if(e){for(var i in e)t=t.replace("{{"+i+"}}",e[i]);return t}return t}function c(t){if(!t||!t.id){var e;do e="ruid-"+Math.random().toString().replace(".","");while(document.getElementById(e));if(!t)return e;t.id=e}return t.id}function u(t,e){try{if(localStorage){var n;return n=localStorage.raptor?JSON.parse(localStorage.raptor):{},n[t]=e,localStorage.raptor=JSON.stringify(n),!0}}catch(i){}return!1}function h(t,e){try{if(localStorage){var n;return n=localStorage.raptor?JSON.parse(localStorage.raptor):{},n[t]}}catch(i){}return e}function p(t){for(var e in t)this[e]=t[e]}function f(t){var e=!1;for(var n in ci)"function"==typeof ci[n]?ci[n]()&&(e=!0):ci[n]&&(e=!0);if(e){var i="There are unsaved changes on this page. Are you sure you wish to navigate away?";return(t||window.event).returnValue=i,i}}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}function m(t,e){return t.replace(/([A-Z])/g,function(t){return(e||"-")+t.toLowerCase()})}function v(t,e){var n=t.toLowerCase().replace(/[^a-z0-9](.)/gi,function(t,e){return e.toUpperCase()});return e!==!1&&(n=g(n)),n}function b(t){return ui[t]}function y(t,e){return t=t.replace(/tr\(['"]{1}(.*?)['"]{1}\)/g,function(t,e){return e=e.replace(/\\(.?)/g,function(t,e){switch(e){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return e}}),d(e)}),e=pi.extend({},this.options,e||{}),e=w(e),t=t.replace(/\{\{(.*?)\}\}/g,function(t,n){return e[n]})}function w(t,e,n){e=e?e+".":"";var i=5;n||(n=1);var a={};for(var r in t)if("object"==typeof t[r]&&i>n){var o=w(t[r],e+r,++n);for(var s in o)a[s]=o[s]}else a[e+r]=t[r];return a}function C(t){return!isNaN(t-0)&&null!==t}function x(t){return t instanceof Array}function _(t){return t instanceof jQuery}function T(t,e,n){return S(t,e),t=Le(e),n(),rangy.getSelection().removeAllRanges(),t}function S(t,e){if(t){var n=$e(e,t);return n.ranges&&rangy.getSelection().setRanges(n.ranges),n.element}return e}function E(t){t()}function A(t,e){for(i=0;i<e.length;i++)pi.trim(t.attr(e[i]))||t.removeAttr(e[i]),t.find("["+e[i]+"]").filter(function(){return""===pi.trim(pi(this).attr(e[i]))}).removeAttr(e[i])}function k(t,e){var n;do n=!1,t.find(e.join(",")).each(function(){var t=pi(this).html().replace("&nbsp;"," ").trim();""===t&&(pi(this).remove(),n=!0)});while(n);return t}function N(t,e){for(var n=Q(t),i=0,a=n.length;a>i;i++){var r=n[i].cloneNode(),o=document.createElement(e);o.appendChild(r),t.insertBefore(o,n[i]),t.removeChild(n[i])}}function R(t,e){for(var n=0;n<e.length;n++)t.find("["+e[n]+"]").removeAttr(e[n])}function D(t,e){t.find(e.join(",")).contents().unwrap()}function I(t){pi(t).find(".rangySelectionBoundary").remove()}function O(t,e){var n,i=pi("<div>").addClass("spacer");"top"===e.position?(n={position:"fixed",top:e.under?pi(e.under).outerHeight():0,left:0,right:0},e.spacer&&(e.under?i.insertAfter(e.under):i.prependTo("body"))):"topLeft"===e.position?(n={position:"fixed",top:e.under?pi(e.under).outerHeight():0,left:0},e.spacer&&(e.under?i.insertAfter(e.under):i.prependTo("body"))):"topRight"===e.position?(n={position:"fixed",top:e.under?pi(e.under).outerHeight():0,right:0},e.spacer&&(e.under?i.insertAfter(e.under):i.prependTo("body"))):"bottom"===e.position?(n={position:"fixed",bottom:0,left:0,right:0},e.spacer&&i.appendTo("body")):"bottomLeft"===e.position?(n={position:"fixed",bottom:0,left:0},e.spacer&&i.appendTo("body")):"bottomRight"===e.position&&(n={position:"fixed",bottom:0,right:0},e.spacer&&i.appendTo("body"));var a=He(t,n);return i.css("height",t.outerHeight()),setTimeout(function(){i.css("height",t.outerHeight())},300),{dockedElement:t,spacer:i,styleState:a}}function P(t){return Ue(t.dockedElement,t.styleState),t.spacer.remove(),t.dockedElement.detach()}function M(t,e,n){var i=e.wrap("<div>").parent(),a=Ve(i,e,{"float":"none",display:"block",clear:"none",position:"static",margin:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,padding:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,outline:0,width:"auto",border:"none"}),r=He(t,{position:"static"});return i.prepend(t).addClass(n.wrapperClass?n.wrapperClass:""),{dockedElement:t,dockedTo:e,innerStyleState:a,dockedElementStyleState:r}}function L(t){Ue(t.dockedTo,t.innerStyleState),Ue(t.dockedElement,t.dockedElementStyleState);var e=t.dockedElement.detach();return t.dockedTo.unwrap(),e}function $(t){var e=1;t.siblings().each(function(){var t=pi(this).css("z-index");!isNaN(t)&&t>e&&(e=t+1)}),t.css("z-index",e)}function B(t){return t.clone().wrap("<div/>").parent().html()}function F(t){t=pi(t);var e={top:Math.round(t.offset().top),left:Math.round(t.offset().left),width:Math.round(t.outerWidth()),height:Math.round(t.outerHeight())},n=pi(window).scrollTop(),i=pi(window).height(),a=n+i,r=Math.round(e.height+e.top);return n<e.top&&a>r?e:(n>e.top&&(e.top=n),e.height=r>a?a-e.top:i-(a-r),e)}function H(t){for(var e={},n=window.getComputedStyle(t[0],null),i=0;i<n.length;i++)e[n.item(i)]=n.getPropertyValue(n.item(i));return e}function V(t,e){var n=new jQuery;le();for(var i=0,a=t.length;a>i;i++){var r=pi("<"+e+"/>").html(pi(t[i]).html());t.html(r),n.push(r[0])}return de(),n}function U(t){return t.is("img")||t.find("img").length?!1:/&nbsp;/.test(t.html())?!1:""===t.text()}function G(t,e){var n=pi(e).offset(),i=pi(e).outerHeight();pi(t).css({top:n.top+i-pi(window).scrollTop()+"px",left:n.left+"px"})}function z(t,e){for(;t.length>0&&t[0]!==e[0]&&(t[0].nodeType===Node.TEXT_NODE||"inline"===t.css("display"));)t=t.parent();return t[0]===e[0]?null:t}function W(){for(var t="ruid-"+(new Date).getTime()+"-"+Math.floor(1e5*Math.random());pi("#"+t).length;)t="ruid-"+(new Date).getTime()+"-"+Math.floor(1e5*Math.random());return t}function q(t,e){for(var n=[],i=t.length-1;i>=0;i--){var a=document.createElement(e);a.innerHTML=t[i].innerHTML,pi.each(t[i].attributes,function(){pi(a).attr(this.name,this.value)}),pi(t[i]).after(a).remove(),n[i]=a}return pi(n)}function Y(t,e){if(t.outerHeight()>e.outerHeight()-20){var n=F(e),i=e.offset();t.css({position:"absolute",top:i.top-t.outerHeight(),left:n.left+(n.width/2-t.outerWidth()/2)})}else{var n=F(e);t.css({position:"absolute",top:n.top+(n.height/2-t.outerHeight()/2),left:n.left+(n.width/2-t.outerWidth()/2)})}}function Z(t,e){for(var n="",i=0,a=t.childNodes.length;a>i;i++){var r=t.childNodes.item(i),o=r.nodeType===Node.TEXT_NODE?r.nodeValue:B(pi(r));o&&(n+=o)}return e&&(n=pi("<"+e+">"+n+"</"+e+">"),n.find("p").wrapInner("<"+e+"/>"),n.find("p > *").unwrap(),n=pi("<div/>").html(n).html()),n}function K(t){for(;t.nodeType===Node.TEXT_NODE;)t=t.parentNode;return t}function Q(t){for(var e=[],n=/^\s*$/,i=0,a=t.childNodes.length;a>i;i++)t.childNodes[i].nodeType==Node.TEXT_NODE&&(n.test(t.childNodes[i].nodeValue)||e.push(t.childNodes[i]));return e}function J(t,e){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1}function u(t,e){if(localStorage){var n;n=localStorage.raptor?JSON.parse(localStorage.raptor):{},n[t]=e,localStorage.raptor=JSON.stringify(n)}}function h(t){if(localStorage){var e;return e=localStorage.raptor?JSON.parse(localStorage.raptor):{},e[t]}}function X(t,e){t.selectNodeContents(pi(e).get(0))}function te(t,e){var n=[],i=pi("<div/>").append(e)[0].childNodes;return t.deleteContents(),void 0===i.length||1===i.length?t.insertNode(i[0].cloneNode(!0)):pi.each(i,function(e,i){n.unshift(i.cloneNode(!0)),t.insertNodeAtEnd(n[0])}),n}function ee(t){var e=oe(t);return"string"==typeof e&&(e=e.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1")),Fe(e)}function ne(t){return K(t.commonAncestorContainer)}function ie(t){if(t.startContainer.data)for(;/\s/.test(t.startContainer.data.substr(t.startOffset,1));)t.setStart(t.startContainer,t.startOffset+1);if(t.endContainer.data)for(;t.endOffset>0&&/\s/.test(t.endContainer.data.substr(t.endOffset-1,1));)t.setEnd(t.endContainer,t.endOffset-1)}function ae(t,e){return rangy.serializeRange(t,!0,e)}function re(t,e){for(var n=t.split("|"),i=[],a=0,r=n.length;r>a;a++)i[a]=rangy.deserializeRange(n[a],e);return i}function oe(t){return Z(t.cloneContents())}function se(){var t=rangy.getSelection();return t.rangeCount>0?t.getRangeAt(0):null}function le(t){(!hi||t)&&(hi=rangy.saveSelection())}function de(){hi&&(rangy.restoreSelection(hi),hi=!1)}function ce(){hi&&rangy.removeMarkers(hi),hi=!1}function ue(t,e,n){e=e||rangy.getSelection();for(var i,a=0;i=e.getAllRanges()[a++];)t.call(n,i)}function he(t){rangy.getSelection().setSingleRange(t)}function pe(t,e){var n=[];return ue(function(e){n=n.concat(te(e,t))},e,this),n}function fe(t,e){e=e||rangy.getSelection();var n=rangy.createRange();n.selectNodeContents(t),e.setSingleRange(n)}function ge(t){var e=rangy.createRange();e.selectNode(t),rangy.getSelection().setSingleRange(e)}function me(t,e,n){e=e||rangy.getSelection(),e.removeAllRanges(),pi(t).each(function(){var t=rangy.createRange();t.selectNodeContents(this),t.collapse(n),e.addRange(t)})}function ve(t,e){me(t,e,!0)}function be(t){return t=t||rangy.getSelection(),t.toHtml()}function ye(t,e){if(e=e||rangy.getSelection(),!_e())return new jQuery;var n,t=Te();return n=t.commonAncestorContainer.nodeType===Node.TEXT_NODE?t.commonAncestorContainer.parentNode:t.commonAncestorContainer,pi(n)}function we(t){var e=new jQuery;return ue(function(t){e.push(ye(t)[0])},t,this),e}function Ce(){return""===rangy.getSelection().toHtml()}function xe(t,e){e=e||{};var n=rangy.createCssClassApplier(e.classes||"",{normalize:!0,elementTagName:t,elementProperties:e.attributes||{}});ue(function(i){if(ee(i)){var a=pi("<"+t+"/>").addClass(e.classes).attr(e.attributes||{}).append(Z(i.cloneContents()));te(i,a)}else n.toggleRange(i)},null,this)}function _e(){return 0!==rangy.getSelection().rangeCount}function Te(){return rangy.getSelection().getRangeAt(0)}function Se(t,e,n){ue(function(i){var a,r=z(pi(i.startContainer),e),o=z(pi(i.endContainer),e);if(r&&o){r.is(o)?a=r:r&&o&&(a=r.nextUntil(o).andSelf().add(o));for(var s=0,l=a.length;l>s;s++)t(a[s])}else t(V(e,n).get(0))})}function Ee(t,e,n,i){var a=!1,r=new jQuery;Se(function(e){if(r.push(e),!a)for(var n=0,i=t.length;i>n;n++)pi(e).hasClass(t[n])||(a=!0)},n,i),pi(r).removeClass(e.join(" ")),a?pi(r).addClass(t.join(" ")):pi(r).removeClass(t.join(" "))}function Ae(t,e){e=e||rangy.getSelection();for(var n=e.getAllRanges(),i=[],a=0,r=n.length;r>a;a++){var o=n[a].cloneRange();n[a].startContainer===t||J(n[a].startContainer,t)||o.setStart(t,0),n[a].endContainer===t||J(n[a].endContainer,t)||o.setEnd(t,t.childNodes.length),i.push(o)}e.setRanges(i)}function ke(t,e){if(t=t||document.body,e=e||rangy.getSelection(),_e()){var n=Te().cloneRange(),i=n.extractContents();""===Z(i)&&(X(n,n.commonAncestorContainer),e.setSingleRange(n),i=n.extractContents()),i=pi("<div/>").append(Z(i)).html().replace(/(<\/?.*?>)/gi,function(t){return null!==t.match(/^<(img|object|param|embed|iframe)/)?t:""});for(var a=n.commonAncestorContainer;a&&a.parentNode!==t;)a=a.parentNode;if(a){n.setEndAfter(a);var r=n.extractContents();n.collapseAfter(a),n.insertNode(r),n.collapseAfter(a)}i=pi.parseHTML(i),null!==i&&pi(i.reverse()).each(function(){return pi(this).is("img")?void n.insertNode(pi(this).removeAttr("width height class style").get(0)):void n.insertNode(this)})}}function Ne(t,e,n,i){le();var a="domTools"+Math.ceil(1e7*Math.random());ue(function(t){var r=rangy.createCssClassApplier(i,{elementTagName:n});r.isAppliedToRange(t)?r.toggleSelection():rangy.createCssClassApplier(e,{elementTagName:a}).toggleSelection()},null,this),pi(a).each(function(){pi(this).replaceWith(pi("<"+t+"/>").addClass(e).html(pi(this).html()))}),de()}function Re(){var t=window.getSelection(),e=t.getRangeAt(0);if(e&&e.startContainer===e.endContainer&&e.startOffset===e.endOffset){for(var n=e.startOffset,i=e.startOffset;e.startContainer.data[n-1]&&!e.startContainer.data[n-1].match(/\s/);)n--;for(;e.startContainer.data[i]&&!e.startContainer.data[i].match(/\s/);)i++;e.setStart(e.startContainer,n),e.setEnd(e.startContainer,i),t.removeAllRanges(),t.addRange(e)}}function De(t,e,n){for(var i=rangy.getSelection().getAllRanges(),a=0,r=i.length;r>a;a++){var o=pi(K(i[a].startContainer));(n||!o.is(t)&&!o.is(e))&&(o=o.parentsUntil(e,t)),o=n?o.last():o.first(),1!==o.length||o.is(e)||i[a].setStart(o[0],0),o=pi(K(i[a].endContainer)),(n||!o.is(t)&&!o.is(e))&&(o=o.parentsUntil(e,t)),o=n?o.last():o.first(),1!==o.length||o.is(e)||i[a].setEnd(o[0],o[0].childNodes.length)
}rangy.getSelection().setRanges(i)}function Ie(){if(_e()){var t=Te();ie(t),he(t)}}function Oe(t,e){var n=new jQuery;return ue(function(i){for(var a=i.startContainer;a.nodeType===Node.TEXT_NODE;)a=a.parentNode;for(var r=i.endContainer;r.nodeType===Node.TEXT_NODE;)r=r.parentNode;var o=function(){e.is(this)||n.push(this)};do{if(pi(a).filter(t).each(o),e.is(a)||0!==n.length||pi(a).parentsUntil(e,t).each(o),pi(a).find(t).each(o),pi(r).is(a))break;a=pi(a).next()}while(a.length>0&&0===pi(a).prevAll().has(r).length)}),n}function Pe(t,e,n){var i=Oe(e.join(","),n);if(i.length)le(),q(i,t),de();else{var a=n.get(0);a.innerHTML.trim()?(le(),a.innerHTML="<"+t+">"+a.innerHTML+"</"+t+">",de()):(a.innerHTML="<"+t+">&nbsp;</"+t+">",fe(a.childNodes[0]))}}function Me(t,e){var n=!0;return ue(function(i){var a=pi(i.commonAncestorContainer).find("*");0!==pi(i.commonAncestorContainer).parentsUntil(e,t).length||0!==a.length&&a.length===a.filter(t).length||(n=!1)}),n}function Le(t){var e=se();return{element:t.clone(!0),ranges:e?ae(e,t.get(0)):null}}function $e(t,e){t.replaceWith(e.element);var n=null;try{e.ranges&&(n=re(e.ranges,e.element.get(0)))}catch(i){}return{element:e.element,ranges:n}}function Be(t,e){allowed=[];for(var n=0;n<e.length;n++)e[n].match(/[a-z][a-z0-9]{0,}/g)&&allowed.push(e[n]);var i=/<\/?([a-z][a-z0-9]*)\b[^>]*\/?>/gi,a=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(a,"").replace(i,function(t,e){return allowed.indexOf(e.toLowerCase())>-1?t:""})}function Fe(t){return pi(pi.parseHTML(t)).is(":empty")}function He(t,e){var n=t.get(0),i={};for(var a in e)i[a]=n.style[a];for(a in e)t.css(a,e[a]);return i}function Ve(t,e,n){var i=e.get(0),a={};for(var r in n)a[r]=i.style[r];for(r in n)t.css(r,e.css(r)),e.css(r,n[r]);return a}function Ue(t,e){for(var n in e)t.css(n,e[n]||"")}function je(t,e,n){n=n||{};for(var i=document.createElement("table");e--;)for(var a=i.insertRow(0),r=0;t>r;r++){var o=a.insertCell(0);n.placeHolder&&(o.innerHTML=n.placeHolder)}return i}function Ge(t,n,i){return e(t,0,0,1,n,i||{})}function ze(t,n){e(t,0,0,-1,n)}function We(t,e,n){var i=new GoogTable(t);return i.insertRow(e,n)}function qe(t,n){e(t,-1,n,0,0)}function Ye(t){for(var e,n,i,a,r=[],o=t.parentNode.parentNode.parentNode.tBodies[0].rows,s=0;s<o.length;s++){n=o[s].sectionRowIndex,n=s;for(var l=0;l<o[s].cells.length;l++){for(e=l;r[n]&&r[n][e];)e++;for(i=e;i<e+(o[s].cells[l].colSpan||1);++i)for(a=n;a<n+(o[s].cells[l].rowSpan||1);++a)r[a]||(r[a]=[]),r[a][i]=!0;if(t===o[s].cells[l])return{x:e,y:n}}}}function Ze(t,e){for(var n=t.tBodies[0].rows,i=0;i<n.length;i++)for(var a=0;a<n[i].cells.length;a++){var r=Ye(n[i].cells[a]);if(r.x===e.x&&r.y===e.y)return n[i].cells[a]}return null}function Ke(t,e,n){for(var i=Math.min(e.x,n.x),a=i,r=Math.min(e.y,n.y),o=Math.max(e.x,n.x),s=Math.max(e.y,n.y),l=[];s>=r;){for(;o>=a;){var d=Ze(t,{x:a,y:r});null!==d&&l.push(d),a++}a=i,r++}return l}function Qe(t){for(var e=0,n=t.rows.length;n>e;e++)if(t.rows[e].cells.length>0)return!1;return!0}function Je(t,e){return pi(t).button(e)}function Xe(t,e){return pi(t).button("option","text",!0),pi(t).button("option","label",e)}function tn(t,e){return pi(t).button("option","icons",{primary:e})}function en(t){return pi(t).button("option","disabled",!1)}function nn(t){return!pi(t).is(".ui-state-disabled")}function an(t){return pi(t).button("option","disabled",!0)}function rn(t){return pi(t).addClass("ui-state-highlight")}function on(t){return pi(t).removeClass("ui-state-highlight")}function sn(t,e){return pi(t).menu(e)}function ln(t,e){e.dialogClass="undefined"!=typeof e.dialogClass?e.dialogClass+" ui-dialog-fixed":"ui-dialog-fixed";var n=pi(t).dialog(e);return n.parent().css({top:(parseInt(n.parent().css("top"))||0)-pi(window).scrollTop()}),n.dialog("option","position","center"),n}function dn(t){return pi(t).dialog("open")}function cn(t){return pi(t).dialog("close")}function un(t,e){return pi(t).tabs(e)}function hn(t){"success"==t.type&&(t.state="confirmation"),pi.pnotify(pi.extend({type:"success",styling:"jqueryui",history:!1},t))}function pn(){if(void 0===fi){fi=!0,gi=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent),gi&&(pi("html").addClass("raptor-ios"),gi&&pi(document).on("scroll",function(){setInterval(function(){pi("body").css("height","+=1").css("height","-=1")},0)})),vi=/Firefox/i.test(navigator.userAgent),vi&&pi("html").addClass("raptor-ff");var t=function(){var t=-1;return-1!=navigator.appVersion.indexOf("MSIE")&&(t=parseFloat(navigator.appVersion.split("MSIE")[1])),t}();bi=-1!==t,bi&&9>t&&(fi=!1,pi(function(){var t=pi("<div/>").addClass("raptor-unsupported").html('<div class="raptor-unsupported-overlay"></div><div class="raptor-unsupported-content">    It has been detected that you a using a browser that is not supported by Raptor, please    use one of the following browsers:    <ul>        <li><a href="http://www.google.com/chrome">Google Chrome</a></li>        <li><a href="http://www.firefox.com">Mozilla Firefox</a></li>        <li><a href="http://windows.microsoft.com/ie">Internet Explorer</a></li>    </ul>    <div class="raptor-unsupported-input">        <button class="raptor-unsupported-close">Close</button>        <input name="raptor-unsupported-show" type="checkbox" />        <label>Don\'t show this message again</label>    </div><div>').appendTo("body"),e=function(t){var e=1;t.siblings().each(function(){var t=pi(this).css("z-index");!isNaN(t)&&t>e&&(e=t+1)}),t.css("z-index",e)};e(t),t.find(".raptor-unsupported-close").click(function(){t.remove()})})),mi=void 0!==jQuery.hotkeys}return fi}function fn(t){this.name=t}function gn(t,e){this.name=t;for(var n in e)this[n]=e[n]}function mn(t,e){this.raptor=t,this.uiOrder=e}function vn(){fn.call(this,"toolbar"),this.wrapper=null}function bn(){fn.call(this,"hoverPanel"),this.hoverPanel=null,this.visible=!1}function yn(){fn.call(this,"elementHoverPanel"),this.elements="img",this.hoverPanel=null,this.visible=!1,this.target=null,this.enabled=!0}function wn(t){this.text=!1,this.label=null,this.icon=null,this.hotkey=null;for(var e in t)this[e]=t[e]}function Cn(t){this.preview=!0,this.previewing=!1,this.previewTimeout=500,this.previewTimer=null,wn.call(this,t)}function xn(t){this.disable=!1,wn.call(this,t)}function _n(t){Cn.call(this,t)}function Tn(t){wn.call(this,t)}function Sn(t){_n.call(this,t)}function En(t){this.state=null,wn.call(this,t)}function An(t){En.call(this,t),xn.call(this,t)}function kn(t,e){this.menu=t,this.name=t.name,this.raptor=t.raptor,this.options=t.options,wn.call(this,e)}function Nn(t){this.menu=null,this.menuContent="",this.button=null;for(var e in t)this[e]=t[e]}function Rn(t){Nn.call(this,t)}function Dn(){Rn.call(this,{name:"classMenu"})}function In(){this.options={colors:{white:"#ffffff",black:"#000000",grey:"#999",blue:"#4f81bd",red:"#c0504d",green:"#9bbb59",purple:"#8064a2",orange:"#f79646"}},this.currentColor="automatic",Rn.call(this,{name:"colorMenuBasic"})}function On(t,e){this.options={dockToElement:!1,docked:!1,position:"top",spacer:!0,persist:!0,dockTo:null},this.dockState=!1,this.marker=!1,gn.call(this,t||"dock",e)}function Pn(){this.options={fonts:["arial","palatino","georgia","times","comic-sans","impact","courier"]},Rn.call(this,{name:"fontFamilyMenu"})}function Mn(){this.options={persist:!0},Rn.call(this,{name:"languageMenu"})}function Ln(t){this.raptor=t,this.label=d("linkTypeDocumentLabel")}function $n(t){this.raptor=t,this.label=d("linkTypeEmailLabel")}function Bn(t){this.raptor=t,this.label=d("linkTypeExternalLabel")}function Fn(t){this.raptor=t,this.label=d("linkTypeInternalLabel")}function Hn(t,e){gn.call(this,t||"noBreak",e)}function Vn(t,e){gn.call(this,t||"normaliseLineBreaks",e)}function Un(t,e){this.options={allowedTags:["h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","p","a","span","hr","br","strong","em"],allowedAttributes:["href","title"],allowedEmptyTags:["hr","br"],panels:["formatted-clean","plain-text","formatted-unclean","source"]},gn.call(this,t||"paste",e)}function jn(t,e){this.options={content:d("placeholderPluginDefaultContent"),tag:"p",select:!0},gn.call(this,t||"placeholder",e)}function Gn(t,e){this.options={retain:!1},gn.call(this,t||"saveJson",e),this.size=null}function zn(t,e){this.method="put",this.options={retain:!1},gn.call(this,t||"saveRest",e)}function Wn(){Rn.call(this,{name:"snippetMenu"})}function qn(t){Tn.call(this,t)}function Yn(){Nn.call(this,{name:"tableCreate"})}function Zn(t,e){gn.call(this,t||"tableSupport",e)}function Kn(){Rn.call(this,{name:"tagMenu"})}function Qn(t){_n.call(this,t)}function Jn(t,e){gn.call(this,t||"toolTip",e)}function Xn(t,e){gn.call(this,t||"unsavedEditWarning",e)}!function(t){function e(e){if("string"==typeof e.data){var n=e.handler,i=e.data.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type){var a="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],r=String.fromCharCode(e.which).toLowerCase(),o="",s={};e.altKey&&"alt"!==a&&(o+="alt+"),e.ctrlKey&&"ctrl"!==a&&(o+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==a&&(o+="meta+"),e.shiftKey&&"shift"!==a&&(o+="shift+"),a?s[o+a]=!0:(s[o+r]=!0,s[o+t.hotkeys.shiftNums[r]]=!0,"shift+"===o&&(s[t.hotkeys.shiftNums[r]]=!0));for(var l=0,d=i.length;d>l;l++)if(s[i[l]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery),GoogTable=function(t){this.element=t,this.refresh()},GoogTable.prototype.refresh=function(){var t=this.rows=[],e=this.element.tBodies[0];if(e){for(var n=[],i=e.firstChild;i;i=i.nextSibling)"TR"===i.tagName&&n.push(i);for(var a,r=0;a=n[r];r++)for(var o,s=t[r],l=GoogTable.getChildCellElements(a),d=0,c=0;o=l[c];c++){for(;s&&s.columns[d];)d++;for(var u=new GoogTableCell(o,r,d),h=0;h<u.rowSpan;h++){var p=r+h,f=t[p];f||t.push(f=new GoogTableRow(n[p],p));var g=d+u.colSpan;f.columns.length<g&&(f.columns.length=g);for(var m=0;m<u.colSpan;m++){var v=d+m;f.columns[v]=u}}d+=u.colSpan}}},GoogTable.getChildCellElements=function(t){for(var e,n=[],i=0;e=t.childNodes[i];i++)("TD"===e.tagName||"TH"===e.tagName)&&n.push(e);return n},GoogTable.prototype.insertRow=function(t,e){var n,i,t=t||this.rows.length;0==t?(n=this.rows[0],i=!1):(n=this.rows[t-1],i=!0);for(var a,r=document.createElement("tr"),o=0;a=n.columns[o];o+=1){if(i&&a.endRow>t||!i&&a.startRow<t)a.setRowSpan(a.rowSpan+1),a.colSpan>1&&(o+=a.colSpan-1);else{var s=document.createElement("td");s.innerHTML=e.placeHolder,r.appendChild(s)}i?n.element.parentNode.insertBefore(r,n.element.nextSibling):n.element.insertBefore(r)}return this.refresh(),r},GoogTable.prototype.mergeCells=function(t,e,n,i){var a,r=[];if(t==n&&e==i)return!1;for(var o=t;n>=o;o++)for(var s=e;i>=s;s++){if(a=this.rows[o].columns[s],a.startRow<t||a.endRow>n||a.startCol<e||a.endCol>i)return!1;r.push(a)}for(var l=r[0],d=l.element,c=document,o=1;a=r[o];o++){var u=a.element;if(u.parentNode&&u!=d){d.lastChild&&d.lastChild.nodeType===Node.TEXT_NODE&&d.appendChild(c.createElement("br"));for(var h;h=u.firstChild;)d.appendChild(h);u.parentNode.removeChild(u)}}return l.setColSpan(i-e+1),l.setRowSpan(n-t+1),this.refresh(),!0},GoogTable.prototype.splitCell=function(t,e){for(var n=this.rows[t],i=n.columns[e],a=[],r=i.element.innerHTML,o=0;o<i.rowSpan;o++)for(var s=0;s<i.colSpan;s++)if(o>0||s>0){var l=document.createElement("td");this.insertCellElement(l,t+o,e+s),a.push(l)}return i.setColSpan(1),i.setRowSpan(1),a[0].innerHTML=r,i.element.innerHTML="",this.refresh(),a},GoogTable.prototype.insertCellElement=function(t,e,n){for(var i,a=this.rows[e],r=null,o=n;i=a.columns[o];o+=i.colSpan)if(i.startRow==e){r=i.element;break}a.element.insertBefore(t,r)},GoogTableRow=function(t,e){this.index=e,this.element=t,this.columns=[]},GoogTableCell=function(t,e,n){this.element=t,this.colSpan=parseInt(t.colSpan,10)||1,this.rowSpan=parseInt(t.rowSpan,10)||1,this.startRow=e,this.startCol=n,this.updateCoordinates_()},GoogTableCell.prototype.updateCoordinates_=function(){this.endCol=this.startCol+this.colSpan-1,this.endRow=this.startRow+this.rowSpan-1},GoogTableCell.prototype.setColSpan=function(t){t!=this.colSpan&&(t>1?this.element.colSpan=t:(this.element.colSpan=1,this.element.removeAttribute("colSpan")),this.colSpan=t,this.updateCoordinates_())},GoogTableCell.prototype.setRowSpan=function(t){t!=this.rowSpan&&(t>1?this.element.rowSpan=t.toString():(this.element.rowSpan="1",this.element.removeAttribute("rowSpan")),this.rowSpan=t,this.updateCoordinates_())},function(){function t(){this.returnValue=!1}function e(){this.cancelBubble=!0}var n,i,a=0,r=[],o={},s={},l={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},d=/[<>&\"\']/g,c=window.setTimeout,u={};!function(t){var e,n,i,a=t.split(/,/);for(e=0;e<a.length;e+=2)for(i=a[e+1].split(/ /),n=0;n<i.length;n++)s[i[n]]=a[e]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var h={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:s,ua:function(){var t,e,n,i=navigator,a=i.userAgent,r=i.vendor;return t=/WebKit/.test(a),n=t&&-1!==r.indexOf("Apple"),e=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(a),ie:!t&&!e&&/MSIE/gi.test(a)&&/Explorer/gi.test(i.appName),webkit:t,gecko:!t&&/Gecko/.test(a),safari:n,opera:!!e}}(),typeOf:function(t){return{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(t){return h.each(arguments,function(e,n){n>0&&h.each(e,function(e,n){t[n]=e})}),t},cleanName:function(t){var e,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],e=0;e<n.length;e+=2)t=t.replace(n[e],n[e+1]);return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(t,e){return e.name=t,r[t]=e,r.push(e),e},guid:function(){var t,e=(new Date).getTime().toString(32);for(t=0;5>t;t++)e+=Math.floor(65535*Math.random()).toString(32);return(h.guidPrefix||"p")+e+(a++).toString(32)},buildUrl:function(t,e){var n="";return h.each(e,function(t,e){n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),n&&(t+=(t.indexOf("?")>0?"&":"?")+n),t},each:function(t,e){var i,a,r;if(t)if(i=t.length,i===n){for(a in t)if(t.hasOwnProperty(a)&&e(t[a],a)===!1)return}else for(r=0;i>r;r++)if(e(t[r],r)===!1)return},formatSize:function(t){return t===n||/\D/.test(t)?h.translate("N/A"):t>1073741824?Math.round(t/1073741824,1)+" GB":t>1048576?Math.round(t/1048576,1)+" MB":t>1024?Math.round(t/1024,1)+" KB":t+" b"},getPos:function(t,e){function n(t){var e,n,i=0,a=0;return t&&(n=t.getBoundingClientRect(),e="CSS1Compat"===l.compatMode?l.documentElement:l.body,i=n.left+e.scrollLeft,a=n.top+e.scrollTop),{x:i,y:a}}var i,a,r,o=0,s=0,l=document;if(t=t,e=e||l.body,t&&t.getBoundingClientRect&&h.ua.ie&&(!l.documentMode||l.documentMode<8))return a=n(t),r=n(e),{x:a.x-r.x,y:a.y-r.y};for(i=t;i&&i!=e&&i.nodeType;)o+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!=e&&i.nodeType;)o-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;return{x:o,y:s}},getSize:function(t){return{w:t.offsetWidth||t.clientWidth,h:t.offsetHeight||t.clientHeight}},parseSize:function(t){var e;return"string"==typeof t&&(t=/^([0-9]+)([mgk]?)$/.exec(t.toLowerCase().replace(/[^0-9mkg]/g,"")),e=t[2],t=+t[1],"g"==e&&(t*=1073741824),"m"==e&&(t*=1048576),"k"==e&&(t*=1024)),t},xmlEncode:function(t){return t?(""+t).replace(d,function(t){return l[t]?"&"+l[t]+";":t}):t},toArray:function(t){var e,n=[];for(e=0;e<t.length;e++)n[e]=t[e];return n},inArray:function(t,e){if(e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n}return-1},addI18n:function(t){return h.extend(o,t)},translate:function(t){return o[t]||t},isEmptyObj:function(t){if(t===n)return!0;for(var e in t)return!1;return!0},hasClass:function(t,e){var n;return""==t.className?!1:(n=new RegExp("(^|\\s+)"+e+"(\\s+|$)"),n.test(t.className))},addClass:function(t,e){h.hasClass(t,e)||(t.className=""==t.className?e:t.className.replace(/\s+$/,"")+" "+e)},removeClass:function(t,e){var n=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(n,function(t,e,n){return" "===e&&" "===n?" ":""})},getStyle:function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null)[e]:void 0},addEvent:function(a,r,o){var s,l,d;d=arguments[3],r=r.toLowerCase(),i===n&&(i="Plupload_"+h.guid()),a.addEventListener?(s=o,a.addEventListener(r,s,!1)):a.attachEvent&&(s=function(){var n=window.event;n.target||(n.target=n.srcElement),n.preventDefault=t,n.stopPropagation=e,o(n)},a.attachEvent("on"+r,s)),a[i]===n&&(a[i]=h.guid()),u.hasOwnProperty(a[i])||(u[a[i]]={}),l=u[a[i]],l.hasOwnProperty(r)||(l[r]=[]),l[r].push({func:s,orig:o,key:d})},removeEvent:function(t,e){var a,r,o;if("function"==typeof arguments[2]?r=arguments[2]:o=arguments[2],e=e.toLowerCase(),t[i]&&u[t[i]]&&u[t[i]][e]){a=u[t[i]][e];for(var s=a.length-1;s>=0&&(a[s].key!==o&&a[s].orig!==r||(t.removeEventListener?t.removeEventListener(e,a[s].func,!1):t.detachEvent&&t.detachEvent("on"+e,a[s].func),a[s].orig=null,a[s].func=null,a.splice(s,1),r===n));s--);if(a.length||delete u[t[i]][e],h.isEmptyObj(u[t[i]])){delete u[t[i]];try{delete t[i]}catch(l){t[i]=n}}}},removeAllEvents:function(t){var e=arguments[1];t[i]!==n&&t[i]&&h.each(u[t[i]],function(n,i){h.removeEvent(t,i,e)})}};h.Uploader=function(t){function e(){var t,e,n=0;if(this.state==h.STARTED){for(e=0;e<l.length;e++)t||l[e].status!=h.QUEUED?n++:(t=l[e],t.status=h.UPLOADING,this.trigger("BeforeUpload",t)&&this.trigger("UploadFile",t));n==l.length&&(this.stop(),this.trigger("UploadComplete",l))}}function i(){var t,e;for(a.reset(),t=0;t<l.length;t++)e=l[t],e.size!==n?(a.size+=e.size,a.loaded+=e.loaded):a.size=n,e.status==h.DONE?a.uploaded++:e.status==h.FAILED?a.failed++:a.queued++;a.size===n?a.percent=l.length>0?Math.ceil(a.uploaded/l.length*100):0:(a.bytesPerSec=Math.ceil(a.loaded/((+new Date-o||1)/1e3)),a.percent=a.size>0?Math.ceil(a.loaded/a.size*100):0)}var a,o,s={},l=[],d=!1;a=new h.QueueProgress,t=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},t),h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:l,settings:t,total:a,id:h.guid(),init:function(){function a(){var t,e,n,i=d[f++];if(i){if(t=i.getFeatures(),e=p.settings.required_features)for(e=e.split(","),n=0;n<e.length;n++)if(!t[e[n]])return void a();i.init(p,function(e){e&&e.success?(p.features=t,p.runtime=i.name,p.trigger("Init",{runtime:i.name}),p.trigger("PostInit"),p.refresh()):a()})}else p.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var s,d,u,p=this,f=0;if("function"==typeof t.preinit?t.preinit(p):h.each(t.preinit,function(t,e){p.bind(e,t)}),t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(t.url)||(t.url=t.page_url+t.url),t.chunk_size=h.parseSize(t.chunk_size),t.max_file_size=h.parseSize(t.max_file_size),p.bind("FilesAdded",function(e,i){var a,r,o,s=0,d=t.filters;for(d&&d.length&&(o=[],h.each(d,function(t){h.each(t.extensions.split(/,/),function(t){o.push(/^\s*\*\s*$/.test(t)?"\\.*":"\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),o=new RegExp(o.join("|")+"$","i")),a=0;a<i.length;a++)r=i[a],r.loaded=0,r.percent=0,r.status=h.QUEUED,!o||o.test(r.name)?r.size!==n&&r.size>t.max_file_size?e.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:r}):(l.push(r),s++):e.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:r});return s?void c(function(){p.trigger("QueueChanged"),p.refresh()},1):!1}),t.unique_names&&p.bind("UploadFile",function(t,e){var n=e.name.match(/\.([^.]+)$/),i="tmp";n&&(i=n[1]),e.target_name=e.id+"."+i}),p.bind("UploadProgress",function(t,e){e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):100,i()}),p.bind("StateChanged",function(t){if(t.state==h.STARTED)o=+new Date;else if(t.state==h.STOPPED)for(s=t.files.length-1;s>=0;s--)t.files[s].status==h.UPLOADING&&(t.files[s].status=h.QUEUED,i())}),p.bind("QueueChanged",i),p.bind("Error",function(t,n){n.file&&(n.file.status=h.FAILED,i(),t.state==h.STARTED&&c(function(){e.call(p)},1))}),p.bind("FileUploaded",function(t,n){n.status=h.DONE,n.loaded=n.size,t.trigger("UploadProgress",n),c(function(){e.call(p)},1)}),t.runtimes)for(d=[],u=t.runtimes.split(/\s?,\s?/),s=0;s<u.length;s++)r[u[s]]&&d.push(r[u[s]]);else d=r;a(),"function"==typeof t.init?t.init(p):h.each(t.init,function(t,e){p.bind(e,t)})},refresh:function(){this.trigger("Refresh")},start:function(){l.length&&this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),e.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){d=arguments[0]!==n?arguments[0]:!0,this.trigger("DisableBrowse",d)},getFile:function(t){var e;for(e=l.length-1;e>=0;e--)if(l[e].id===t)return l[e]},removeFile:function(t){var e;for(e=l.length-1;e>=0;e--)if(l[e].id===t.id)return this.splice(e,1)[0]},splice:function(t,e){var i;return i=l.splice(t===n?0:t,e===n?l.length:e),this.trigger("FilesRemoved",i),this.trigger("QueueChanged"),i},trigger:function(t){var e,n,i=s[t.toLowerCase()];if(i)for(n=Array.prototype.slice.call(arguments),n[0]=this,e=0;e<i.length;e++)if(i[e].func.apply(i[e].scope,n)===!1)return!1;return!0},hasEventListener:function(t){return!!s[t.toLowerCase()]},bind:function(t,e,n){var i;t=t.toLowerCase(),i=s[t]||[],i.push({func:e,scope:n||this}),s[t]=i},unbind:function(t){t=t.toLowerCase();var e,i=s[t],a=arguments[1];if(i){if(a!==n){for(e=i.length-1;e>=0;e--)if(i[e].func===a){i.splice(e,1);break}}else i=[];i.length||delete s[t]}},unbindAll:function(){var t=this;h.each(s,function(e,n){t.unbind(n)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},h.File=function(t,e,n){var i=this;i.id=t,i.name=e,i.size=n,i.loaded=0,i.percent=0,i.status=0},h.Runtime=function(){this.getFeatures=function(){},this.init=function(){}},h.QueueProgress=function(){var t=this;t.size=0,t.loaded=0,t.uploaded=0,t.failed=0,t.queued=0,t.percent=0,t.bytesPerSec=0,t.reset=function(){t.size=t.loaded=t.uploaded=t.failed=t.queued=t.percent=t.bytesPerSec=0}},h.runtimes={},window.plupload=h}(),function(t,e,n){function i(t){return e.getElementById(t)}n.runtimes.Html4=n.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:n.ua.gecko&&t.FormData||n.ua.webkit}},init:function(a,r){a.bind("Init",function(r){function o(){var t,s,l,d;c=n.guid(),v.push(c),t=e.createElement("form"),t.setAttribute("id","form_"+c),t.setAttribute("method","post"),t.setAttribute("enctype","multipart/form-data"),t.setAttribute("encoding","multipart/form-data"),t.setAttribute("target",r.id+"_iframe"),t.style.position="absolute",s=e.createElement("input"),s.setAttribute("id","input_"+c),s.setAttribute("type","file"),s.setAttribute("accept",y),s.setAttribute("size",1),d=i(r.settings.browse_button),r.features.triggerDialog&&d&&n.addEvent(i(r.settings.browse_button),"click",function(t){s.disabled||s.click(),t.preventDefault()},r.id),n.extend(s.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),n.extend(t.style,{overflow:"hidden"}),l=r.settings.shim_bgcolor,l&&(t.style.background=l),b&&n.extend(s.style,{filter:"alpha(opacity=0)"}),n.addEvent(s,"change",function(e){var l,u=e.target,h=[];u.value&&(i("form_"+c).style.top="-1048575px",l=u.value.replace(/\\/g,"/"),l=l.substring(l.length,l.lastIndexOf("/")+1),h.push(new n.File(c,l)),r.features.triggerDialog?n.removeEvent(d,"click",r.id):n.removeAllEvents(t,r.id),n.removeEvent(s,"change",r.id),o(),h.length&&a.trigger("FilesAdded",h))},r.id),t.appendChild(s),g.appendChild(t),r.refresh()}function s(){var i=e.createElement("div");i.innerHTML='<iframe id="'+r.id+'_iframe" name="'+r.id+'_iframe" src="'+m+':&quot;&quot;" style="display:none"></iframe>',l=i.firstChild,g.appendChild(l),n.addEvent(l,"load",function(e){var i,a,o=e.target;if(d){try{i=o.contentWindow.document||o.contentDocument||t.frames[o.id].document}catch(s){return void r.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),file:d})}a=i.documentElement.innerText||i.documentElement.textContent,a&&(d.status=n.DONE,d.loaded=1025,d.percent=100,r.trigger("UploadProgress",d),r.trigger("FileUploaded",d,{response:a}))}},r.id)}var l,d,c,u,h,p,f,g=e.body,m="javascript",v=[],b=/MSIE/.test(navigator.userAgent),y=[],w=r.settings.filters;t:for(u=0;u<w.length;u++)for(h=w[u].extensions.split(/,/),f=0;f<h.length;f++){if("*"===h[f]){y=[];break t}p=n.mimeTypes[h[f]],p&&-1===n.inArray(p,y)&&y.push(p)}y=y.join(","),r.settings.container&&(g=i(r.settings.container),"static"===n.getStyle(g,"position")&&(g.style.position="relative")),r.bind("UploadFile",function(t,a){var r,o;a.status!=n.DONE&&a.status!=n.FAILED&&t.state!=n.STOPPED&&(r=i("form_"+a.id),o=i("input_"+a.id),o.setAttribute("name",t.settings.file_data_name),r.setAttribute("action",t.settings.url),n.each(n.extend({name:a.target_name||a.name},t.settings.multipart_params),function(t,i){var a=e.createElement("input");n.extend(a,{type:"hidden",name:i,value:t}),r.insertBefore(a,r.firstChild)}),d=a,i("form_"+c).style.top="-1048575px",r.submit())}),r.bind("FileUploaded",function(t){t.refresh()}),r.bind("StateChanged",function(e){e.state==n.STARTED?s():e.state==n.STOPPED&&t.setTimeout(function(){n.removeEvent(l,"load",e.id),l.parentNode&&l.parentNode.removeChild(l)},0),n.each(e.files,function(t){if(t.status===n.DONE||t.status===n.FAILED){var e=i("form_"+t.id);e&&e.parentNode.removeChild(e)}})}),r.bind("Refresh",function(t){var a,r,o,s,l,d,u,h,p;a=i(t.settings.browse_button),a&&(l=n.getPos(a,i(t.settings.container)),d=n.getSize(a),u=i("form_"+c),h=i("input_"+c),n.extend(u.style,{top:l.y+"px",left:l.x+"px",width:d.w+"px",height:d.h+"px"}),t.features.triggerDialog&&("static"===n.getStyle(a,"position")&&n.extend(a.style,{position:"relative"}),p=parseInt(a.style.zIndex,10),isNaN(p)&&(p=0),n.extend(a.style,{zIndex:p}),n.extend(u.style,{zIndex:p-1})),o=t.settings.browse_button_hover,s=t.settings.browse_button_active,r=t.features.triggerDialog?a:u,o&&(n.addEvent(r,"mouseover",function(){n.addClass(a,o)},t.id),n.addEvent(r,"mouseout",function(){n.removeClass(a,o)},t.id)),s&&(n.addEvent(r,"mousedown",function(){n.addClass(a,s)},t.id),n.addEvent(e.body,"mouseup",function(){n.removeClass(a,s)},t.id)))}),a.bind("FilesRemoved",function(t,e){var n,a;for(n=0;n<e.length;n++)a=i("form_"+e[n].id),a&&a.parentNode.removeChild(a)}),a.bind("DisableBrowse",function(t,n){var i=e.getElementById("input_"+c);i&&(i.disabled=n)}),a.bind("Destroy",function(t){var a,r,o,s={inputContainer:"form_"+c,inputFile:"input_"+c,browseButton:t.settings.browse_button};for(a in s)r=i(s[a]),r&&n.removeAllEvents(r,t.id);n.removeAllEvents(e.body,t.id),n.each(v,function(t){o=i("form_"+t),o&&o.parentNode.removeChild(o)})}),o()}),r({success:!0})}})}(window,document,plupload),function(t,e,n,a){function r(t){var n=t.naturalWidth,i=t.naturalHeight;if(n*i>1048576){var a=e.createElement("canvas");a.width=a.height=1;var r=a.getContext("2d");return r.drawImage(t,-n+1,0),0===r.getImageData(0,0,1,1).data[3]}return!1}function o(t,n,i){var a=e.createElement("canvas");a.width=1,a.height=i;var r=a.getContext("2d");r.drawImage(t,0,0);for(var o=r.getImageData(0,0,1,i).data,s=0,l=i,d=i;d>s;){var c=o[4*(d-1)+3];0===c?l=d:s=d,d=l+s>>1}var u=d/i;return 0===u?1:u}function s(t,n,i){var a=t.naturalWidth,s=t.naturalHeight,l=i.width,d=i.height,c=n.getContext("2d");c.save();var u=r(t);u&&(a/=2,s/=2);var h=1024,p=e.createElement("canvas");p.width=p.height=h;for(var f=p.getContext("2d"),g=o(t,a,s),m=0;s>m;){for(var v=m+h>s?s-m:h,b=0;a>b;){var y=b+h>a?a-b:h;f.clearRect(0,0,h,h),f.drawImage(t,-b,-m);var w=b*l/a<<0,C=Math.ceil(y*l/a),x=m*d/s/g<<0,_=Math.ceil(v*d/s/g);c.drawImage(p,0,0,y,v,w,x,C,_),b+=h}m+=h}c.restore(),p=f=null}function l(e,n){var i;return"FileReader"in t?(i=new FileReader,i.readAsDataURL(e),i.onload=function(){n(i.result)},void 0):n(e.getAsDataURL())}function d(e,n){var i;return"FileReader"in t?(i=new FileReader,i.readAsBinaryString(e),i.onload=function(){n(i.result)},void 0):n(e.getAsBinary())}function c(t,n,i,a){var r,o,d,c=this;l(g[t.id],function(l){r=e.createElement("canvas"),r.style.display="none",e.body.appendChild(r),o=new Image,o.onerror=o.onabort=function(){a({success:!1})},o.onload=function(){var e,u,f,g;if(n.width||(n.width=o.width),n.height||(n.height=o.height),d=Math.min(n.width/o.width,n.height/o.height),1>d)e=Math.round(o.width*d),u=Math.round(o.height*d);else{if(!n.quality||"image/jpeg"!==i)return void a({success:!1});e=o.width,u=o.height}if(r.width=e,r.height=u,s(o,r,{width:e,height:u}),"image/jpeg"===i&&(f=new h(atob(l.substring(l.indexOf("base64,")+7))),f.headers&&f.headers.length&&(g=new p,g.init(f.get("exif")[0])&&(g.setExif("PixelXDimension",e),g.setExif("PixelYDimension",u),f.set("exif",g.getBinary()),c.hasEventListener("ExifData")&&c.trigger("ExifData",t,g.EXIF()),c.hasEventListener("GpsData")&&c.trigger("GpsData",t,g.GPS())))),n.quality&&"image/jpeg"===i)try{l=r.toDataURL(i,n.quality/100)}catch(m){l=r.toDataURL(i)}else l=r.toDataURL(i);l=l.substring(l.indexOf("base64,")+7),l=atob(l),f&&f.headers&&f.headers.length&&(l=f.restore(l),f.purge()),r.parentNode.removeChild(r),a({success:!0,data:l})},o.src=l})}function u(){function t(t,e){var n,a=r?0:-8*(e-1),o=0;for(n=0;e>n;n++)o|=i.charCodeAt(t+n)<<Math.abs(a+8*n);return o}function e(t,e,n){var n=3===arguments.length?n:i.length-e-1;i=i.substr(0,e)+t+i.substr(n+e)}function n(t,n,i){var a,o="",s=r?0:-8*(i-1);for(a=0;i>a;a++)o+=String.fromCharCode(n>>Math.abs(s+8*a)&255);
e(o,t,i)}var i,r=!1;return{II:function(t){return t===a?r:void(r=t)},init:function(t){r=!1,i=t},SEGMENT:function(t,n,a){switch(arguments.length){case 1:return i.substr(t,i.length-t-1);case 2:return i.substr(t,n);case 3:e(a,t,n);break;default:return i}},BYTE:function(e){return t(e,1)},SHORT:function(e){return t(e,2)},LONG:function(e,i){return i===a?t(e,4):void n(e,i,4)},SLONG:function(e){var n=t(e,4);return n>2147483647?n-4294967296:n},STRING:function(e,n){var i="";for(n+=e;n>e;e++)i+=String.fromCharCode(t(e,1));return i}}}function h(t){var e,n,i,r={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},o=[],s=a,l=0;if(e=new u,e.init(t),65496===e.SHORT(0)){for(n=2,i=Math.min(1048576,t.length);i>=n;)if(s=e.SHORT(n),s>=65488&&65495>=s)n+=2;else{if(65498===s||65497===s)break;l=e.SHORT(n+2)+2,r[s]&&e.STRING(n+4,r[s].signature.length)===r[s].signature&&o.push({hex:s,app:r[s].app.toUpperCase(),name:r[s].name.toUpperCase(),start:n,length:l,segment:e.SEGMENT(n,l)}),n+=l}return e.init(null),{headers:o,restore:function(t){e.init(t);var i=new h(t);if(!i.headers)return!1;for(var a=i.headers.length;a>0;a--){var r=i.headers[a-1];e.SEGMENT(r.start,r.length,"")}i.purge(),n=65504==e.SHORT(2)?4+e.SHORT(4):2;for(var a=0,s=o.length;s>a;a++)e.SEGMENT(n,0,o[a].segment),n+=o[a].length;return e.SEGMENT()},get:function(t){for(var e=[],n=0,i=o.length;i>n;n++)o[n].app===t.toUpperCase()&&e.push(o[n].segment);return e},set:function(t,e){var n=[];"string"==typeof e?n.push(e):n=e;for(var i=ii=0,a=o.length;a>i&&(o[i].app===t.toUpperCase()&&(o[i].segment=n[ii],o[i].length=n[ii].length,ii++),!(ii>=n.length));i++);},purge:function(){o=[],e.init(null)}}}}function p(){function t(t,e){var n,i,r,s,c,u,h,p,f=o.SHORT(t),g=[],m={};for(n=0;f>n;n++)if(h=u=t+12*n+2,r=e[o.SHORT(h)],r!==a){switch(s=o.SHORT(h+=2),c=o.LONG(h+=2),h+=4,g=[],s){case 1:case 7:for(c>4&&(h=o.LONG(h)+d.tiffHeader),i=0;c>i;i++)g[i]=o.BYTE(h+i);break;case 2:c>4&&(h=o.LONG(h)+d.tiffHeader),m[r]=o.STRING(h,c-1);continue;case 3:for(c>2&&(h=o.LONG(h)+d.tiffHeader),i=0;c>i;i++)g[i]=o.SHORT(h+2*i);break;case 4:for(c>1&&(h=o.LONG(h)+d.tiffHeader),i=0;c>i;i++)g[i]=o.LONG(h+4*i);break;case 5:for(h=o.LONG(h)+d.tiffHeader,i=0;c>i;i++)g[i]=o.LONG(h+4*i)/o.LONG(h+4*i+4);break;case 9:for(h=o.LONG(h)+d.tiffHeader,i=0;c>i;i++)g[i]=o.SLONG(h+4*i);break;case 10:for(h=o.LONG(h)+d.tiffHeader,i=0;c>i;i++)g[i]=o.SLONG(h+4*i)/o.SLONG(h+4*i+4);break;default:continue}p=1==c?g[0]:g,m[r]=l.hasOwnProperty(r)&&"object"!=typeof p?l[r][p]:p}return m}function e(){var e=a,n=d.tiffHeader;return o.II(18761==o.SHORT(n)),42!==o.SHORT(n+=2)?!1:(d.IFD0=d.tiffHeader+o.LONG(n+=2),e=t(d.IFD0,s.tiff),d.exifIFD="ExifIFDPointer"in e?d.tiffHeader+e.ExifIFDPointer:a,d.gpsIFD="GPSInfoIFDPointer"in e?d.tiffHeader+e.GPSInfoIFDPointer:a,!0)}function r(t,e,n){var a,r,l,c=0;if("string"==typeof e){var u=s[t.toLowerCase()];for(hex in u)if(u[hex]===e){e=hex;break}}for(a=d[t.toLowerCase()+"IFD"],r=o.SHORT(a),i=0;r>i;i++)if(l=a+12*i+2,o.SHORT(l)==e){c=l+8;break}return c?(o.LONG(c,n),!0):!1}var o,s,l,d={};return o=new u,s={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},l={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return d={tiffHeader:10},t!==a&&t.length?(o.init(t),65505===o.SHORT(0)&&"EXIF\x00"===o.STRING(4,5).toUpperCase()?e():!1):!1},EXIF:function(){var e;if(e=t(d.exifIFD,s.exif),e.ExifVersion&&"array"===n.typeOf(e.ExifVersion)){for(var i=0,a="";i<e.ExifVersion.length;i++)a+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=a}return e},GPS:function(){var e;return e=t(d.gpsIFD,s.gps),e.GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(t,e){return"PixelXDimension"!==t&&"PixelYDimension"!==t?!1:r("exif",t,e)},getBinary:function(){return o.SEGMENT()}}}var f,g={};n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,a,r,o,s,l;return a=r=s=l=!1,t.XMLHttpRequest&&(i=new XMLHttpRequest,r=!!i.upload,a=!(!i.sendAsBinary&&!i.upload)),a&&(o=!!(i.sendAsBinary||t.Uint8Array&&t.ArrayBuffer),s=!(!File||!File.prototype.getAsDataURL&&!t.FileReader||!o),l=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),f=n.ua.safari&&n.ua.windows,{html5:a,dragdrop:function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t}(),jpgresize:s,pngresize:s,multipart:s||!!t.FileReader||!!t.FormData,canSendBinary:o,cantSendBlobInFormData:!(!(n.ua.gecko&&t.FormData&&t.FileReader)||FileReader.prototype.readAsArrayBuffer)||n.ua.android,progress:r,chunks:l,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&t.FormData||n.ua.webkit}},init:function(i,a){function r(t){var e,a,r,o=[],s={};for(a=0;a<t.length;a++)e=t[a],s[e.name]&&n.ua.safari&&n.ua.windows||(s[e.name]=!0,r=n.guid(),g[r]=e,o.push(new n.File(r,e.fileName||e.name,e.fileSize||e.size)));o.length&&i.trigger("FilesAdded",o)}var o,s;return o=this.getFeatures(),o.html5?(i.bind("Init",function(t){var a,o,s,l,d,c,u,h=[],p=t.settings.filters,f=e.body;a=e.createElement("div"),a.id=t.id+"_html5_container",n.extend(a.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0}),a.className="plupload html5",i.settings.container&&(f=e.getElementById(i.settings.container),"static"===n.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(a);t:for(s=0;s<p.length;s++)for(d=p[s].extensions.split(/,/),l=0;l<d.length;l++){if("*"===d[l]){h=[];break t}c=n.mimeTypes[d[l]],c&&-1===n.inArray(c,h)&&h.push(c)}if(a.innerHTML='<input id="'+i.id+'_html5"  style="font-size:999px" type="file" accept="'+h.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",a.scrollTop=100,u=e.getElementById(i.id+"_html5"),t.features.triggerDialog?n.extend(u.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(u.style,{cssFloat:"right",styleFloat:"right"}),u.onchange=function(){r(this.files),this.value=""},o=e.getElementById(t.settings.browse_button)){var g=t.settings.browse_button_hover,m=t.settings.browse_button_active,v=t.features.triggerDialog?o:a;g&&(n.addEvent(v,"mouseover",function(){n.addClass(o,g)},t.id),n.addEvent(v,"mouseout",function(){n.removeClass(o,g)},t.id)),m&&(n.addEvent(v,"mousedown",function(){n.addClass(o,m)},t.id),n.addEvent(e.body,"mouseup",function(){n.removeClass(o,m)},t.id)),t.features.triggerDialog&&n.addEvent(o,"click",function(n){var i=e.getElementById(t.id+"_html5");i&&!i.disabled&&i.click(),n.preventDefault()},t.id)}}),i.bind("PostInit",function(){var t=e.getElementById(i.settings.drop_element);if(t){if(f)return void n.addEvent(t,"dragenter",function(){var a,o,s;a=e.getElementById(i.id+"_drop"),a||(a=e.createElement("input"),a.setAttribute("type","file"),a.setAttribute("id",i.id+"_drop"),a.setAttribute("multiple","multiple"),n.addEvent(a,"change",function(){r(this.files),n.removeEvent(a,"change",i.id),a.parentNode.removeChild(a)},i.id),n.addEvent(a,"dragover",function(t){t.stopPropagation()},i.id),t.appendChild(a)),o=n.getPos(t,e.getElementById(i.settings.container)),s=n.getSize(t),"static"===n.getStyle(t,"position")&&n.extend(t.style,{position:"relative"}),n.extend(a.style,{position:"absolute",display:"block",top:0,left:0,width:s.w+"px",height:s.h+"px",opacity:0})},i.id);n.addEvent(t,"dragover",function(t){t.preventDefault()},i.id),n.addEvent(t,"drop",function(t){var e=t.dataTransfer;e&&e.files&&r(e.files),t.preventDefault()},i.id)}}),i.bind("Refresh",function(t){var a,r,o,s,l;a=e.getElementById(i.settings.browse_button),a&&(r=n.getPos(a,e.getElementById(t.settings.container)),o=n.getSize(a),s=e.getElementById(i.id+"_html5_container"),n.extend(s.style,{top:r.y+"px",left:r.x+"px",width:o.w+"px",height:o.h+"px"}),i.features.triggerDialog&&("static"===n.getStyle(a,"position")&&n.extend(a.style,{position:"relative"}),l=parseInt(n.getStyle(a,"zIndex"),10),isNaN(l)&&(l=0),n.extend(a.style,{zIndex:l}),n.extend(s.style,{zIndex:l-1})))}),i.bind("DisableBrowse",function(t,n){var i=e.getElementById(t.id+"_html5");i&&(i.disabled=n)}),i.bind("CancelUpload",function(){s&&s.abort&&s.abort()}),i.bind("UploadFile",function(e,i){function a(t,e,n){var i;if(!File.prototype.slice)return(i=File.prototype.webkitSlice||File.prototype.mozSlice)?i.call(t,e,n):null;try{return t.slice(),t.slice(e,n)}catch(a){return t.slice(e,n-e)}}function r(r){function l(){function h(t){if(s.sendAsBinary)s.sendAsBinary(t);else if(e.features.canSendBinary){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=255&t.charCodeAt(i);s.send(n.buffer)}}function p(a){var r,u=0,p="----pluploadboundary"+n.guid(),C="--",x="\r\n",_="";if(s=new XMLHttpRequest,s.upload&&(s.upload.onprogress=function(t){i.loaded=Math.min(i.size,c+t.loaded-u),e.trigger("UploadProgress",i)}),s.onreadystatechange=function(){var t,o;if(4==s.readyState&&e.state!==n.STOPPED){try{t=s.status}catch(u){t=0}if(t>=400)e.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:t});else{if(g){if(o={chunk:d,chunks:g,response:s.responseText,status:t},e.trigger("ChunkUploaded",i,o),c+=b,o.cancelled)return void(i.status=n.FAILED);i.loaded=Math.min(i.size,(d+1)*v)}else i.loaded=i.size;e.trigger("UploadProgress",i),a=f=r=_=null,!g||++d>=g?(i.status=n.DONE,e.trigger("FileUploaded",i,{response:s.responseText,status:t})):l()}}},e.settings.multipart&&o.multipart){if(m.name=i.target_name||i.name,s.open("post",w,!0),n.each(e.settings.headers,function(t,e){s.setRequestHeader(e,t)}),"string"!=typeof a&&t.FormData)return r=new FormData,n.each(n.extend(m,e.settings.multipart_params),function(t,e){r.append(e,t)}),r.append(e.settings.file_data_name,a),void s.send(r);if("string"==typeof a)return s.setRequestHeader("Content-Type","multipart/form-data; boundary="+p),n.each(n.extend(m,e.settings.multipart_params),function(t,e){_+=C+p+x+'Content-Disposition: form-data; name="'+e+'"'+x+x,_+=unescape(encodeURIComponent(t))+x}),y=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",_+=C+p+x+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+x+"Content-Type: "+y+x+x+a+x+C+p+C+x,u=_.length-a.length,a=_,void h(a)}w=n.buildUrl(e.settings.url,n.extend(m,e.settings.multipart_params)),s.open("post",w,!0),s.setRequestHeader("Content-Type","application/octet-stream"),n.each(e.settings.headers,function(t,e){s.setRequestHeader(e,t)}),"string"==typeof a?h(a):s.send(a)}var f,g,m,v,b,y,w=e.settings.url;i.status!=n.DONE&&i.status!=n.FAILED&&e.state!=n.STOPPED&&(m={name:i.target_name||i.name},u.chunk_size&&i.size>u.chunk_size&&(o.chunks||"string"==typeof r)?(v=u.chunk_size,g=Math.ceil(i.size/v),b=Math.min(v,i.size-d*v),f="string"==typeof r?r.substring(d*v,d*v+b):a(r,d*v,d*v+b),m.chunk=d,m.chunks=g):(b=i.size,f=r),e.settings.multipart&&o.multipart&&"string"!=typeof f&&t.FileReader&&o.cantSendBlobInFormData&&o.chunks&&e.settings.chunk_size?!function(){var t=new FileReader;t.onload=function(){p(t.result),t=null},t.readAsBinaryString(f)}():p(f))}var d=0,c=0;l()}var l,u=e.settings;l=g[i.id],o.jpgresize&&e.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?c.call(e,i,e.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",function(t){t.success?(i.size=t.data.length,r(t.data)):o.chunks?r(l):d(l,r)}):!o.chunks&&o.jpgresize?d(l,r):r(l)}),i.bind("Destroy",function(t){var i,a,r=e.body,o={inputContainer:t.id+"_html5_container",inputFile:t.id+"_html5",browseButton:t.settings.browse_button,dropElm:t.settings.drop_element};for(i in o)a=e.getElementById(o[i]),a&&n.removeAllEvents(a,t.id);n.removeAllEvents(e.body,t.id),t.settings.container&&(r=e.getElementById(t.settings.container)),r.removeChild(e.getElementById(o.inputContainer))}),void a({success:!0})):void a({success:!1})}})}(window,document,plupload),function(t,e,n,i){function a(t){return n.translate(t)||t}function r(t){t.html('<div class="plupload_wrapper"><div class="ui-widget-content plupload_container"><div class="plupload"><div class="ui-state-default ui-widget-header plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+a("Select files")+'</div><div class="plupload_header_text">'+a("Add files to the upload queue and click the start button.")+'</div></div></div><div class="plupload_content"><table class="plupload_filelist"><tr class="ui-widget-header plupload_filelist_header"><td class="plupload_cell plupload_file_name">'+a("Filename")+'</td><td class="plupload_cell plupload_file_status">'+a("Status")+'</td><td class="plupload_cell plupload_file_size">'+a("Size")+'</td><td class="plupload_cell plupload_file_action">&nbsp;</td></tr></table><div class="plupload_scroll"><table class="plupload_filelist_content"></table></div><table class="plupload_filelist"><tr class="ui-widget-header ui-widget-content plupload_filelist_footer"><td class="plupload_cell plupload_file_name"><div class="plupload_buttons"><!-- Visible --><a class="plupload_button plupload_add">'+a("Add Files")+'</a>&nbsp;<a class="plupload_button plupload_start">'+a("Start Upload")+'</a>&nbsp;<a class="plupload_button plupload_stop plupload_hidden">'+a("Stop Upload")+'</a>&nbsp;</div><div class="plupload_started plupload_hidden"><!-- Hidden --><div class="plupload_progress plupload_right"><div class="plupload_progress_container"></div></div><div class="plupload_cell plupload_upload_status"></div><div class="plupload_clearer">&nbsp;</div></div></td><td class="plupload_file_status"><span class="plupload_total_status">0%</span></td><td class="plupload_file_size"><span class="plupload_total_file_size">0 kb</span></td><td class="plupload_file_action"></td></tr></table></div></div></div><input class="plupload_count" value="0" type="hidden"></div>')}var o={};i.widget("ui.plupload",{contents_bak:"",runtime:null,options:{browse_button_hover:"ui-state-hover",browse_button_active:"ui-state-active",dragdrop:!0,multiple_queues:!0,buttons:{browse:!0,start:!0,stop:!0},autostart:!1,sortable:!1,rename:!1,max_file_count:0},FILE_COUNT_ERROR:-9001,_create:function(){var t,e,s=this;t=this.element.attr("id"),t||(t=n.guid(),this.element.attr("id",t)),this.id=t,this.contents_bak=this.element.html(),r(this.element),this.container=i(".plupload_container",this.element).attr("id",t+"_container"),this.filelist=i(".plupload_filelist_content",this.container).attr({id:t+"_filelist",unselectable:"on"}),this.browse_button=i(".plupload_add",this.container).attr("id",t+"_browse"),this.start_button=i(".plupload_start",this.container).attr("id",t+"_start"),this.stop_button=i(".plupload_stop",this.container).attr("id",t+"_stop"),i.ui.button&&(this.browse_button.button({icons:{primary:"ui-icon-circle-plus"}}),this.start_button.button({icons:{primary:"ui-icon-circle-arrow-e"},disabled:!0}),this.stop_button.button({icons:{primary:"ui-icon-circle-close"}})),this.progressbar=i(".plupload_progress_container",this.container),i.ui.progressbar&&this.progressbar.progressbar(),this.counter=i(".plupload_count",this.element).attr({id:t+"_count",name:t+"_count"}),e=this.uploader=o[t]=new n.Uploader(i.extend({container:t,browse_button:t+"_browse"},this.options)),e.bind("Error",function(t,e){e.code===n.INIT_ERROR&&s.destroy()}),e.bind("Init",function(t,n){s.options.buttons.browse||(s.browse_button.button("disable").hide(),t.disableBrowse(!0)),s.options.buttons.start||s.start_button.button("disable").hide(),s.options.buttons.stop||s.stop_button.button("disable").hide(),!s.options.unique_names&&s.options.rename&&s._enableRenaming(),e.features.dragdrop&&s.options.dragdrop&&s._enableDragAndDrop(),s.container.attr("title",a("Using runtime: ")+(s.runtime=n.runtime)),s.start_button.click(function(t){i(this).button("option","disabled")||s.start(),t.preventDefault()}),s.stop_button.click(function(t){s.stop(),t.preventDefault()})}),s.options.max_file_count&&e.bind("FilesAdded",function(t,e){var n=[],i=e.length,r=t.files.length+i-s.options.max_file_count;r>0&&(n=e.splice(i-r,r),t.trigger("Error",{code:s.FILE_COUNT_ERROR,message:a("File count error."),file:n}))}),e.init(),e.bind("FilesAdded",function(t,e){s._trigger("selected",null,{up:t,files:e}),s.options.autostart&&setTimeout(function(){s.start()},10)}),e.bind("FilesRemoved",function(t,e){s._trigger("removed",null,{up:t,files:e})}),e.bind("QueueChanged",function(){s._updateFileList()}),e.bind("StateChanged",function(){s._handleState()}),e.bind("UploadFile",function(t,e){s._handleFileStatus(e)}),e.bind("FileUploaded",function(t,e){s._handleFileStatus(e),s._trigger("uploaded",null,{up:t,file:e})}),e.bind("UploadProgress",function(t,e){i("#"+e.id).find(".plupload_file_status").html(e.percent+"%").end().find(".plupload_file_size").html(n.formatSize(e.size)),s._handleFileStatus(e),s._updateTotalProgress(),s._trigger("progress",null,{up:t,file:e})}),e.bind("UploadComplete",function(t,e){s._trigger("complete",null,{up:t,files:e})}),e.bind("Error",function(t,e){var i,r,o=e.file;if(o){if(i="<strong>"+e.message+"</strong>",r=e.details)i+=" <br /><i>"+e.details+"</i>";else{switch(e.code){case n.FILE_EXTENSION_ERROR:r=a("File: %s").replace("%s",o.name);break;case n.FILE_SIZE_ERROR:r=a("File: %f, size: %s, max file size: %m").replace(/%([fsm])/g,function(t,e){switch(e){case"f":return o.name;case"s":return o.size;case"m":return n.parseSize(s.options.max_file_size)}});break;case s.FILE_COUNT_ERROR:r=a("Upload element accepts only %d file(s) at a time. Extra files were stripped.").replace("%d",s.options.max_file_count);break;case n.IMAGE_FORMAT_ERROR:r=n.translate("Image format either wrong or not supported.");break;case n.IMAGE_MEMORY_ERROR:r=n.translate("Runtime ran out of available memory.");break;case n.IMAGE_DIMENSIONS_ERROR:r=n.translate("Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.").replace(/%([swh])/g,function(e,n){switch(n){case"s":return t.runtime;case"w":return t.features.maxWidth;case"h":return t.features.maxHeight}});break;case n.HTTP_ERROR:r=a("Upload URL might be wrong or doesn't exist")}i+=" <br /><i>"+r+"</i>"}s.notify("error",i),s._trigger("error",null,{up:t,file:o,error:i})}})},_setOption:function(t,e){var n=this;"buttons"==t&&"object"==typeof e&&(e=i.extend(n.options.buttons,e),e.browse?(n.browse_button.button("enable").show(),up.disableBrowse(!1)):(n.browse_button.button("disable").hide(),up.disableBrowse(!0)),e.start?n.start_button.button("enable").show():n.start_button.button("disable").hide(),e.stop?n.start_button.button("enable").show():n.stop_button.button("disable").hide()),n.uploader.settings[t]=e},start:function(){this.uploader.start(),this._trigger("start",null)},stop:function(){this.uploader.stop(),this._trigger("stop",null)},getFile:function(t){var e;return e="number"==typeof t?this.uploader.files[t]:this.uploader.getFile(t)},removeFile:function(t){var e=this.getFile(t);e&&this.uploader.removeFile(e)},clearQueue:function(){this.uploader.splice()},getUploader:function(){return this.uploader},refresh:function(){this.uploader.refresh()},_handleState:function(){var t=this,e=this.uploader;e.state===n.STARTED?(i(t.start_button).button("disable"),i([]).add(t.stop_button).add(".plupload_started").removeClass("plupload_hidden"),i(".plupload_upload_status",t.element).html(a("Uploaded %d/%d files").replace("%d/%d",e.total.uploaded+"/"+e.files.length)),i(".plupload_header_content",t.element).addClass("plupload_header_content_bw")):(i([]).add(t.stop_button).add(".plupload_started").addClass("plupload_hidden"),t.options.multiple_queues&&(i(t.start_button).button("enable"),i(".plupload_header_content",t.element).removeClass("plupload_header_content_bw")),t._updateFileList())},_handleFileStatus:function(t){var e,a;if(i("#"+t.id).length){switch(t.status){case n.DONE:e="plupload_done",a="ui-icon ui-icon-circle-check";break;case n.FAILED:e="ui-state-error plupload_failed",a="ui-icon ui-icon-alert";break;case n.QUEUED:e="plupload_delete",a="ui-icon ui-icon-circle-minus";break;case n.UPLOADING:e="ui-state-highlight plupload_uploading",a="ui-icon ui-icon-circle-arrow-w";var r=i(".plupload_scroll",this.container),o=r.scrollTop(),s=r.height(),l=i("#"+t.id).position().top+i("#"+t.id).height();l>s&&r.scrollTop(o+l-s)}e+=" ui-state-default plupload_file",i("#"+t.id).attr("class",e).find(".ui-icon").attr("class",a)}},_updateTotalProgress:function(){var t=this.uploader;this.progressbar.progressbar("value",t.total.percent),this.element.find(".plupload_total_status").html(t.total.percent+"%").end().find(".plupload_total_file_size").html(n.formatSize(t.total.size)).end().find(".plupload_upload_status").html(a("Uploaded %d/%d files").replace("%d/%d",t.total.uploaded+"/"+t.files.length))},_updateFileList:function(){var t,e,r=this,o=this.uploader,s=this.filelist,l=0,d=this.id+"_";i.ui.sortable&&this.options.sortable&&i("tbody.ui-sortable",s).sortable("destroy"),s.empty(),i.each(o.files,function(a,c){e="",t=d+l,c.status===n.DONE&&(c.target_name&&(e+='<input type="hidden" name="'+t+'_tmpname" value="'+n.xmlEncode(c.target_name)+'" />'),e+='<input type="hidden" name="'+t+'_name" value="'+n.xmlEncode(c.name)+'" />',e+='<input type="hidden" name="'+t+'_status" value="'+(c.status===n.DONE?"done":"failed")+'" />',l++,r.counter.val(l)),s.append('<tr class="ui-state-default plupload_file" id="'+c.id+'"><td class="plupload_cell plupload_file_name"><span>'+c.name+'</span></td><td class="plupload_cell plupload_file_status">'+c.percent+'%</td><td class="plupload_cell plupload_file_size">'+n.formatSize(c.size)+'</td><td class="plupload_cell plupload_file_action"><div class="ui-icon"></div>'+e+"</td></tr>"),r._handleFileStatus(c),i("#"+c.id+".plupload_delete .ui-icon, #"+c.id+".plupload_done .ui-icon").click(function(t){i("#"+c.id).remove(),o.removeFile(c),t.preventDefault()}),r._trigger("updatelist",null,s)}),i(".ui-button-text",r.browse_button).html(0===o.total.queued?a("Add Files"):a("%d files queued").replace("%d",o.total.queued)),r.start_button.button(o.files.length===o.total.uploaded+o.total.failed?"disable":"enable"),s[0].scrollTop=s[0].scrollHeight,r._updateTotalProgress(),!o.files.length&&o.features.dragdrop&&o.settings.dragdrop?i("#"+t+"_filelist").append('<tr><td class="plupload_droptext">'+a("Drag files here.")+"</td></tr>"):r.options.sortable&&i.ui.sortable&&r._enableSortingList()},_enableRenaming:function(){var t=this;this.filelist.on("click",".plupload_delete .plupload_file_name span",function(e){var n,a,r,o=i(e.target),s="";n=t.uploader.getFile(o.parents("tr")[0].id),r=n.name,a=/^(.+)(\.[^.]+)$/.exec(r),a&&(r=a[1],s=a[2]),o.hide().after('<input class="plupload_file_rename" type="text" />'),o.next().val(r).focus().blur(function(){o.show().next().remove()}).keydown(function(t){var e=i(this);-1!==i.inArray(t.keyCode,[13,27])&&(t.preventDefault(),13===t.keyCode&&(n.name=e.val()+s,o.html(n.name)),e.blur())})})},_enableDragAndDrop:function(){this.filelist.append('<tr><td class="plupload_droptext">'+a("Drag files here.")+"</td></tr>"),this.filelist.parent().attr("id",this.id+"_dropbox"),this.uploader.settings.drop_element=this.options.drop_element=this.id+"_dropbox"},_enableSortingList:function(){var t=this;i("tbody tr",this.filelist).length<2||i("tbody",this.filelist).sortable({containment:"parent",items:".plupload_delete",helper:function(t,e){return e.clone(!0).find("td:not(.plupload_file_name)").remove().end().css("width","100%")},stop:function(){var e=[];i.each(i(this).sortable("toArray"),function(n,i){e[e.length]=t.uploader.getFile(i)}),e.unshift(e.length),e.unshift(0),Array.prototype.splice.apply(t.uploader.files,e)}})},notify:function(t,e){var n=i('<div class="plupload_message"><span class="plupload_message_close ui-icon ui-icon-circle-close" title="'+a("Close")+'"></span><p><span class="ui-icon"></span>'+e+"</p></div>");n.addClass("ui-state-"+("error"===t?"error":"highlight")).find("p .ui-icon").addClass("ui-icon-"+("error"===t?"alert":"info")).end().find(".plupload_message_close").click(function(){n.remove()}).end(),i(".plupload_header_content",this.container).append(n)},destroy:function(){i(".plupload_button",this.element).unbind(),i.ui.button&&i(".plupload_add, .plupload_start, .plupload_stop",this.container).button("destroy"),i.ui.progressbar&&this.progressbar.progressbar("destroy"),i.ui.sortable&&this.options.sortable&&i("tbody",this.filelist).sortable("destroy"),this.uploader.destroy(),this.element.empty().html(this.contents_bak),this.contents_bak="",i.Widget.prototype.destroy.apply(this)}})}(window,document,plupload,jQuery);var ti=-1,ei=1,ni=0;a.Diff,a.prototype.diff_main=function(t,e,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[ni,t]]:[];"undefined"==typeof n&&(n=!0);var r=n,o=this.diff_commonPrefix(t,e),s=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var d=this.diff_compute_(t,e,r,a);return s&&d.unshift([ni,s]),l&&d.push([ni,l]),this.diff_cleanupMerge(d),d},a.prototype.diff_compute_=function(t,e,n,i){var a;if(!t)return[[ei,e]];if(!e)return[[ti,t]];var r=t.length>e.length?t:e,o=t.length>e.length?e:t,s=r.indexOf(o);if(-1!=s)return a=[[ei,r.substring(0,s)],[ni,o],[ei,r.substring(s+o.length)]],t.length>e.length&&(a[0][0]=a[2][0]=ti),a;if(1==o.length)return[[ti,t],[ei,e]];var l=this.diff_halfMatch_(t,e);if(l){var d=l[0],c=l[1],u=l[2],h=l[3],p=l[4],f=this.diff_main(d,u,n,i),g=this.diff_main(c,h,n,i);return f.concat([[ni,p]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},a.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var a=i.lineArray,r=this.diff_main(t,e,!1,n);this.diff_charsToLines_(r,a),this.diff_cleanupSemantic(r),r.push([ni,""]);for(var o=0,s=0,l=0,d="",c="";o<r.length;){switch(r[o][0]){case ei:l++,c+=r[o][1];break;case ti:s++,d+=r[o][1];break;case ni:if(s>=1&&l>=1){r.splice(o-s-l,s+l),o=o-s-l;for(var i=this.diff_main(d,c,!1,n),u=i.length-1;u>=0;u--)r.splice(o,0,i[u]);o+=i.length}l=0,s=0,d="",c=""}o++}return r.pop(),r},a.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,a=e.length,r=Math.ceil((i+a)/2),o=r,s=2*r,l=new Array(s),d=new Array(s),c=0;s>c;c++)l[c]=-1,d[c]=-1;l[o+1]=0,d[o+1]=0;for(var u=i-a,h=u%2!=0,p=0,f=0,g=0,m=0,v=0;r>v&&!((new Date).getTime()>n);v++){for(var b=-v+p;v-f>=b;b+=2){var y,w=o+b;y=b==-v||b!=v&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var C=y-b;i>y&&a>C&&t.charAt(y)==e.charAt(C);)y++,C++;if(l[w]=y,y>i)f+=2;else if(C>a)p+=2;else if(h){var x=o+u-b;if(x>=0&&s>x&&-1!=d[x]){var _=i-d[x];if(y>=_)return this.diff_bisectSplit_(t,e,y,C,n)}}}for(var T=-v+g;v-m>=T;T+=2){var _,x=o+T;_=T==-v||T!=v&&d[x-1]<d[x+1]?d[x+1]:d[x-1]+1;for(var S=_-T;i>_&&a>S&&t.charAt(i-_-1)==e.charAt(a-S-1);)_++,S++;if(d[x]=_,_>i)m+=2;else if(S>a)g+=2;else if(!h){var w=o+u-T;if(w>=0&&s>w&&-1!=l[w]){var y=l[w],C=o+y-w;if(_=i-_,y>=_)return this.diff_bisectSplit_(t,e,y,C,n)}}}}return[[ti,t],[ei,e]]},a.prototype.diff_bisectSplit_=function(t,e,n,i,a){var r=t.substring(0,n),o=e.substring(0,i),s=t.substring(n),l=e.substring(i),d=this.diff_main(r,o,!1,a),c=this.diff_main(s,l,!1,a);return d.concat(c)},a.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,r=-1,o=i.length;r<t.length-1;){r=t.indexOf("\n",n),-1==r&&(r=t.length-1);var s=t.substring(n,r+1);n=r+1,(a.hasOwnProperty?a.hasOwnProperty(s):void 0!==a[s])?e+=String.fromCharCode(a[s]):(e+=String.fromCharCode(o),a[s]=o,i[o++]=s)}return e}var i=[],a={};i[0]="";var r=n(t),o=n(e);return{chars1:r,chars2:o,lineArray:i}},a.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],a=[],r=0;r<i.length;r++)a[r]=e[i.charCodeAt(r)];t[n][1]=a.join("")}},a.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),a=i,r=0;a>n;)t.substring(r,a)==e.substring(r,a)?(n=a,r=n):i=a,a=Math.floor((i-n)/2+n);return a},a.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),a=i,r=0;a>n;)t.substring(t.length-a,t.length-r)==e.substring(e.length-a,e.length-r)?(n=a,r=n):i=a,a=Math.floor((i-n)/2+n);return a},a.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):i>n&&(e=e.substring(0,n));var a=Math.min(n,i);if(t==e)return a;for(var r=0,o=1;;){var s=t.substring(a-o),l=e.indexOf(s);if(-1==l)return r;o+=l,(0==l||t.substring(a-o)==e.substring(0,o))&&(r=o,o++)}},a.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var i,a,r,s,l=t.substring(n,n+Math.floor(t.length/4)),d=-1,c="";-1!=(d=e.indexOf(l,d+1));){var u=o.diff_commonPrefix(t.substring(n),e.substring(d)),h=o.diff_commonSuffix(t.substring(0,n),e.substring(0,d));c.length<h+u&&(c=e.substring(d-h,d)+e.substring(d,d+u),i=t.substring(0,n-h),a=t.substring(n+u),r=e.substring(0,d-h),s=e.substring(d+u))}return 2*c.length>=t.length?[i,a,r,s,c]:null}if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,a=t.length>e.length?e:t;
if(i.length<4||2*a.length<i.length)return null;var r,o=this,s=n(i,a,Math.ceil(i.length/4)),l=n(i,a,Math.ceil(i.length/2));if(!s&&!l)return null;r=l?s&&s[4].length>l[4].length?s:l:s;var d,c,u,h;t.length>e.length?(d=r[0],c=r[1],u=r[2],h=r[3]):(u=r[0],h=r[1],d=r[2],c=r[3]);var p=r[4];return[d,c,u,h,p]},a.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,a=null,r=0,o=0,s=0,l=0,d=0;r<t.length;)t[r][0]==ni?(n[i++]=r,o=l,s=d,l=0,d=0,a=t[r][1]):(t[r][0]==ei?l+=t[r][1].length:d+=t[r][1].length,a&&a.length<=Math.max(o,s)&&a.length<=Math.max(l,d)&&(t.splice(n[i-1],0,[ti,a]),t[n[i-1]+1][0]=ei,i--,i--,r=i>0?n[i-1]:-1,o=0,s=0,l=0,d=0,a=null,e=!0)),r++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),r=1;r<t.length;){if(t[r-1][0]==ti&&t[r][0]==ei){var c=t[r-1][1],u=t[r][1],h=this.diff_commonOverlap_(c,u),p=this.diff_commonOverlap_(u,c);h>=p?(h>=c.length/2||h>=u.length/2)&&(t.splice(r,0,[ni,u.substring(0,h)]),t[r-1][1]=c.substring(0,c.length-h),t[r+1][1]=u.substring(h),r++):(p>=c.length/2||p>=u.length/2)&&(t.splice(r,0,[ni,c.substring(0,p)]),t[r-1][0]=ei,t[r-1][1]=u.substring(0,u.length-p),t[r+1][0]=ti,t[r+1][1]=c.substring(p),r++),r++}r++}},a.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(a.nonAlphaNumericRegex_),o=i.match(a.nonAlphaNumericRegex_),s=r&&n.match(a.whitespaceRegex_),l=o&&i.match(a.whitespaceRegex_),d=s&&n.match(a.linebreakRegex_),c=l&&i.match(a.linebreakRegex_),u=d&&t.match(a.blanklineEndRegex_),h=c&&e.match(a.blanklineStartRegex_);return u||h?5:d||c?4:r&&!s&&l?3:s||l?2:r||o?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==ni&&t[n+1][0]==ni){var i=t[n-1][1],r=t[n][1],o=t[n+1][1],s=this.diff_commonSuffix(i,r);if(s){var l=r.substring(r.length-s);i=i.substring(0,i.length-s),r=l+r.substring(0,r.length-s),o=l+o}for(var d=i,c=r,u=o,h=e(i,r)+e(r,o);r.charAt(0)===o.charAt(0);){i+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var p=e(i,r)+e(r,o);p>=h&&(h=p,d=i,c=r,u=o)}t[n-1][1]!=d&&(d?t[n-1][1]=d:(t.splice(n-1,1),n--),t[n][1]=c,u?t[n+1][1]=u:(t.splice(n+1,1),n--))}n++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,a=null,r=0,o=!1,s=!1,l=!1,d=!1;r<t.length;)t[r][0]==ni?(t[r][1].length<this.Diff_EditCost&&(l||d)?(n[i++]=r,o=l,s=d,a=t[r][1]):(i=0,a=null),l=d=!1):(t[r][0]==ti?d=!0:l=!0,a&&(o&&s&&l&&d||a.length<this.Diff_EditCost/2&&o+s+l+d==3)&&(t.splice(n[i-1],0,[ti,a]),t[n[i-1]+1][0]=ei,i--,a=null,o&&s?(l=d=!0,i=0):(i--,r=i>0?n[i-1]:-1,l=d=!1),e=!0)),r++;e&&this.diff_cleanupMerge(t)},a.prototype.diff_cleanupMerge=function(t){t.push([ni,""]);for(var e,n=0,i=0,a=0,r="",o="";n<t.length;)switch(t[n][0]){case ei:a++,o+=t[n][1],n++;break;case ti:i++,r+=t[n][1],n++;break;case ni:i+a>1?(0!==i&&0!==a&&(e=this.diff_commonPrefix(o,r),0!==e&&(n-i-a>0&&t[n-i-a-1][0]==ni?t[n-i-a-1][1]+=o.substring(0,e):(t.splice(0,0,[ni,o.substring(0,e)]),n++),o=o.substring(e),r=r.substring(e)),e=this.diff_commonSuffix(o,r),0!==e&&(t[n][1]=o.substring(o.length-e)+t[n][1],o=o.substring(0,o.length-e),r=r.substring(0,r.length-e))),0===i?t.splice(n-a,i+a,[ei,o]):0===a?t.splice(n-i,i+a,[ti,r]):t.splice(n-i-a,i+a,[ti,r],[ei,o]),n=n-i-a+(i?1:0)+(a?1:0)+1):0!==n&&t[n-1][0]==ni?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,a=0,i=0,r="",o=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)t[n-1][0]==ni&&t[n+1][0]==ni&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},a.prototype.diff_xIndex=function(t,e){var n,i=0,a=0,r=0,o=0;for(n=0;n<t.length&&(t[n][0]!==ei&&(i+=t[n][1].length),t[n][0]!==ti&&(a+=t[n][1].length),!(i>e));n++)r=i,o=a;return t.length!=n&&t[n][0]===ti?o:o+(e-r)},a.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,a=/>/g,r=/\n/g,o=0;o<t.length;o++){var s=t[o][0],l=t[o][1],d=l.replace(n,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(r,"&para;<br>");switch(s){case ei:e[o]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case ti:e[o]='<del style="background:#ffe6e6;">'+d+"</del>";break;case ni:e[o]="<span>"+d+"</span>"}}return e.join("")},a.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==ei&&(e[n]=t[n][1]);return e.join("")},a.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==ti&&(e[n]=t[n][1]);return e.join("")},a.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,a=0;a<t.length;a++){var r=t[a][0],o=t[a][1];switch(r){case ei:n+=o.length;break;case ti:i+=o.length;break;case ni:e+=Math.max(n,i),n=0,i=0}}return e+=Math.max(n,i)},a.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case ei:e[n]="+"+encodeURI(t[n][1]);break;case ti:e[n]="-"+t[n][1].length;break;case ni:e[n]="="+t[n][1].length}return e.join("	").replace(/%20/g," ")},a.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,a=0,r=e.split(/\t/g),o=0;o<r.length;o++){var s=r[o].substring(1);switch(r[o].charAt(0)){case"+":try{n[i++]=[ei,decodeURI(s)]}catch(l){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var d=parseInt(s,10);if(isNaN(d)||0>d)throw new Error("Invalid number in diff_fromDelta: "+s);var c=t.substring(a,a+=d);n[i++]="="==r[o].charAt(0)?[ni,c]:[ti,c];break;default:if(r[o])throw new Error("Invalid diff operation in diff_fromDelta: "+r[o])}}if(a!=t.length)throw new Error("Delta length ("+a+") does not equal source text length ("+t.length+").");return n},a.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},a.prototype.match_bitap_=function(t,e,n){function i(t,i){var a=t/e.length,o=Math.abs(n-i);return r.Match_Distance?a+o/r.Match_Distance:o?1:a}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(e),r=this,o=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(o=Math.min(i(0,s),o),s=t.lastIndexOf(e,n+e.length),-1!=s&&(o=Math.min(i(0,s),o)));var l=1<<e.length-1;s=-1;for(var d,c,u,h=e.length+t.length,p=0;p<e.length;p++){for(d=0,c=h;c>d;)i(p,n+c)<=o?d=c:h=c,c=Math.floor((h-d)/2+d);h=c;var f=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;v>=f;v--){var b=a[t.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&b:(m[v+1]<<1|1)&b|((u[v+1]|u[v])<<1|1)|u[v+1],m[v]&l){var y=i(p,v-1);if(o>=y){if(o=y,s=v-1,!(s>n))break;f=Math.max(1,2*n-s)}}}if(i(p+1,n)>o)break;u=m}return s},a.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},a.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var a=e.substring(t.start2-i,t.start2);a&&t.diffs.unshift([ni,a]);var r=e.substring(t.start2+t.length1,t.start2+t.length1+i);r&&t.diffs.push([ni,r]),t.start1-=a.length,t.start2-=a.length,t.length1+=a.length+r.length,t.length2+=a.length+r.length}},a.prototype.patch_make=function(t,e,n){var i,r;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof n)i=t,r=this.diff_main(i,e,!0),r.length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(t&&"object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof n)r=t,i=this.diff_text1(r);else if("string"==typeof t&&e&&"object"==typeof e&&"undefined"==typeof n)i=t,r=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,r=n}if(0===r.length)return[];for(var o=[],s=new a.patch_obj,l=0,d=0,c=0,u=i,h=i,p=0;p<r.length;p++){var f=r[p][0],g=r[p][1];switch(l||f===ni||(s.start1=d,s.start2=c),f){case ei:s.diffs[l++]=r[p],s.length2+=g.length,h=h.substring(0,c)+g+h.substring(c);break;case ti:s.length1+=g.length,s.diffs[l++]=r[p],h=h.substring(0,c)+h.substring(c+g.length);break;case ni:g.length<=2*this.Patch_Margin&&l&&r.length!=p+1?(s.diffs[l++]=r[p],s.length1+=g.length,s.length2+=g.length):g.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,u),o.push(s),s=new a.patch_obj,l=0,u=h,d=c)}f!==ei&&(d+=g.length),f!==ti&&(c+=g.length)}return l&&(this.patch_addContext_(s,u),o.push(s)),o},a.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=new a.patch_obj;r.diffs=[];for(var o=0;o<i.diffs.length;o++)r.diffs[o]=i.diffs[o].slice();r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[n]=r}return e},a.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,a=[],r=0;r<t.length;r++){var o,s=t[r].start2+i,l=this.diff_text1(t[r].diffs),d=-1;if(l.length>this.Match_MaxBits?(o=this.match_main(e,l.substring(0,this.Match_MaxBits),s),-1!=o&&(d=this.match_main(e,l.substring(l.length-this.Match_MaxBits),s+l.length-this.Match_MaxBits),(-1==d||o>=d)&&(o=-1))):o=this.match_main(e,l,s),-1==o)a[r]=!1,i-=t[r].length2-t[r].length1;else{a[r]=!0,i=o-s;var c;if(c=-1==d?e.substring(o,o+l.length):e.substring(o,d+this.Match_MaxBits),l==c)e=e.substring(0,o)+this.diff_text2(t[r].diffs)+e.substring(o+l.length);else{var u=this.diff_main(l,c,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(u)/l.length>this.Patch_DeleteThreshold)a[r]=!1;else{this.diff_cleanupSemanticLossless(u);for(var h,p=0,f=0;f<t[r].diffs.length;f++){var g=t[r].diffs[f];g[0]!==ni&&(h=this.diff_xIndex(u,p)),g[0]===ei?e=e.substring(0,o+h)+g[1]+e.substring(o+h):g[0]===ti&&(e=e.substring(0,o+h)+e.substring(o+this.diff_xIndex(u,p+g[1].length))),g[0]!==ti&&(p+=g[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,a]},a.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;e>=i;i++)n+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var a=t[0],r=a.diffs;if(0==r.length||r[0][0]!=ni)r.unshift([ni,n]),a.start1-=e,a.start2-=e,a.length1+=e,a.length2+=e;else if(e>r[0][1].length){var o=e-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],a.start1-=o,a.start2-=o,a.length1+=o,a.length2+=o}if(a=t[t.length-1],r=a.diffs,0==r.length||r[r.length-1][0]!=ni)r.push([ni,n]),a.length1+=e,a.length2+=e;else if(e>r[r.length-1][1].length){var o=e-r[r.length-1][1].length;r[r.length-1][1]+=n.substring(0,o),a.length1+=o,a.length2+=o}return n},a.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var r=i.start1,o=i.start2,s="";0!==i.diffs.length;){var l=new a.patch_obj,d=!0;for(l.start1=r-s.length,l.start2=o-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push([ni,s]));0!==i.diffs.length&&l.length1<e-this.Patch_Margin;){var c=i.diffs[0][0],u=i.diffs[0][1];c===ei?(l.length2+=u.length,o+=u.length,l.diffs.push(i.diffs.shift()),d=!1):c===ti&&1==l.diffs.length&&l.diffs[0][0]==ni&&u.length>2*e?(l.length1+=u.length,r+=u.length,d=!1,l.diffs.push([c,u]),i.diffs.shift()):(u=u.substring(0,e-l.length1-this.Patch_Margin),l.length1+=u.length,r+=u.length,c===ni?(l.length2+=u.length,o+=u.length):d=!1,l.diffs.push([c,u]),u==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(u.length))}s=this.diff_text2(l.diffs),s=s.substring(s.length-this.Patch_Margin);var h=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==h&&(l.length1+=h.length,l.length2+=h.length,0!==l.diffs.length&&l.diffs[l.diffs.length-1][0]===ni?l.diffs[l.diffs.length-1][1]+=h:l.diffs.push([ni,h])),d||t.splice(++n,0,l)}}},a.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},a.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var o=n[i].match(r);if(!o)throw new Error("Invalid patch string: "+n[i]);var s=new a.patch_obj;for(e.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;i<n.length;){var l=n[i].charAt(0);try{var d=decodeURI(n[i].substring(1))}catch(c){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==l)s.diffs.push([ti,d]);else if("+"==l)s.diffs.push([ei,d]);else if(" "==l)s.diffs.push([ni,d]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+d)}i++}}return e},a.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},a.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+t+" +"+e+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case ei:n="+";break;case ti:n="-";break;case ni:n=" "}i[a+1]=n+encodeURI(this.diffs[a][1])+"\n"}return i.join("").replace(/%20/g," ")},this.diff_match_patch=a,this.DIFF_DELETE=ti,this.DIFF_INSERT=ei,this.DIFF_EQUAL=ni,function(t){var e,n,i,a=t(window),r={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}},o=function(){i=t("body"),a=t(window),a.bind("resize",function(){n&&clearTimeout(n),n=setTimeout(t.pnotify_position_all,10)})};document.body?o():t(o),t.extend({pnotify_remove_all:function(){var e=a.data("pnotify");e&&e.length&&t.each(e,function(){this.pnotify_remove&&this.pnotify_remove()})},pnotify_position_all:function(){n&&clearTimeout(n),n=null;var e=a.data("pnotify");e&&e.length&&(t.each(e,function(){var t=this.opts.stack;t&&(t.nextpos1=t.firstpos1,t.nextpos2=t.firstpos2,t.addpos2=0,t.animation=!0)}),t.each(e,function(){this.pnotify_position()}))},pnotify:function(o){var s,l;"object"!=typeof o?(l=t.extend({},t.pnotify.defaults),l.text=o):l=t.extend({},t.pnotify.defaults,o);for(var d in l)"string"==typeof d&&d.match(/^pnotify_/)&&(l[d.replace(/^pnotify_/,"")]=l[d]);if(l.before_init&&l.before_init(l)===!1)return null;var c,h=function(e,n){f.css("display","none");var i=document.elementFromPoint(e.clientX,e.clientY);f.css("display","block");var a=t(i),r=a.css("cursor");f.css("cursor","auto"!=r?r:"default"),c&&c.get(0)==i||(c&&(u.call(c.get(0),"mouseleave",e.originalEvent),u.call(c.get(0),"mouseout",e.originalEvent)),u.call(i,"mouseenter",e.originalEvent),u.call(i,"mouseover",e.originalEvent)),u.call(i,n,e.originalEvent),c=a},p=r[l.styling],f=t("<div />",{"class":"ui-pnotify "+l.addclass,css:{display:"none"},mouseenter:function(t){l.nonblock&&t.stopPropagation(),l.mouse_reset&&"out"==s&&(f.stop(!0),s="in",f.css("height","auto").animate({width:l.width,opacity:l.nonblock?l.nonblock_opacity:l.opacity},"fast")),l.nonblock&&f.stop().animate({opacity:l.nonblock_opacity},"fast"),l.hide&&l.mouse_reset&&f.pnotify_cancel_remove(),l.sticker&&!l.nonblock&&f.sticker.trigger("pnotify_icon").css("visibility","visible"),l.closer&&!l.nonblock&&f.closer.css("visibility","visible")},mouseleave:function(e){l.nonblock&&e.stopPropagation(),c=null,f.css("cursor","auto"),l.nonblock&&"out"!=s&&f.stop().animate({opacity:l.opacity},"fast"),l.hide&&l.mouse_reset&&f.pnotify_queue_remove(),l.sticker_hover&&f.sticker.css("visibility","hidden"),l.closer_hover&&f.closer.css("visibility","hidden"),t.pnotify_position_all()},mouseover:function(t){l.nonblock&&t.stopPropagation()},mouseout:function(t){l.nonblock&&t.stopPropagation()},mousemove:function(t){l.nonblock&&(t.stopPropagation(),h(t,"onmousemove"))},mousedown:function(t){l.nonblock&&(t.stopPropagation(),t.preventDefault(),h(t,"onmousedown"))},mouseup:function(t){l.nonblock&&(t.stopPropagation(),t.preventDefault(),h(t,"onmouseup"))},click:function(t){l.nonblock&&(t.stopPropagation(),h(t,"onclick"))},dblclick:function(t){l.nonblock&&(t.stopPropagation(),h(t,"ondblclick"))}});f.opts=l;var g;g=l.state?"ui-state-"+l.state:p[l.type]?p[l.type]:p.notice,f.container=t("<div />",{"class":p.container+" ui-pnotify-container "+g}).appendTo(f),""!=l.cornerclass&&f.container.removeClass("ui-corner-all").addClass(l.cornerclass),l.shadow&&f.container.addClass("ui-pnotify-shadow"),f.pnotify_version="1.2.2",f.pnotify=function(e){var n=l;"string"==typeof e?l.text=e:l=t.extend({},l,e);for(var i in l)"string"==typeof i&&i.match(/^pnotify_/)&&(l[i.replace(/^pnotify_/,"")]=l[i]);return f.opts=l,l.cornerclass!=n.cornerclass&&f.container.removeClass("ui-corner-all").addClass(l.cornerclass),l.shadow!=n.shadow&&(l.shadow?f.container.addClass("ui-pnotify-shadow"):f.container.removeClass("ui-pnotify-shadow")),l.addclass===!1?f.removeClass(n.addclass):l.addclass!==n.addclass&&f.removeClass(n.addclass).addClass(l.addclass),l.title===!1?f.title_container.slideUp("fast"):l.title!==n.title&&(l.title_escape?f.title_container.text(l.title).slideDown(200):f.title_container.html(l.title).slideDown(200)),l.text===!1?f.text_container.slideUp("fast"):l.text!==n.text&&(l.text_escape?f.text_container.text(l.text).slideDown(200):f.text_container.html(l.insert_brs?String(l.text).replace(/\n/g,"<br />"):l.text).slideDown(200)),f.pnotify_history=l.history,f.pnotify_hide=l.hide,l.type!=n.type&&f.container.removeClass(p.error+" "+p.notice+" "+p.success+" "+p.info).addClass("error"==l.type?p.error:"info"==l.type?p.info:"success"==l.type?p.success:p.notice),(l.icon!==n.icon||l.icon===!0&&l.type!=n.type)&&(f.container.find("div.ui-pnotify-icon").remove(),l.icon!==!1&&t("<div />",{"class":"ui-pnotify-icon"}).append(t("<span />",{"class":l.icon===!0?"error"==l.type?p.error_icon:"info"==l.type?p.info_icon:"success"==l.type?p.success_icon:p.notice_icon:l.icon})).prependTo(f.container)),l.width!==n.width&&f.animate({width:l.width}),l.min_height!==n.min_height&&f.container.animate({minHeight:l.min_height}),l.opacity!==n.opacity&&f.fadeTo(l.animate_speed,l.opacity),!l.closer||l.nonblock?f.closer.css("display","none"):f.closer.css("display","block"),!l.sticker||l.nonblock?f.sticker.css("display","none"):f.sticker.css("display","block"),f.sticker.trigger("pnotify_icon"),l.sticker_hover?f.sticker.css("visibility","hidden"):l.nonblock||f.sticker.css("visibility","visible"),l.closer_hover?f.closer.css("visibility","hidden"):l.nonblock||f.closer.css("visibility","visible"),l.hide?n.hide||f.pnotify_queue_remove():f.pnotify_cancel_remove(),f.pnotify_queue_position(),f},f.pnotify_position=function(t){var e=f.opts.stack;if(e){e.nextpos1||(e.nextpos1=e.firstpos1),e.nextpos2||(e.nextpos2=e.firstpos2),e.addpos2||(e.addpos2=0);var n="none"==f.css("display");if(!n||t){var i,r,o,s={};switch(e.dir1){case"down":o="top";break;case"up":o="bottom";break;case"left":o="right";break;case"right":o="left"}i=parseInt(f.css(o)),isNaN(i)&&(i=0),"undefined"!=typeof e.firstpos1||n||(e.firstpos1=i,e.nextpos1=e.firstpos1);var l;switch(e.dir2){case"down":l="top";break;case"up":l="bottom";break;case"left":l="right";break;case"right":l="left"}if(r=parseInt(f.css(l)),isNaN(r)&&(r=0),"undefined"!=typeof e.firstpos2||n||(e.firstpos2=r,e.nextpos2=e.firstpos2),("down"==e.dir1&&e.nextpos1+f.height()>a.height()||"up"==e.dir1&&e.nextpos1+f.height()>a.height()||"left"==e.dir1&&e.nextpos1+f.width()>a.width()||"right"==e.dir1&&e.nextpos1+f.width()>a.width())&&(e.nextpos1=e.firstpos1,e.nextpos2+=e.addpos2+("undefined"==typeof e.spacing2?25:e.spacing2),e.addpos2=0),e.animation&&e.nextpos2<r)switch(e.dir2){case"down":s.top=e.nextpos2+"px";break;case"up":s.bottom=e.nextpos2+"px";break;case"left":s.right=e.nextpos2+"px";break;case"right":s.left=e.nextpos2+"px"}else e.nextpos2&&f.css(l,e.nextpos2+"px");switch(e.dir2){case"down":case"up":f.outerHeight(!0)>e.addpos2&&(e.addpos2=f.height());break;case"left":case"right":f.outerWidth(!0)>e.addpos2&&(e.addpos2=f.width())}if(e.nextpos1)if(e.animation&&(i>e.nextpos1||s.top||s.bottom||s.right||s.left))switch(e.dir1){case"down":s.top=e.nextpos1+"px";break;case"up":s.bottom=e.nextpos1+"px";break;case"left":s.right=e.nextpos1+"px";break;case"right":s.left=e.nextpos1+"px"}else f.css(o,e.nextpos1+"px");switch((s.top||s.bottom||s.right||s.left)&&f.animate(s,{duration:this.opts.position_animate_speed,queue:!1}),e.dir1){case"down":case"up":e.nextpos1+=f.height()+("undefined"==typeof e.spacing1?25:e.spacing1);break;case"left":case"right":e.nextpos1+=f.width()+("undefined"==typeof e.spacing1?25:e.spacing1)}}}},f.pnotify_queue_position=function(e){n&&clearTimeout(n),e||(e=10),n=setTimeout(t.pnotify_position_all,e)},f.pnotify_display=function(){m=a.data("pnotify"),m&&m.length>l.maxonscreen&&t.each(m.slice(0,m.length-l.maxonscreen),function(){this.pnotify_remove&&this.pnotify_remove()}),f.parent().length||f.appendTo(i),l.before_open&&l.before_open(f)===!1||("top"!=l.stack.push&&f.pnotify_position(!0),"fade"==l.animation||"fade"==l.animation.effect_in?f.show().fadeTo(0,0).hide():1!=l.opacity&&f.show().fadeTo(0,l.opacity).hide(),f.animate_in(function(){l.after_open&&l.after_open(f),f.pnotify_queue_position(),l.hide&&f.pnotify_queue_remove()}))},f.pnotify_remove=function(){f.timer&&(window.clearTimeout(f.timer),f.timer=null),l.before_close&&l.before_close(f)===!1||f.animate_out(function(){l.after_close&&l.after_close(f)===!1||(f.pnotify_queue_position(),l.remove&&f.detach())})},f.animate_in=function(t){s="in";var e;e="undefined"!=typeof l.animation.effect_in?l.animation.effect_in:l.animation,"none"==e?(f.show(),t()):"show"==e?f.show(l.animate_speed,t):"fade"==e?f.show().fadeTo(l.animate_speed,l.opacity,t):"slide"==e?f.slideDown(l.animate_speed,t):"function"==typeof e?e("in",t,f):f.show(e,"object"==typeof l.animation.options_in?l.animation.options_in:{},l.animate_speed,t)},f.animate_out=function(t){s="out";var e;e="undefined"!=typeof l.animation.effect_out?l.animation.effect_out:l.animation,"none"==e?(f.hide(),t()):"show"==e?f.hide(l.animate_speed,t):"fade"==e?f.fadeOut(l.animate_speed,t):"slide"==e?f.slideUp(l.animate_speed,t):"function"==typeof e?e("out",t,f):f.hide(e,"object"==typeof l.animation.options_out?l.animation.options_out:{},l.animate_speed,t)},f.pnotify_cancel_remove=function(){f.timer&&window.clearTimeout(f.timer)},f.pnotify_queue_remove=function(){f.pnotify_cancel_remove(),f.timer=window.setTimeout(function(){f.pnotify_remove()},isNaN(l.delay)?0:l.delay)},f.closer=t("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:l.closer_hover?"hidden":"visible"},click:function(){f.pnotify_remove(),f.sticker.css("visibility","hidden"),f.closer.css("visibility","hidden")}}).append(t("<span />",{"class":p.closer,title:l.labels.close})).appendTo(f.container),(!l.closer||l.nonblock)&&f.closer.css("display","none"),f.sticker=t("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:l.sticker_hover?"hidden":"visible"},click:function(){l.hide=!l.hide,l.hide?f.pnotify_queue_remove():f.pnotify_cancel_remove(),t(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){t(this).children().removeClass(p.pin_up+" "+p.pin_down).addClass(l.hide?p.pin_up:p.pin_down)}).append(t("<span />",{"class":p.pin_up,title:l.labels.stick})).appendTo(f.container),(!l.sticker||l.nonblock)&&f.sticker.css("display","none"),l.icon!==!1&&t("<div />",{"class":"ui-pnotify-icon"}).append(t("<span />",{"class":l.icon===!0?"error"==l.type?p.error_icon:"info"==l.type?p.info_icon:"success"==l.type?p.success_icon:p.notice_icon:l.icon})).prependTo(f.container),f.title_container=t("<span />",{"class":"ui-pnotify-title"}).appendTo(f.container),l.title===!1?f.title_container.hide():l.title_escape?f.title_container.text(l.title):f.title_container.html(l.title),f.text_container=t("<div />",{"class":"ui-pnotify-text"}).appendTo(f.container),l.text===!1?f.text_container.hide():l.text_escape?f.text_container.text(l.text):f.text_container.html(l.insert_brs?String(l.text).replace(/\n/g,"<br />"):l.text),"string"==typeof l.width&&f.css("width",l.width),"string"==typeof l.min_height&&f.container.css("min-height",l.min_height),f.pnotify_history=l.history,f.pnotify_hide=l.hide;var m=a.data("pnotify");if((null==m||"object"!=typeof m)&&(m=[]),m="top"==l.stack.push?t.merge([f],m):t.merge(m,[f]),a.data("pnotify",m),"top"==l.stack.push&&f.pnotify_queue_position(1),l.after_init&&l.after_init(f),l.history){var v=a.data("pnotify_history");if("undefined"==typeof v){v=t("<div />",{"class":"ui-pnotify-history-container "+p.hi_menu,mouseleave:function(){v.animate({top:"-"+e+"px"},{duration:100,queue:!1})}}).append(t("<div />",{"class":"ui-pnotify-history-header",text:l.labels.redisplay})).append(t("<button />",{"class":"ui-pnotify-history-all "+p.hi_btn,text:l.labels.all,mouseenter:function(){t(this).addClass(p.hi_btnhov)},mouseleave:function(){t(this).removeClass(p.hi_btnhov)},click:function(){return t.each(m,function(){this.pnotify_history&&(this.is(":visible")?this.pnotify_hide&&this.pnotify_queue_remove():this.pnotify_display&&this.pnotify_display())}),!1}})).append(t("<button />",{"class":"ui-pnotify-history-last "+p.hi_btn,text:l.labels.last,mouseenter:function(){t(this).addClass(p.hi_btnhov)},mouseleave:function(){t(this).removeClass(p.hi_btnhov)},click:function(){var t,e=-1;do{if(t=-1==e?m.slice(e):m.slice(e,e+1),!t[0])break;e--}while(!t[0].pnotify_history||t[0].is(":visible"));return t[0]?(t[0].pnotify_display&&t[0].pnotify_display(),!1):!1}})).appendTo(i);var b=t("<span />",{"class":"ui-pnotify-history-pulldown "+p.hi_hnd,mouseenter:function(){v.animate({top:"0"},{duration:100,queue:!1})}}).appendTo(v);e=b.offset().top+2,v.css({top:"-"+e+"px"}),a.data("pnotify_history",v)}}return l.stack.animation=!1,l.auto_display&&f.pnotify_display(),f}});var s=/^on/,l=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,d=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,c=/^(scroll|resize|(un)?load|abort|error)$/,u=function(e,n){var i;if(e=e.toLowerCase(),document.createEvent&&this.dispatchEvent){if(e=e.replace(s,""),e.match(l)?(t(this).offset(),i=document.createEvent("MouseEvents"),i.initMouseEvent(e,n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)):e.match(d)?(i=document.createEvent("UIEvents"),i.initUIEvent(e,n.bubbles,n.cancelable,n.view,n.detail)):e.match(c)&&(i=document.createEvent("HTMLEvents"),i.initEvent(e,n.bubbles,n.cancelable)),!i)return;this.dispatchEvent(i)}else e.match(s)||(e="on"+e),i=document.createEventObject(n),this.fireEvent(e,i)};t.pnotify.defaults={title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"bootstrap",addclass:"",cornerclass:"",nonblock:!1,nonblock_opacity:.2,history:!0,maxonscreen:1/0,auto_display:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,animation:"fade",animate_speed:"slow",position_animate_speed:500,opacity:1,shadow:!0,closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25},labels:{redisplay:"Redisplay",all:"All",last:"Last",close:"Close",stick:"Stick"}}}(jQuery),"document"in self&&!("classList"in document.createElement("_")&&"classList"in document.createElementNS("http://www.w3.org/2000/svg","svg"))&&!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],a=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},d=function(t){for(var e=r.call(t.getAttribute("class")),n=e?e.split(/\s+/):[],i=0,a=n.length;a>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=d[n]=[],u=function(){return new d(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",-1!==l(this,t)},c.add=function(){var t,e=arguments,n=0,i=e.length,a=!1;do t=e[n]+"",-1===l(this,t)&&(this.push(t),a=!0);while(++n<i);a&&this._updateClassName()},c.remove=function(){var t,e=arguments,n=0,i=e.length,a=!1;do{t=e[n]+"";var r=l(this,t);-1!==r&&(this.splice(r,1),a=!0)}while(++n<i);a&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),!n},c.toString=function(){return this.join(" ")},a.defineProperty){var h={get:u,enumerable:!0,configurable:!0};try{a.defineProperty(i,e,h)}catch(p){-2146823252===p.number&&(h.enumerable=!1,a.defineProperty(i,e,h))}}else a[n].__defineGetter__&&i.__defineGetter__(e,u)}}(self);var ai=function(){function t(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function e(e){var n=!1,i=function(){n||(n=!0,e())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"></script>');var a=document.getElementById("__onload_ie_pixastic__");a.onreadystatechange=function(){"complete"==a.readyState&&(a.parentNode.removeChild(a),i())},document.addEventListener&&document.addEventListener("DOMContentLoaded",i,!1),t(window,"load",i)}function n(){for(var t=a("pixastic",null,"img"),e=a("pixastic",null,"canvas"),n=t.concat(e),i=0;i<n.length;i++)!function(){for(var t=n[i],e=[],a=t.className.split(" "),r=0;r<a.length;r++){var o=a[r];if("pixastic-"==o.substring(0,9)){var s=o.substring(9);""!=s&&e.push(s)}}if(e.length)if("img"==t.tagName.toLowerCase()){var l=new Image;if(l.src=t.src,l.complete)for(var d=0;d<e.length;d++){var c=ai.applyAction(t,t,e[d],null);c&&(t=c)}else l.onload=function(){for(var n=0;n<e.length;n++){var i=ai.applyAction(t,t,e[n],null);i&&(t=i)}}}else setTimeout(function(){for(var n=0;n<e.length;n++){var i=ai.applyAction(t,t,e[n],null);i&&(t=i)}},1)}()}function a(t,e,n){var a=new Array;null==e&&(e=document),null==n&&(n="*");var r=e.getElementsByTagName(n),o=r.length,s=new RegExp("(^|\\s)"+t+"(\\s|$)");for(i=0,j=0;o>i;i++)s.test(r[i].className)&&(a[j]=r[i],j++);return a}function r(t,e){if(ai.debug)try{switch(e){case"warn":console.warn("Pixastic:",t);break;case"error":console.error("Pixastic:",t);break;default:console.log("Pixastic:",t)}}catch(n){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&e(n);var o=function(){var t=document.createElement("canvas"),e=!1;try{e=!("function"!=typeof t.getContext||!t.getContext("2d"))}catch(n){}return function(){return e}}(),s=function(){var t,e=document.createElement("canvas"),n=!1;
try{"function"==typeof e.getContext&&(t=e.getContext("2d"))&&(n="function"==typeof t.getImageData)}catch(i){}return function(){return n}}(),l=function(){var t=!1,e=document.createElement("canvas");if(o()&&s()){e.width=e.height=1;var n=e.getContext("2d");n.fillStyle="rgb(255,0,0)",n.fillRect(0,0,1,1);var i=document.createElement("canvas");i.width=i.height=1;var a=i.getContext("2d");a.fillStyle="rgb(0,0,255)",a.fillRect(0,0,1,1),n.globalAlpha=.5,n.drawImage(i,0,0);var r=n.getImageData(0,0,1,1).data;t=255!=r[2]}return function(){return t}}();return{parseOnLoad:!1,debug:!1,applyAction:function(t,e,n,i){i=i||{};var a="canvas"==t.tagName.toLowerCase();if(a&&ai.Client.isIE())return ai.debug&&r("Tried to process a canvas element but browser is IE."),!1;var o,s,l=!1;ai.Client.hasCanvas()&&(l=!!i.resultCanvas,o=i.resultCanvas||document.createElement("canvas"),s=o.getContext("2d"));var d=t.offsetWidth,c=t.offsetHeight;if(a&&(d=t.width,c=t.height),0==d||0==c){if(null!=t.parentNode)return void(ai.debug&&r("Image has 0 width and/or height."));var u=t.style.position,h=t.style.left;t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),d=t.offsetWidth,c=t.offsetHeight,document.body.removeChild(t),t.style.position=u,t.style.left=h}if(n.indexOf("(")>-1){var p=n;n=p.substr(0,p.indexOf("("));var f=p.match(/\((.*?)\)/);if(f[1]){f=f[1].split(";");for(var g=0;g<f.length;g++)if(thisArg=f[g].split("="),2==thisArg.length)if("rect"==thisArg[0]){var m=thisArg[1].split(",");i[thisArg[0]]={left:parseInt(m[0],10)||0,top:parseInt(m[1],10)||0,width:parseInt(m[2],10)||0,height:parseInt(m[3],10)||0}}else i[thisArg[0]]=thisArg[1]}}i.rect?(i.rect.left=Math.round(i.rect.left),i.rect.top=Math.round(i.rect.top),i.rect.width=Math.round(i.rect.width),i.rect.height=Math.round(i.rect.height)):i.rect={left:0,top:0,width:d,height:c};var v=!1;if(ai.Actions[n]&&"function"==typeof ai.Actions[n].process&&(v=!0),!v)return ai.debug&&r('Invalid action "'+n+'". Maybe file not included?'),!1;if(!ai.Actions[n].checkSupport())return ai.debug&&r('Action "'+n+'" not supported by this browser.'),!1;ai.Client.hasCanvas()?(o!==t&&(o.width=d,o.height=c),l||(o.style.width=d+"px",o.style.height=c+"px"),s.drawImage(e,0,0,d,c),t.__pixastic_org_image?(o.__pixastic_org_image=t.__pixastic_org_image,o.__pixastic_org_width=t.__pixastic_org_width,o.__pixastic_org_height=t.__pixastic_org_height):(o.__pixastic_org_image=t,o.__pixastic_org_width=d,o.__pixastic_org_height=c)):ai.Client.isIE()&&"undefined"==typeof t.__pixastic_org_style&&(t.__pixastic_org_style=t.style.cssText);var b={image:t,canvas:o,width:d,height:c,useData:!0,options:i},y=ai.Actions[n].process(b);return y?ai.Client.hasCanvas()?(b.useData&&ai.Client.hasCanvasImageData()&&(o.getContext("2d").putImageData(b.canvasData,i.rect.left,i.rect.top),o.getContext("2d").fillRect(0,0,0,0)),i.leaveDOM||(o.title=t.title,o.imgsrc=t.imgsrc,a||(o.alt=t.alt),a||(o.imgsrc=t.src),o.className=t.className,o.style.cssText=t.style.cssText,o.name=t.name,o.tabIndex=t.tabIndex,o.id=t.id,t.parentNode&&t.parentNode.replaceChild&&t.parentNode.replaceChild(o,t)),i.resultCanvas=o,o):t:!1},prepareData:function(t,e){var n=t.canvas.getContext("2d"),i=t.options.rect,a=n.getImageData(i.left,i.top,i.width,i.height),r=a.data;return e||(t.canvasData=a),r},process:function(t,e,n,i){if("img"==t.tagName.toLowerCase()){var a=new Image;if(a.src=t.src,a.complete){var r=ai.applyAction(t,a,e,n);return i&&i(r),r}a.onload=function(){var r=ai.applyAction(t,a,e,n);i&&i(r)}}if("canvas"==t.tagName.toLowerCase()){var r=ai.applyAction(t,t,e,n);return i&&i(r),r}},revert:function(t){if(ai.Client.hasCanvas()){if("canvas"==t.tagName.toLowerCase()&&t.__pixastic_org_image)return t.width=t.__pixastic_org_width,t.height=t.__pixastic_org_height,t.getContext("2d").drawImage(t.__pixastic_org_image,0,0),t.parentNode&&t.parentNode.replaceChild&&t.parentNode.replaceChild(t.__pixastic_org_image,t),t}else ai.Client.isIE()&&"undefined"!=typeof t.__pixastic_org_style&&(t.style.cssText=t.__pixastic_org_style)},Client:{hasCanvas:o,hasCanvasImageData:s,hasGlobalAlpha:l,isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();ai.Actions.blur={process:function(t){if("undefined"==typeof t.options.fixMargin&&(t.options.fixMargin=!0),ai.Client.hasCanvasImageData()){for(var e=ai.prepareData(t),n=ai.prepareData(t,!0),i=[[0,1,0],[1,2,1],[0,1,0]],a=0,r=0;3>r;r++)for(var o=0;3>o;o++)a+=i[r][o];a=1/(2*a);var s=t.options.rect,l=s.width,d=s.height,c=4*l,u=d;do{var h=(u-1)*c,p=1==u?0:u-2,f=u==d?u-1:u,g=p*l*4,m=f*l*4,v=l;do{var b=h+(4*v-4),y=g+4*(1==v?0:v-2),w=m+4*(v==l?v-1:v);e[b]=(2*(n[y]+n[b-4]+n[b+4]+n[w])+4*n[b])*a,e[b+1]=(2*(n[y+1]+n[b-3]+n[b+5]+n[w+1])+4*n[b+1])*a,e[b+2]=(2*(n[y+2]+n[b-2]+n[b+6]+n[w+2])+4*n[b+2])*a}while(--v)}while(--u);return!0}return ai.Client.isIE()?(t.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius=1.5)",t.options.fixMargin&&(t.image.style.marginLeft=(parseInt(t.image.style.marginLeft,10)||0)-2+"px",t.image.style.marginTop=(parseInt(t.image.style.marginTop,10)||0)-2+"px"),!0):void 0},checkSupport:function(){return ai.Client.hasCanvasImageData()||ai.Client.isIE()}},ai.Actions.brightness={process:function(t){var e=parseInt(t.options.brightness,10)||0,n=parseFloat(t.options.contrast)||0,i=!(!t.options.legacy||"false"==t.options.legacy);if(i)e=Math.min(150,Math.max(-150,e));else var a=1+Math.min(150,Math.max(-150,e))/150;if(n=Math.max(0,n+1),ai.Client.hasCanvasImageData()){var r,o,s,l,d=ai.prepareData(t),c=t.options.rect,u=c.width,h=c.height,p=u*h,f=4*p;1!=n?i?(s=n,l=(e-128)*n+128):(s=a*n,l=128*-n+128):i?(s=1,l=e):(s=a,l=0);for(var g,m,v;p--;)d[f]=(g=d[f-=4]*s+l)>255?255:0>g?0:g,d[r]=(m=d[r=f+1]*s+l)>255?255:0>m?0:m,d[o]=(v=d[o=f+2]*s+l)>255?255:0>v?0:v;return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.coloradjust={process:function(t){var e=parseFloat(t.options.red)||0,n=parseFloat(t.options.green)||0,i=parseFloat(t.options.blue)||0;if(e=Math.round(255*e),n=Math.round(255*n),i=Math.round(255*i),ai.Client.hasCanvasImageData()){for(var a,r,o,s,l,d=ai.prepareData(t),c=t.options.rect,u=c.width*c.height,h=4*u;u--;)h-=4,e&&(d[h]=(o=d[h]+e)<0?0:o>255?255:o),n&&(d[a]=(s=d[a=h+1]+n)<0?0:s>255?255:s),i&&(d[r]=(l=d[r=h+2]+i)<0?0:l>255?255:l);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.desaturate={process:function(t){var e=!(!t.options.average||"false"==t.options.average);if(ai.Client.hasCanvasImageData()){var n,i,a=ai.prepareData(t),r=t.options.rect,o=r.width,s=r.height,l=o*s,d=4*l;if(e)for(;l--;)a[d-=4]=a[n=d+1]=a[i=d+2]=(a[d]+a[n]+a[i])/3;else for(;l--;)a[d-=4]=a[n=d+1]=a[i=d+2]=.3*a[d]+.59*a[n]+.11*a[i];return!0}return ai.Client.isIE()?(t.image.style.filter+=" gray",!0):void 0},checkSupport:function(){return ai.Client.hasCanvasImageData()||ai.Client.isIE()}},ai.Actions.glow={process:function(t){var e=parseFloat(t.options.amount)||0,n=parseFloat(t.options.radius)||0;if(e=Math.min(1,Math.max(0,e)),n=Math.min(5,Math.max(0,n)),ai.Client.hasCanvasImageData()){var i=t.options.rect,a=document.createElement("canvas");a.width=t.width,a.height=t.height;var r=a.getContext("2d");r.drawImage(t.canvas,0,0);var o=2,s=Math.round(t.width/o),l=Math.round(t.height/o),d=document.createElement("canvas");d.width=s,d.height=l;for(var c=Math.round(20*n),u=d.getContext("2d"),h=0;c>h;h++){var p=Math.max(1,Math.round(s-h)),f=Math.max(1,Math.round(l-h));u.clearRect(0,0,s,l),u.drawImage(a,0,0,t.width,t.height,0,0,p,f),r.clearRect(0,0,t.width,t.height),r.drawImage(d,0,0,p,f,0,0,t.width,t.height)}for(var g=ai.prepareData(t),m=ai.prepareData({canvas:a,options:t.options}),v=i.width*i.height,b=4*v,y=b+1,w=b+2;v--;)(g[b-=4]+=e*m[b])>255&&(g[b]=255),(g[y-=4]+=e*m[y])>255&&(g[y]=255),(g[w-=4]+=e*m[w])>255&&(g[w]=255);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.hsl={process:function(t){var e=parseInt(t.options.hue,10)||0,n=(parseInt(t.options.saturation,10)||0)/100,i=(parseInt(t.options.lightness,10)||0)/100;if(0>n)var a=1+n;else var a=1+2*n;e=e%360/360;var r=6*e,o=255*i,s=1+i,l=1-i;if(ai.Client.hasCanvasImageData()){for(var d=ai.prepareData(t),c=t.options.rect,u=c.width*c.height,h=4*u,p=h+1,f=h+2;u--;){var g=d[h-=4],m=d[p=h+1],v=d[f=h+2];if(0!=e||0!=n){var b=g;m>b&&(b=m),v>b&&(b=v);var y=g;y>m&&(y=m),y>v&&(y=v);var w=b-y,C=(y+b)/510;if(C>0&&w>0){if(.5>=C){var x=w/(b+y)*a;x>1&&(x=1);var _=C*(1+x)}else{var x=w/(510-b-y)*a;x>1&&(x=1);var _=C+x-C*x}if(g==b)if(m==y)var T=5+(b-v)/w+r;else var T=1-(b-m)/w+r;else if(m==b)if(v==y)var T=1+(b-g)/w+r;else var T=3-(b-v)/w+r;else if(g==y)var T=3+(b-m)/w+r;else var T=5-(b-g)/w+r;0>T&&(T+=6),T>=6&&(T-=6);var S=C+C-_,E=T>>0;0==E?(g=255*_,m=255*(S+(_-S)*(T-E)),v=255*S):1==E?(g=255*(_-(_-S)*(T-E)),m=255*_,v=255*S):2==E?(g=255*S,m=255*_,v=255*(S+(_-S)*(T-E))):3==E?(g=255*S,m=255*(_-(_-S)*(T-E)),v=255*_):4==E?(g=255*(S+(_-S)*(T-E)),m=255*S,v=255*_):5==E&&(g=255*_,m=255*S,v=255*(_-(_-S)*(T-E)))}}0>i?(g*=s,m*=s,v*=s):i>0&&(g=g*l+o,m=m*l+o,v=v*l+o),d[h]=0>g?0:g>255?255:g,d[p]=0>m?0:m>255?255:m,d[f]=0>v?0:v>255?255:v}return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.invert={process:function(t){if(ai.Client.hasCanvasImageData()){for(var e=ai.prepareData(t),n=!!t.options.invertAlpha,i=t.options.rect,a=i.width*i.height,r=4*a,o=r+1,s=r+2,l=r+3;a--;)e[r-=4]=255-e[r],e[o-=4]=255-e[o],e[s-=4]=255-e[s],n&&(e[l-=4]=255-e[l]);return!0}return ai.Client.isIE()?(t.image.style.filter+=" invert",!0):void 0},checkSupport:function(){return ai.Client.hasCanvasImageData()||ai.Client.isIE()}},ai.Actions.posterize={process:function(t){var e=256;if("undefined"!=typeof t.options.levels&&(e=parseInt(t.options.levels,10)||1),ai.Client.hasCanvasImageData()){var n=ai.prepareData(t);e=Math.max(2,Math.min(256,e));var i=256/e,a=256/(e-1),r=t.options.rect,o=r.width,s=r.height,l=4*o,d=s;do{var c=(d-1)*l,u=o;do{var h=c+4*(u-1),p=a*(n[h]/i>>0),f=a*(n[h+1]/i>>0),g=a*(n[h+2]/i>>0);p>255&&(p=255),f>255&&(f=255),g>255&&(g=255),n[h]=p,n[h+1]=f,n[h+2]=g}while(--u)}while(--d);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.removenoise={process:function(t){if(ai.Client.hasCanvasImageData()){var e=ai.prepareData(t),n=t.options.rect,i=n.width,a=n.height,r=4*i,o=a;do{var s=(o-1)*r,l=o==a?o-1:o,d=1==o?0:o-2,c=d*i*4,u=l*i*4,h=i;do{var p,f,g,m,v,b,y=s+(4*h-4),w=c+4*(1==h?0:h-2),C=u+4*(h==i?h-1:h);p=f=e[w];var x=e[y-4],_=e[y+4],T=e[C];p>x&&(p=x),p>_&&(p=_),p>T&&(p=T),x>f&&(f=x),_>f&&(f=_),T>f&&(f=T),g=m=e[w+1];var S=e[y-3],E=e[y+5],A=e[C+1];g>S&&(g=S),g>E&&(g=E),g>A&&(g=A),S>m&&(m=S),E>m&&(m=E),A>m&&(m=A),v=b=e[w+2];var k=e[y-2],N=e[y+6],R=e[C+2];v>k&&(v=k),v>N&&(v=N),v>R&&(v=R),k>b&&(b=k),N>b&&(b=N),R>b&&(b=R),e[y]>f?e[y]=f:e[y]<p&&(e[y]=p),e[y+1]>m?e[y+1]=m:e[y+1]<g&&(e[y+1]=g),e[y+2]>b?e[y+2]=b:e[y+2]<v&&(e[y+2]=v)}while(--h)}while(--o);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.sepia={process:function(t){var e=parseInt(t.options.mode,10)||0;if(0>e&&(e=0),e>1&&(e=1),ai.Client.hasCanvasImageData()){var n=ai.prepareData(t),i=t.options.rect,a=i.width,r=i.height,o=4*a,s=r;do{var l=(s-1)*o,d=a;do{var c=l+4*(d-1);if(e)var u=.299*n[c]+.587*n[c+1]+.114*n[c+2],h=u+39,p=u+14,f=u-36;else var g=n[c],m=n[c+1],v=n[c+2],h=.393*g+.769*m+.189*v,p=.349*g+.686*m+.168*v,f=.272*g+.534*m+.131*v;0>h&&(h=0),h>255&&(h=255),0>p&&(p=0),p>255&&(p=255),0>f&&(f=0),f>255&&(f=255),n[c]=h,n[c+1]=p,n[c+2]=f}while(--d)}while(--s);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.sharpen={process:function(t){var e=0;if("undefined"!=typeof t.options.amount&&(e=parseFloat(t.options.amount)||0),0>e&&(e=0),e>1&&(e=1),ai.Client.hasCanvasImageData()){for(var n=ai.prepareData(t),i=ai.prepareData(t,!0),a=15,r=1+3*e,o=[[0,-r,0],[-r,a,-r],[0,-r,0]],s=0,l=0;3>l;l++)for(var d=0;3>d;d++)s+=o[l][d];s=1/s;var c=t.options.rect,u=c.width,h=c.height;a*=s,r*=s;var p=4*u,f=h;do{var g=(f-1)*p,m=f==h?f-1:f,v=1==f?0:f-2,b=v*p,y=m*p,w=u;do{var C=g+(4*w-4),x=b+4*(1==w?0:w-2),_=y+4*(w==u?w-1:w),T=(-i[x]-i[C-4]-i[C+4]-i[_])*r+i[C]*a,S=(-i[x+1]-i[C-3]-i[C+5]-i[_+1])*r+i[C+1]*a,E=(-i[x+2]-i[C-2]-i[C+6]-i[_+2])*r+i[C+2]*a;0>T&&(T=0),0>S&&(S=0),0>E&&(E=0),T>255&&(T=255),S>255&&(S=255),E>255&&(E=255),n[C]=T,n[C+1]=S,n[C+2]=E}while(--w)}while(--f);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},ai.Actions.solarize={process:function(t){!(!t.options.average||"false"==t.options.average);if(ai.Client.hasCanvasImageData()){var e=ai.prepareData(t),n=t.options.rect,i=n.width,a=n.height,r=4*i,o=a;do{var s=(o-1)*r,l=i;do{var d=s+4*(l-1),c=e[d],u=e[d+1],h=e[d+2];c>127&&(c=255-c),u>127&&(u=255-u),h>127&&(h=255-h),e[d]=c,e[d+1]=u,e[d+2]=h}while(--l)}while(--o);return!0}},checkSupport:function(){return ai.Client.hasCanvasImageData()}},function(t){function e(t,e){var n=typeof t[e];return n==w||!(n!=y||!t[e])||"unknown"==n}function n(t,e){return!(typeof t[e]!=y||!t[e])}function i(t,e){return typeof t[e]!=C}function a(t){return function(e,n){for(var i=n.length;i--;)if(!t(e,n[i]))return!1;return!0}}function r(t){return t&&E(t,S)&&k(t,T)}function o(t){return n(t,"body")?t.body:t.getElementsByTagName("body")[0]}function s(t){n(window,"console")&&e(window.console,"log")&&window.console.log(t)}function l(t,e){e?window.alert(t):s(t)}function d(t){R.initialized=!0,R.supported=!1,l("Rangy is not supported on this page in your browser. Reason: "+t,R.config.alertOnFail)}function c(t){l("Rangy warning: "+t,R.config.alertOnWarn)}function u(t){return t.message||t.description||String(t)}function h(){if(!R.initialized){var t,n=!1,i=!1;e(document,"createRange")&&(t=document.createRange(),E(t,_)&&k(t,x)&&(n=!0),t.detach());var a=o(document);if(!a||"body"!=a.nodeName.toLowerCase())return void d("No body element found");if(a&&e(a,"createTextRange")&&(t=a.createTextRange(),r(t)&&(i=!0)),!n&&!i)return void d("Neither Range nor TextRange are available");R.initialized=!0,R.features={implementsDomRange:n,implementsTextRange:i};var l,c;for(var h in N)(l=N[h])instanceof f&&l.init(l,R);for(var p=0,g=I.length;g>p;++p)try{I[p](R)}catch(m){c="Rangy init listener threw an exception. Continuing. Detail: "+u(m),s(c)}}}function p(t){t=t||window,h();for(var e=0,n=O.length;n>e;++e)O[e](t)}function f(t,e,n){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=n}function g(t,e,n,i){var a=new f(e,n,function(t){if(!t.initialized){t.initialized=!0;try{i(R,t),t.supported=!0}catch(n){var a="Module '"+e+"' failed to load: "+u(n);s(a)}}});N[e]=a}function m(){}function v(){}var b="function"==typeof t.define&&t.define.amd,y="object",w="function",C="undefined",x=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],T=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],S=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],E=a(e),A=a(n),k=a(i),N={},R={version:"1.3alpha.",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:n,isHostProperty:i,areHostMethods:E,areHostObjects:A,areHostProperties:k,isTextRange:r,getBody:o},features:{},modules:N,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1}};R.fail=d,R.warn=c,{}.hasOwnProperty?R.util.extend=function(t,e,n){var i,a;for(var r in e)e.hasOwnProperty(r)&&(i=t[r],a=e[r],n&&null!==i&&"object"==typeof i&&null!==a&&"object"==typeof a&&R.util.extend(i,a,!0),t[r]=a);return t}:d("hasOwnProperty not supported"),function(){var t=document.createElement("div");t.appendChild(document.createElement("span"));var e,n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(t){return n.call(t,0)})}catch(i){}e||(e=function(t){for(var e=[],n=0,i=t.length;i>n;++n)e[n]=t[n];return e}),R.util.toArray=e}();var D;e(document,"addEventListener")?D=function(t,e,n){t.addEventListener(e,n,!1)}:e(document,"attachEvent")?D=function(t,e,n){t.attachEvent("on"+e,n)}:d("Document does not have required addEventListener or attachEvent method"),R.util.addListener=D;var I=[];R.init=h,R.addInitListener=function(t){R.initialized?t(R):I.push(t)};var O=[];R.addCreateMissingNativeApiListener=function(t){O.push(t)},R.createMissingNativeApi=p,f.prototype={init:function(){for(var t,e,n=this.dependencies||[],i=0,a=n.length;a>i;++i){if(e=n[i],t=N[e],!(t&&t instanceof f))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},warn:function(t){R.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){R.warn("DEPRECATED: "+t+" in module "+this.name+"is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},R.createModule=function(t){var e,n;2==arguments.length?(e=arguments[1],n=[]):(e=arguments[2],n=arguments[1]),g(!1,t,n,e)},R.createCoreModule=function(t,e,n){g(!0,t,e,n)},R.RangePrototype=m,R.rangePrototype=new m,R.selectionPrototype=new v;var P=!1,M=function(){P||(P=!0,R.initialized||h())};return typeof window==C?void d("No window found"):typeof document==C?void d("No document found"):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",M,!1),D(window,"load",M),b&&t.define(function(){return R.amd=!0,R}),void(t.rangy=R))}(this),rangy.createCoreModule("DomUtil",[],function(t,e){function n(t){var e;return typeof t.namespaceURI==N||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function i(t){var e=t.parentNode;return 1==e.nodeType?e:null}function a(t){for(var e=0;t=t.previousSibling;)++e;return e}function r(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function o(t,e){var n,i=[];for(n=t;n;n=n.parentNode)i.push(n);for(n=e;n;n=n.parentNode)if(O(i,n))return n;return null}function s(t,e,n){for(var i=n?e:e.parentNode;i;){if(i===t)return!0;i=i.parentNode}return!1}function l(t,e){return s(t,e,!0)}function d(t,e,n){for(var i,a=n?t:t.parentNode;a;){if(i=a.parentNode,i===e)return a;a=i}return null}function c(t){var e=t.nodeType;return 3==e||4==e||8==e}function u(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function h(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function p(t,e,n){var i=t.cloneNode(!1);if(i.deleteData(0,e),t.deleteData(e,t.length-e),h(i,t),n)for(var r,o=0;r=n[o++];)r.node==t&&r.offset>e?(r.node=i,r.offset-=e):r.node==t.parentNode&&r.offset>a(t)&&++r.offset;return i}function f(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=N)return t.ownerDocument;if(typeof t.document!=N)return t.document;if(t.parentNode)return f(t.parentNode);throw e.createError("getDocument: no document found for node")}function g(t){var n=f(t);if(typeof n.defaultView!=N)return n.defaultView;if(typeof n.parentWindow!=N)return n.parentWindow;throw e.createError("Cannot get a window object for node")}function m(t){if(typeof t.contentDocument!=N)return t.contentDocument;if(typeof t.contentWindow!=N)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function v(t){if(typeof t.contentWindow!=N)return t.contentWindow;if(typeof t.contentDocument!=N)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function b(t){return t&&R.isHostMethod(t,"setTimeout")&&R.isHostObject(t,"document")}function y(t,e,n){var i;if(t?R.isHostProperty(t,"nodeType")?i=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?m(t):f(t):b(t)&&(i=t.document):i=document,!i)throw e.createError(n+"(): Parameter must be a Window object or DOM node");return i}function w(t){for(var e;e=t.parentNode;)t=e;return t}function C(t,n,i,r){var s,l,c,u,h;if(t==i)return n===r?0:r>n?-1:1;if(s=d(i,t,!0))return n<=a(s)?-1:1;if(s=d(t,i,!0))return a(s)<r?-1:1;if(l=o(t,i),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(c=t===l?l:d(t,l,!0),u=i===l?l:d(i,l,!0),c===u)throw e.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=l.firstChild;h;){if(h===c)return-1;if(h===u)return 1;h=h.nextSibling}}function x(t){try{return t.parentNode,!1}catch(e){return!0}}function _(t){if(!t)return"[No node]";if(P&&x(t))return"[Broken node]";if(c(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">["+a(t)+"]["+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function T(t){for(var e,n=f(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function S(t){this.root=t,this._next=t}function E(t){return new S(t)}function A(t,e){this.node=t,this.offset=e}function k(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var N="undefined",R=t.util;R.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),R.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var D=document.createElement("div");R.areHostMethods(D,["insertBefore","appendChild","cloneNode"]||!R.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),R.isHostProperty(D,"innerHTML")||e.fail("Element is missing innerHTML property");var I=document.createTextNode("test");R.areHostMethods(I,["splitText","deleteData","insertData","appendData","cloneNode"]||!R.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"])||!R.areHostProperties(I,["data"]))||e.fail("Incomplete Text Node implementation");var O=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},P=!1;!function(){var e=document.createElement("b");e.innerHTML="1";var n=e.firstChild;e.innerHTML="<br>",P=x(n),t.features.crashyTextNodes=P}();var M;typeof window.getComputedStyle!=N?M=function(t,e){return g(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=N?M=function(t,e){return t.currentStyle[e]}:e.fail("No means of obtaining computed style properties found"),S.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+_(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},k.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},k.prototype.toString=function(){return this.message},t.dom={arrayContains:O,isHtmlNamespace:n,parentElement:i,getNodeIndex:a,getNodeLength:r,getCommonAncestor:o,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:d,isCharacterDataNode:c,isTextOrCommentNode:u,insertAfter:h,splitDataNode:p,getDocument:f,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:R.getBody,isWindow:b,getContentDocument:y,getRootContainer:w,comparePoints:C,isBrokenNode:x,inspectNode:_,getComputedStyleProperty:M,fragmentFromNodeChildren:T,createIterator:E,DomPosition:A},t.DOMException=k}),rangy.createCoreModule("DomRange",["DomUtil"],function(t){function e(t,e){return 3!=t.nodeType&&(U(t,e.startContainer)||U(t,e.endContainer))}function n(t){return t.document||j(t.startContainer)}function i(t){return new B(t.parentNode,V(t))}function a(t){return new B(t.parentNode,V(t)+1)}function r(t,e,n){var i=11==t.nodeType?t.firstChild:t;return H(e)?n==e.length?L.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:z(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),i}function o(t,e,i){if(E(t),E(e),n(e)!=n(t))throw new F("WRONG_DOCUMENT_ERR");var a=G(t.startContainer,t.startOffset,e.endContainer,e.endOffset),r=G(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return i?0>=a&&r>=0:0>a&&r>0}function s(t){for(var e,i,a,r=n(t.range).createDocumentFragment();i=t.next();){if(e=t.isPartiallySelectedSubtree(),i=i.cloneNode(!e),e&&(a=t.getSubtreeIterator(),i.appendChild(s(a)),a.detach(!0)),10==i.nodeType)throw new F("HIERARCHY_REQUEST_ERR");r.appendChild(i)}return r}function l(t,e,n){var i,a;n=n||{stop:!1};for(var r,o;r=t.next();)if(t.isPartiallySelectedSubtree()){if(e(r)===!1)return void(n.stop=!0);if(o=t.getSubtreeIterator(),l(o,e,n),o.detach(!0),n.stop)return}else for(i=L.createIterator(r);a=i.next();)if(e(a)===!1)return void(n.stop=!0)}function d(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),d(e),e.detach(!0)):t.remove()}function c(t){for(var e,i,a=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),i=t.getSubtreeIterator(),e.appendChild(c(i)),i.detach(!0)):t.remove(),10==e.nodeType)throw new F("HIERARCHY_REQUEST_ERR");a.appendChild(e)}return a}function u(t,e,n){var i,a=!(!e||!e.length),r=!!n;a&&(i=new RegExp("^("+e.join("|")+")$"));var o=[];return l(new p(t,!1),function(e){if(!(a&&!i.test(e.nodeType)||r&&!n(e))){var s=t.startContainer;if(e!=s||!H(s)||t.startOffset!=s.length){var l=t.endContainer;e==l&&H(l)&&0==t.endOffset||o.push(e)}}}),o}function h(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+L.inspectNode(t.startContainer)+":"+t.startOffset+", "+L.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function p(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&H(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||H(this.sc)?W(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||H(this.ec)?W(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function g(t){return function(e,n){for(var i,a=n?e:e.parentNode;a;){if(i=a.nodeType,Y(t,i))return a;a=a.parentNode}return null}}function m(t,e){if(ae(t,e))throw new f("INVALID_NODE_TYPE_ERR")}function v(t){if(!t.startContainer)throw new F("INVALID_STATE_ERR")}function b(t,e){if(!Y(e,t.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function y(t,e){if(0>e||e>(H(t)?t.length:t.childNodes.length))throw new F("INDEX_SIZE_ERR")}function w(t,e){if(ne(t,!0)!==ne(e,!0))throw new F("WRONG_DOCUMENT_ERR")}function C(t){if(ie(t,!0))throw new F("NO_MODIFICATION_ALLOWED_ERR")}function x(t,e){if(!t)throw new F(e)}function _(t){return K&&L.isBrokenNode(t)||!Y(J,t.nodeType)&&!ne(t,!0)}function T(t,e){return e<=(H(t)?t.length:t.childNodes.length)}function S(t){return!!t.startContainer&&!!t.endContainer&&!_(t.startContainer)&&!_(t.endContainer)&&T(t.startContainer,t.startOffset)&&T(t.endContainer,t.endOffset)}function E(t){if(v(t),!S(t))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function A(t,e){E(t);var n=t.startContainer,i=t.startOffset,a=t.endContainer,r=t.endOffset,o=n===a;H(a)&&r>0&&r<a.length&&z(a,r,e),H(n)&&i>0&&i<n.length&&(n=z(n,i,e),o?(r-=i,a=n):a==n.parentNode&&r>=V(n)&&r++,i=0),t.setStartAndEnd(n,i,a,r)}function k(t){t.START_TO_START=ce,t.START_TO_END=ue,t.END_TO_END=he,t.END_TO_START=pe,t.NODE_BEFORE=fe,t.NODE_AFTER=ge,t.NODE_BEFORE_AND_AFTER=me,t.NODE_INSIDE=ve}function N(t){k(t),k(t.prototype)}function R(t,e){return function(){E(this);var n,i,r=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,d=new p(this,!0);r!==s&&(n=W(r,s,!0),i=a(n),r=i.node,o=i.offset),l(d,C),d.reset();var c=t(d);return d.detach(),e(this,r,o,r,o),c}}function D(n,r,o){function s(t,e){return function(n){v(this),b(n,Q),b(Z(n),J);var r=(t?i:a)(n);(e?l:u)(this,r.node,r.offset)}}function l(t,e,n){var i=t.endContainer,a=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((Z(e)!=Z(i)||1==G(e,n,i,a))&&(i=e,a=n),r(t,e,n,i,a))}function u(t,e,n){var i=t.startContainer,a=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((Z(e)!=Z(i)||-1==G(e,n,i,a))&&(i=e,a=n),r(t,i,a,e,n))}var h=function(){};h.prototype=t.rangePrototype,n.prototype=new h,$.extend(n.prototype,{setStart:function(t,e){v(this),m(t,!0),y(t,e),l(this,t,e)},setEnd:function(t,e){v(this),m(t,!0),y(t,e),u(this,t,e)},setStartAndEnd:function(){v(this);var t=arguments,e=t[0],n=t[1],i=e,a=n;switch(t.length){case 3:a=t[2];break;case 4:i=t[2],a=t[3]}r(this,e,n,i,a)},setBoundary:function(t,e,n){this["set"+(n?"Start":"End")](t,e)},setStartBefore:s(!0,!0),setStartAfter:s(!1,!0),setEndBefore:s(!0,!1),setEndAfter:s(!1,!1),collapse:function(t){E(this),t?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){v(this),m(t,!0),r(this,t,0,t,q(t))},selectNode:function(t){v(this),m(t,!1),b(t,Q);var e=i(t),n=a(t);r(this,e.node,e.offset,n.node,n.offset)},extractContents:R(c,r),deleteContents:R(d,r),canSurroundContents:function(){E(this),C(this.startContainer),C(this.endContainer);var t=new p(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},detach:function(){o(this)},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(t){A(this,t)},normalizeBoundaries:function(){E(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,a=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,i=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},o=function(a){var r=a.previousSibling;if(r&&r.nodeType==a.nodeType){t=a;var o=a.length;if(e=r.length,a.insertData(0,r.data),r.parentNode.removeChild(r),t==n)i+=e,n=t;else if(n==a.parentNode){var s=V(a);i==s?(n=a,i=o):i>s&&i--}}},s=!0;if(H(n))n.length==i&&a(n);else{if(i>0){var l=n.childNodes[i-1];l&&H(l)&&a(l)}s=!this.collapsed}if(s){if(H(t))0==e&&o(t);else if(e<t.childNodes.length){var d=t.childNodes[e];d&&H(d)&&o(d)}}else t=n,e=i;r(this,t,e,n,i)},collapseToPoint:function(t,e){v(this),m(t,!0),y(t,e),this.setStartAndEnd(t,e)}}),N(n)}function I(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:L.getCommonAncestor(t.startContainer,t.endContainer)}function O(t,e,n,i,a){t.startContainer=e,t.startOffset=n,t.endContainer=i,t.endOffset=a,t.document=L.getDocument(e),I(t)}function P(t){v(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=t.document=null,t.collapsed=t.commonAncestorContainer=null}function M(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this.document=t,I(this)}var L=t.dom,$=t.util,B=L.DomPosition,F=t.DOMException,H=L.isCharacterDataNode,V=L.getNodeIndex,U=L.isOrIsAncestorOf,j=L.getDocument,G=L.comparePoints,z=L.splitDataNode,W=L.getClosestAncestorIn,q=L.getNodeLength,Y=L.arrayContains,Z=L.getRootContainer,K=t.features.crashyTextNodes;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,H(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t
},remove:function(){var t,e,n=this._current;!H(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new M(n(this.range));var e=this._current,i=e,a=0,r=e,o=q(e);U(e,this.sc)&&(i=this.sc,a=this.so),U(e,this.ec)&&(r=this.ec,o=this.eo),O(t,i,a,r,o)}return new p(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message};var Q=[1,3,4,5,7,8,10],J=[2,9,11],X=[5,6,10,12],te=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],ne=g([9,11]),ie=g(X),ae=g([6,10,12]),re=document.createElement("style"),oe=!1;try{re.innerHTML="<b>x</b>",oe=3==re.firstChild.nodeType}catch(se){}t.features.htmlParsingConforms=oe;var le=oe?function(t){var e=this.startContainer,n=j(e);if(!e)throw new F("INVALID_STATE_ERR");var i=null;return 1==e.nodeType?i=e:H(e)&&(i=L.parentElement(e)),i=null===i||"HTML"==i.nodeName&&L.isHtmlNamespace(j(i).documentElement)&&L.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=t,L.fragmentFromNodeChildren(i)}:function(t){v(this);var e=n(this),i=e.createElement("body");return i.innerHTML=t,L.fragmentFromNodeChildren(i)},de=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ce=0,ue=1,he=2,pe=3,fe=0,ge=1,me=2,ve=3;$.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){E(this),w(this.startContainer,e.startContainer);var n,i,a,r,o=t==pe||t==ce?"start":"end",s=t==ue||t==ce?"start":"end";return n=this[o+"Container"],i=this[o+"Offset"],a=e[s+"Container"],r=e[s+"Offset"],G(n,i,a,r)},insertNode:function(t){if(E(this),b(t,te),C(this.startContainer),U(t,this.startContainer))throw new F("HIERARCHY_REQUEST_ERR");var e=r(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){E(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&H(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var i=new p(this,!0);return t=s(i),i.detach(),t},canSurroundContents:function(){E(this),C(this.startContainer),C(this.endContainer);var t=new p(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(b(t,ee),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);r(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){E(this);for(var t,e=new M(n(this)),i=de.length;i--;)t=de[i],e[t]=this[t];return e},toString:function(){E(this);var t=this.startContainer;if(t===this.endContainer&&H(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new p(this,!0);return l(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){E(this);var e=t.parentNode,n=V(t);if(!e)throw new F("NOT_FOUND_ERR");var i=this.comparePoint(e,n),a=this.comparePoint(e,n+1);return 0>i?a>0?me:fe:a>0?ge:ve},comparePoint:function(t,e){return E(this),x(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),G(t,e,this.startContainer,this.startOffset)<0?-1:G(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:le,toHtml:function(){E(this);var t=this.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(E(this),x(t,"NOT_FOUND_ERR"),j(t)!==n(this))return!1;var i=t.parentNode,a=V(t);x(i,"NOT_FOUND_ERR");var r=G(i,a,this.endContainer,this.endOffset),o=G(i,a+1,this.startContainer,this.startOffset);return e?0>=r&&o>=0:0>r&&o>0},isPointInRange:function(t,e){return E(this),x(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),G(t,e,this.startContainer,this.startOffset)>=0&&G(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return o(this,t,!1)},intersectsOrTouchesRange:function(t){return o(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=G(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=G(this.endContainer,this.endOffset,t.endContainer,t.endOffset),i=this.cloneRange();return-1==e&&i.setStart(t.startContainer,t.startOffset),1==n&&i.setEnd(t.endContainer,t.endOffset),i}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==G(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==G(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new f("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==ve},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,q(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var i=n.pop();e.setEnd(i,i.length);var a=this.containsRange(e);return e.detach(),a}return this.containsNodeContents(t)},getNodes:function(t,e){return E(this),u(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){v(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){v(this),this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var i=n(this),a=t.createRange(i);e=e||L.getBody(i),a.selectNodeContents(e);var r=this.intersection(a),o=0,s=0;return r&&(a.setEnd(r.startContainer,r.startOffset),o=a.toString().length,s=o+r.toString().length,a.detach()),{start:o,end:s,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,n=0;this.setStart(e,0),this.collapse(!0);for(var i,a,r,o,s=[e],l=!1,d=!1;!d&&(i=s.pop());)if(3==i.nodeType)a=n+i.length,!l&&t.start>=n&&t.start<=a&&(this.setStart(i,t.start-n),l=!0),l&&t.end>=n&&t.end<=a&&(this.setEnd(i,t.end-n),d=!0),n=a;else for(o=i.childNodes,r=o.length;r--;)s.push(o[r])},getName:function(){return"DomRange"},equals:function(t){return M.rangesEqual(this,t)},isValid:function(){return S(this)},inspect:function(){return h(this)}}),D(M,O,P),$.extend(M,{rangeProperties:de,RangeIterator:p,copyComparisonConstants:N,createPrototypeRange:D,inspect:h,getRangeDocument:n,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=M,t.RangeException=f}),rangy.createCoreModule("WrappedRange",["DomRange"],function(t,e){var n,i,a=t.dom,r=t.util,o=a.DomPosition,s=t.DomRange,l=a.getBody,d=a.getContentDocument,c=a.isCharacterDataNode;if(t.features.implementsDomRange&&!function(){function i(t){for(var e,n=p.length;n--;)e=p[n],t[e]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function o(t,e,n,i,a){var r=t.startContainer!==e||t.startOffset!=n,o=t.endContainer!==i||t.endOffset!=a,s=!t.equals(t.nativeRange);(r||o||s)&&(t.setEnd(i,a),t.setStart(e,n))}function c(t){t.nativeRange.detach(),t.detached=!0;for(var e=p.length;e--;)t[p[e]]=null}var u,h,p=s.rangeProperties;n=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,i(this)},s.createPrototypeRange(n,o,c),u=n.prototype,u.selectNode=function(t){this.nativeRange.selectNode(t),i(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(t){this.nativeRange.surroundContents(t),i(this)},u.collapse=function(t){this.nativeRange.collapse(t),i(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){i(this)},u.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");l(document).appendChild(f);var g=document.createRange();g.setStart(f,0),g.setEnd(f,0);try{g.setStart(f,1),u.setStart=function(t,e){this.nativeRange.setStart(t,e),i(this)},u.setEnd=function(t,e){this.nativeRange.setEnd(t,e),i(this)},h=function(t){return function(e){this.nativeRange[t](e),i(this)}}}catch(m){u.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(n){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}i(this)},u.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(n){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}i(this)},h=function(t,e){return function(n){try{this.nativeRange[t](n)}catch(a){this.nativeRange[e](n),this.nativeRange[t](n)}i(this)}}}u.setStartBefore=h("setStartBefore","setEndBefore"),u.setStartAfter=h("setStartAfter","setEndAfter"),u.setEndBefore=h("setEndBefore","setStartBefore"),u.setEndAfter=h("setEndAfter","setStartAfter"),u.selectNodeContents=function(t){this.setStartAndEnd(t,0,a.getNodeLength(t))},g.selectNodeContents(f),g.setEnd(f,3);var v=document.createRange();v.selectNodeContents(f),v.setEnd(f,4),v.setStart(f,2),u.compareBoundaryPoints=-1==g.compareBoundaryPoints(g.START_TO_END,v)&&1==g.compareBoundaryPoints(g.END_TO_START,v)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var b=document.createElement("div");b.innerHTML="123";var y=b.firstChild,w=l(document);w.appendChild(b),g.setStart(y,1),g.setEnd(y,2),g.deleteContents(),"13"==y.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},u.extractContents=function(){var t=this.nativeRange.extractContents();return i(this),t}),w.removeChild(b),w=null,r.isHostMethod(g,"createContextualFragment")&&(u.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),l(document).removeChild(f),g.detach(),v.detach(),u.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createNativeRange=function(t){return t=d(t,e,"createNativeRange"),t.createRange()}}(),t.features.implementsTextRange){var u=function(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var i=n.parentElement();n=t.duplicate(),n.collapse(!1);var r=n.parentElement(),o=i==r?i:a.getCommonAncestor(i,r);return o==e?o:a.getCommonAncestor(e,o)},h=function(t){return 0==t.compareEndPoints("StartToEnd",t)},p=function(t,e,n,i,r){var s=t.duplicate();s.collapse(n);var l=s.parentElement();if(a.isOrIsAncestorOf(e,l)||(l=e),!l.canHaveHTML){var d=new o(l.parentNode,a.getNodeIndex(l));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=a.getDocument(l).createElement("span");u.parentNode&&u.parentNode.removeChild(u);for(var h,p,f,g,m,v=n?"StartToStart":"StartToEnd",b=r&&r.containerElement==l?r.nodeIndex:0,y=l.childNodes.length,w=y,C=w;;){if(C==y?l.appendChild(u):l.insertBefore(u,l.childNodes[C]),s.moveToElementText(u),h=s.compareEndPoints(v,t),0==h||b==w)break;if(-1==h){if(w==b+1)break;b=C}else w=w==b+1?b:C;C=Math.floor((b+w)/2),l.removeChild(u)}if(m=u.nextSibling,-1==h&&m&&c(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",t);var x;if(/[\r\n]/.test(m.data)){var _=s.duplicate(),T=_.text.replace(/\r\n/g,"\r").length;for(x=_.moveStart("character",T);-1==(h=_.compareEndPoints("StartToEnd",_));)x++,_.moveStart("character",1)}else x=s.text.length;g=new o(m,x)}else p=(i||!n)&&u.previousSibling,f=(i||n)&&u.nextSibling,g=f&&c(f)?new o(f,0):p&&c(p)?new o(p,p.data.length):new o(l,a.getNodeIndex(u));return u.parentNode.removeChild(u),{boundaryPosition:g,nodeInfo:{nodeIndex:C,containerElement:l}}},f=function(t,e){var n,i,r,o,s=t.offset,d=a.getDocument(t.node),u=l(d).createTextRange(),h=c(t.node);return h?(n=t.node,i=n.parentNode):(o=t.node.childNodes,n=s<o.length?o[s]:null,i=t.node),r=d.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),u.moveToElementText(r),u.collapse(!e),i.removeChild(r),h&&u[e?"moveStart":"moveEnd"]("character",s),u};if(i=function(t){this.textRange=t,this.refresh()},i.prototype=new s(document),i.prototype.refresh=function(){var t,e,n,i=u(this.textRange);h(this.textRange)?e=t=p(this.textRange,i,!0,!0).boundaryPosition:(n=p(this.textRange,i,!0,!1),t=n.boundaryPosition,e=p(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},i.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(i),i.rangeToTextRange=function(t){if(t.collapsed)return f(new o(t.startContainer,t.startOffset),!0);var e=f(new o(t.startContainer,t.startOffset),!0),n=f(new o(t.endContainer,t.endOffset),!1),i=l(s.getRangeDocument(t)).createTextRange();return i.setEndPoint("StartToStart",e),i.setEndPoint("EndToEnd",n),i},t.WrappedTextRange=i,!t.features.implementsDomRange||t.config.preferTextRange){var g=function(){return this}();"undefined"==typeof g.Range&&(g.Range=i),t.createNativeRange=function(t){return t=d(t,e,"createNativeRange"),l(t).createTextRange()},t.WrappedRange=i}}t.createRange=function(n){return n=d(n,e,"createRange"),new t.WrappedRange(t.createNativeRange(n))},t.createRangyRange=function(t){return t=d(t,e,"createRangyRange"),new s(t)},t.createIframeRange=function(n){return e.deprecationNotice("createIframeRange()","createRange(iframeEl)"),t.createRange(n)},t.createIframeRangyRange=function(n){return e.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),t.createRangyRange(n)},t.addCreateMissingNativeApiListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(n)}),n=e=null})}),rangy.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(t,e){function n(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function i(t,n){if(t){if(k.isWindow(t))return t;if(t instanceof v)return t.win;var i=k.getContentDocument(t,e,n);return k.getWindow(i)}return window}function a(t){return i(t,"getWinSelection").getSelection()}function r(t){return i(t,"getDocSelection").document.selection}function o(t){var e=!1;return t.anchorNode&&(e=1==k.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}function s(t,e,n){var i=n?"end":"start",a=n?"start":"end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[a+"Container"],t.focusOffset=e[a+"Offset"]}function l(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function d(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function c(e){var n;return e instanceof D?(n=t.createNativeRange(e.getDocument()),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset)):e instanceof I?n=e.nativeRange:M.implementsDomRange&&e instanceof k.getWindow(e.startContainer).Range&&(n=e),n}function u(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!k.isAncestorOf(t[0],t[e]))return!1;return!0}function h(t){var n=t.getNodes();if(!u(n))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function p(t){return!!t&&"undefined"!=typeof t.text}function f(t,e){var n=new I(e);t._ranges=[n],s(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function g(e){if(e._ranges.length=0,"None"==e.docSelection.type)d(e);else{var n=e.docSelection.createRange();if(p(n))f(e,n);else{e.rangeCount=n.length;for(var i,a=$(n.item(0)),r=0;r<e.rangeCount;++r)i=t.createRange(a),i.selectNode(n.item(r)),e._ranges.push(i);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,s(e,e._ranges[e.rangeCount-1],!1)}}}function m(t,n){for(var i=t.docSelection.createRange(),a=h(n),r=$(i.item(0)),o=B(r).createControlRange(),s=0,l=i.length;l>s;++s)o.add(i.item(s));try{o.add(a)}catch(d){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),g(t)}function v(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function b(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0}function y(t,e){for(var n,i,a=ee.length;a--;)if(n=ee[a],i=n.selection,"deleteAll"==e)b(i);else if(n.win==t)return"delete"==e?(ee.splice(a,1),!0):i;return"deleteAll"==e&&(ee.length=0),null}function w(t,n){for(var i,a=$(n[0].startContainer),r=B(a).createControlRange(),o=0,s=n.length;s>o;++o){i=h(n[o]);try{r.add(i)}catch(l){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),g(t)}function C(t,e){if(t.win.document!=$(e))throw new O("WRONG_DOCUMENT_ERR")}function x(e){return function(n,i){var a;this.rangeCount?(a=this.getRangeAt(0),a["set"+(e?"Start":"End")](n,i)):(a=t.createRange(this.win.document),a.setStartAndEnd(n,i)),this.setSingleRange(a,this.isBackward())}}function _(t){var e=[],n=new P(t.anchorNode,t.anchorOffset),i=new P(t.focusNode,t.focusOffset),a="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var r=0,o=t.rangeCount;o>r;++r)e[r]=D.inspect(t.getRangeAt(r));return"["+a+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}t.config.checkSelectionRanges=!0;var T,S,E="boolean",A="number",k=t.dom,N=t.util,R=N.isHostMethod,D=t.DomRange,I=t.WrappedRange,O=t.DOMException,P=k.DomPosition,M=t.features,L="Control",$=k.getDocument,B=k.getBody,F=D.rangesEqual,H=R(window,"getSelection"),V=N.isHostObject(document,"selection");M.implementsWinGetSelection=H,M.implementsDocSelection=V;var U=V&&(!H||t.config.preferTextRange);U?(T=r,t.isSelectionValid=function(t){var e=i(t,"isSelectionValid").document,n=e.selection;return"None"!=n.type||$(n.createRange().parentElement())==e}):H?(T=a,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=T;var j=T(),G=t.createNativeRange(document),z=B(document),W=N.areHostProperties(j,["anchorNode","focusNode","anchorOffset","focusOffset"]);M.selectionHasAnchorAndFocus=W;var q=R(j,"extend");M.selectionHasExtend=q;var Y=typeof j.rangeCount==A;M.selectionHasRangeCount=Y;var Z=!1,K=!0,Q=q?function(e,n){var i=D.getRangeDocument(n),a=t.createRange(i);a.collapseToPoint(n.endContainer,n.endOffset),e.addRange(c(a)),e.extend(n.startContainer,n.startOffset)}:null;N.areHostMethods(j,["addRange","getRangeAt","removeAllRanges"])&&typeof j.rangeCount==A&&M.implementsDomRange&&!function(){var e=window.getSelection();if(e){for(var n=e.rangeCount,i=n>1,a=[],r=o(e),s=0;n>s;++s)a[s]=e.getRangeAt(s);var l=B(document),d=l.appendChild(document.createElement("div"));d.contentEditable="false";var c=d.appendChild(document.createTextNode("")),u=document.createRange();if(u.setStart(c,1),u.collapse(!0),e.addRange(u),K=1==e.rangeCount,e.removeAllRanges(),!i){var h=u.cloneRange();u.setStart(c,0),h.setEnd(c,3),h.setStart(c,2),e.addRange(u),e.addRange(h),Z=2==e.rangeCount,h.detach()}for(l.removeChild(d),e.removeAllRanges(),u.detach(),s=0;n>s;++s)0==s&&r?Q?Q(e,a[s]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because browser does not support Selection.extend"),e.addRange(a[s])):e.addRange(a[s])}}(),M.selectionSupportsMultipleRanges=Z,M.collapsedNonEditableSelectionsSupported=K;var J,X=!1;z&&R(z,"createControlRange")&&(J=z.createControlRange(),N.areHostProperties(J,["item","add"])&&(X=!0)),M.implementsControlRange=X,S=W?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var te;R(j,"getRangeAt")?te=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:W&&(te=function(e){var n=$(e.anchorNode),i=t.createRange(n);return i.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),i}),v.prototype=t.selectionPrototype;var ee=[],ne=function(t){if(t&&t instanceof v)return t.refresh(),t;t=i(t,"getNativeSelection");var e=y(t),n=T(t),a=V?r(t):null;return e?(e.nativeSelection=n,e.docSelection=a,e.refresh()):(e=new v(n,a,t),ee.push({win:t,selection:e})),e};t.getSelection=ne,t.getIframeSelection=function(n){return e.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),t.getSelection(k.getIframeWindow(n))};var ie=v.prototype;if(!U&&W&&N.areHostMethods(j,["removeAllRanges","addRange"])){ie.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),d(this)};var ae=function(t,e){Q(t.nativeSelection,e),t.refresh()};ie.addRange=Y?function(e,i){if(X&&V&&this.docSelection.type==L)m(this,e);else if(n(i)&&q)ae(this,e);else{var a;if(Z?a=this.rangeCount:(this.removeAllRanges(),a=0),this.nativeSelection.addRange(c(e).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==a+1){if(t.config.checkSelectionRanges){var r=te(this.nativeSelection,this.rangeCount-1);r&&!F(r,e)&&(e=new I(r))}this._ranges[this.rangeCount-1]=e,s(this,e,se(this.nativeSelection)),this.isCollapsed=S(this)}else this.refresh()}}:function(t,e){n(e)&&q?ae(this,t):(this.nativeSelection.addRange(c(t)),this.refresh())},ie.setRanges=function(t){if(X&&t.length>1)w(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(R(j,"empty")&&R(G,"select")&&X&&U))return e.fail("No means of selecting a Range or TextRange was found"),!1;ie.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=$(this.anchorNode);else if(this.docSelection.type==L){var e=this.docSelection.createRange();e.length&&(t=$(e.item(0)))}if(t){var n=B(t).createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}d(this)},ie.addRange=function(e){this.docSelection.type==L?m(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,e,!1))},ie.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?w(this,t):e&&this.addRange(t[0])}}ie.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new O("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()};var re;if(U)re=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=B(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==L?g(e):p(n)?f(e,n):d(e)};else if(R(j,"getRangeAt")&&typeof j.rangeCount==A)re=function(e){if(X&&V&&e.docSelection.type==L)g(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,i=e.rangeCount;i>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));s(e,e._ranges[e.rangeCount-1],se(e.nativeSelection)),e.isCollapsed=S(e)}else d(e)};else{if(!W||typeof j.isCollapsed!=E||typeof G.collapsed!=E||!M.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;re=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=te(n,0),t._ranges=[e],t.rangeCount=1,l(t),t.isCollapsed=S(t)):d(t)}}ie.refresh=function(t){var e=t?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(re(this),t){var a=e.length;if(a!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;a--;)if(!F(e[a],this._ranges[a]))return!0;return!1}};var oe=function(t,e){var n=t.getAllRanges();t.removeAllRanges();for(var i=0,a=n.length;a>i;++i)F(e,n[i])||t.addRange(n[i]);t.rangeCount||d(t)};ie.removeRange=X?function(t){if(this.docSelection.type==L){for(var e,n=this.docSelection.createRange(),i=h(t),a=$(n.item(0)),r=B(a).createControlRange(),o=!1,s=0,l=n.length;l>s;++s)e=n.item(s),e!==i||o?r.add(n.item(s)):o=!0;r.select(),g(this)}else oe(this,t)}:function(t){oe(this,t)};var se;!U&&W&&M.implementsDomRange?(se=o,ie.isBackward=function(){return se(this)}):se=ie.isBackward=function(){return!1},ie.isBackwards=ie.isBackward,ie.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},ie.collapse=function(e,n){C(this,e);var i=t.createRange(e);i.collapseToPoint(e,n),this.setSingleRange(i),this.isCollapsed=!0},ie.collapseToStart=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},ie.collapseToEnd=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},ie.selectAllChildren=function(e){C(this,e);var n=t.createRange(e);n.selectNodeContents(e),this.setSingleRange(n)},ie.deleteFromDocument=function(){if(X&&V&&this.docSelection.type==L){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,a=n.length;a>i;++i)n[i].deleteContents();this.addRange(n[a-1])}}},ie.eachRange=function(t,e){for(var n=0,i=this._ranges.length;i>n;++n)if(t(this.getRangeAt(n)))return e},ie.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},ie.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},ie.callMethodOnEachRange=function(t,e){var n=[];return this.eachRange(function(i){n.push(i[t].apply(i,e))}),n},ie.setStart=x(!0),ie.setEnd=x(!1),t.rangePrototype.select=function(t){ne(this.getDocument()).setSingleRange(this,t)},ie.changeEachRange=function(t){var e=[],n=this.isBackward();this.eachRange(function(n){t(n),e.push(n)}),this.removeAllRanges(),n&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},ie.containsNode=function(t,e){return this.eachRange(function(n){return n.containsNode(t,e)},!0)},ie.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},ie.moveToBookmark=function(e){for(var n,i,a=[],r=0;n=e.rangeBookmarks[r++];)i=t.createRange(this.win),i.moveToBookmark(n),a.push(i);e.backward?this.setSingleRange(a[0],"backward"):this.setRanges(a)},ie.toHtml=function(){return this.callMethodOnEachRange("toHtml").join("")},ie.getName=function(){return"WrappedSelection"},ie.inspect=function(){return _(this)},ie.detach=function(){y(this.win,"delete"),b(this)},v.detachAll=function(){y(null,"deleteAll")},v.inspect=_,v.isDirectionBackward=n,t.Selection=v,t.selectionPrototype=ie,t.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return ne(t)}),t=null})}),rangy.createModule("Applier",["WrappedSelection"],function(t,e){function n(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function i(t,e){return t.className&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t.className)}function a(t,e){t.className?i(t,e)||(t.className+=" "+e):t.className=e}function r(t){return t.split(/\s+/).sort().join(" ")}function o(t){return r(t.className)}function s(t,e){return o(t)==o(e)}function l(t,e,n,i,a){var r=t.node,o=t.offset,s=r,l=o;r==i&&o>a&&l++,r!=e||o!=n&&o!=n+1||(s=i,l+=a-n),r==e&&o>n+1&&l--,t.node=s,t.offset=l}function d(t,e,n,i){-1==n&&(n=e.childNodes.length);for(var a,r=t.parentNode,o=I.getNodeIndex(t),s=0;a=i[s++];)l(a,r,o,e,n);e.childNodes.length==n?e.appendChild(t):e.insertBefore(t,e.childNodes[n])}function c(t,e,n,i,a){for(var r,o=[];r=t.firstChild;)d(r,e,n++,a),o.push(r);return i&&t.parentNode.removeChild(t),o}function u(t,e){return c(t,t.parentNode,I.getNodeIndex(t),!0,e)}function h(t,e){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),a=i?i.toString():"";return n.detach(),""!=a}function p(t){var e=t.cloneRange();return/<img/.test(v(e.cloneContents()))}function f(t){return t.getNodes([],function(e){return 3===e.nodeType&&h(t,e)?e:1===e.nodeType&&"IMG"===e.tagName?e:void 0})}function g(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,a,r=0,o=t.attributes.length;o>r;++r)if(n=t.attributes[r],a=n.name,"class"!=a){if(i=e.attributes.getNamedItem(a),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function m(t){return t.clone().wrap("<div/>").parent().html()}function v(t,e){for(var n="",i=0,a=t.childNodes.length;a>i;i++){var r=t.childNodes.item(i),o=r.nodeType===Node.TEXT_NODE?r.nodeValue:m(jQuery(r));o&&(n+=o)}return e&&(n=jQuery("<"+e+">"+n+"</"+e+">"),n.find("p").wrapInner("<"+e+"/>"),n.find("p > *").unwrap(),n=jQuery("<div/>").html(n).html()),n}function b(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||M(t)&&!M(t.parentNode))}function y(t){return(M(t)||1!=t.nodeType&&M(t.parentNode))&&!b(t)}function w(t){return t&&1==t.nodeType&&!L.test(D(t,"display"))}function C(t){if(0==t.data.length)return!0;if($.test(t.data))return!1;var e=D(t.parentNode,"whiteSpace");switch(e){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return w(t.previousSibling)||w(t.nextSibling)}function x(t){var e,n,i=[];for(e=0;n=t[e++];)i.push(new O(n.startContainer,n.startOffset),new O(n.endContainer,n.endOffset));return i}function _(t,e){for(var n,i,a,r=0,o=t.length;o>r;++r)n=t[r],i=e[2*r],a=e[2*r+1],n.setStartAndEnd(i.node,i.offset,a.node,a.offset)}function T(t,e){return I.isCharacterDataNode(t)?0==e?!!t.previousSibling:e==t.length?!!t.nextSibling:!0:e>0&&e<t.childNodes.length}function S(t,n,i,a){var r,o,s=0==i;if(I.isAncestorOf(n,t))return t;if(I.isCharacterDataNode(n)){var l=I.getNodeIndex(n);if(0==i)i=l;else{if(i!=n.length)throw e.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+n.data);i=l+1}n=n.parentNode}if(T(n,i)){r=n.cloneNode(!1),o=n.parentNode,r.id&&r.removeAttribute("id");for(var c,u=0;c=n.childNodes[i];)d(c,r,u++,a);return d(r,o,I.getNodeIndex(n)+1,a),n==t?r:S(t,o,I.getNodeIndex(r),a)}if(t!=n){r=n.parentNode;var h=I.getNodeIndex(n);return s||h++,S(t,r,h,a)}return t}function E(t,e){return t.tagName==e.tagName&&s(t,e)&&g(t,e)&&"inline"==D(t,"display")&&"inline"==D(e,"display")}function A(t){var e=t?"nextSibling":"previousSibling";return function(n,i){var a=n.parentNode,r=n[e];if(r){if(r&&3==r.nodeType)return r}else if(i&&(r=a[e],r&&1==r.nodeType&&E(a,r)))return r[t?"firstChild":"lastChild"];return null}}function k(t){this.isElementMerge=1==t.nodeType,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function N(t){this.tag=null,this.tags=[],this.classes=[],this.attributes=[],this.ignoreWhiteSpace=!0,this.applyToEditableOnly=!1,this.useExistingElements=!0,this.ignoreClasses=!1,this.ignoreAttributes=!1;for(var e in t)this[e]=t[e];for(var n=0,i=this.tags.length;i>n;n++)this.tags[n]=this.tags[n].toUpperCase();this.tag&&(this.tag=this.tag.toUpperCase(),this.tags.push(this.tag))}function R(t){return new N(t)}var D,I=t.dom,O=I.DomPosition,P=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){e.className&&(e.className=e.className.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),t))}}();"undefined"!=typeof window.getComputedStyle?D=function(t,e){return I.getWindow(t).getComputedStyle(t,null)[e]}:"undefined"!=typeof document.documentElement.currentStyle?D=function(t,e){return t.currentStyle[e]}:e.fail("No means of obtaining computed style properties found");var M;!function(){var t=document.createElement("div");M="boolean"==typeof t.isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return t&&1==t.nodeType&&"false"!=t.contentEditable?"true"==t.contentEditable||M(t.parentNode):!1
}}();var L=/^inline(-block|-table)?$/i,$=/[^\r\n\t\f \u200B]/,B=A(!1),F=A(!0);k.prototype={doMerge:function(t){for(var e,n,i,a,r,o=[],s=0,l=0,d=this.textNodes.length;d>l;++l){if(e=this.textNodes[l],n=e.parentNode,l>0&&(n.removeChild(e),n.hasChildNodes()||n.parentNode.removeChild(n),t))for(a=0;r=t[a++];)r.node==e&&(r.node=this.firstTextNode,r.offset+=s);o[l]=e.data,s+=e.data.length}return this.firstTextNode.data=i=o.join(""),i},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;n>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}};var H={};N.prototype={copyPropertiesToElement:function(t,e,n){var i,o,s,l,d,c,u={};for(var h in t)if(t.hasOwnProperty(h))if(l=t[h],d=e[h],"className"==h)a(e,l),a(e,this.cssClass),e[h]=r(e[h]),n&&(u[h]=e[h]);else if("style"==h){o=d,n&&(u[h]=s={});for(i in t[h])o[i]=l[i],n&&(s[i]=o[i]);this.attrExceptions.push(h)}else e[h]=l,n&&(u[h]=e[h],c=H.hasOwnProperty(h)?H[h]:h,this.attrExceptions.push(c));return n?u:""},isValid:function(t){return this.isValidTag(t)&&this.hasClasses(t)&&this.hasAttributes(t)},isValidTag:function(t){if(1!==t.nodeType)return!1;if(0===this.tags.length)return!0;for(var e=0,n=this.tags.length;n>e;e++)if(t.tagName===this.tags[e])return!0;return!1},hasClasses:function(t){if(this.ignoreClasses)return!0;for(var e=0,n=this.classes.length;n>e;e++)if(!i(t,this.classes[e]))return!1;return!0},hasAttributes:function(t){if(this.ignoreAttributes)return!0;for(var e in this.attributes)if(!t.hasAttribute(e))return!1;return!0},getSelfOrAncestor:function(t){for(;t;){if(this.isValid(t))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||y(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&C(t)},postApply:function(t,e,n,i){for(var a,r,o,s=t[0],l=t[t.length-1],d=[],c=s,u=l,h=0,p=l.length,f=0,g=t.length;g>f;++f)r=t[f],o=B(r,!i),o?(a||(a=new k(o),d.push(a)),a.textNodes.push(r),r===s&&(c=a.firstTextNode,h=c.length),r===l&&(u=a.firstTextNode,p=a.getLength())):a=null;var m=F(l,!i);if(m&&(a||(a=new k(l),d.push(a)),a.textNodes.push(m)),d.length){for(f=0,g=d.length;g>f;++f)d[f].doMerge(n);e.setStartAndEnd(c,h,u,p)}},createContainer:function(t){var e=t.createElement(this.tag);return this.addClasses(e),this.addAttributes(e),e},addClasses:function(t){for(var e=0,n=this.classes.length;n>e;e++)a(t,this.classes[e])},addAttributes:function(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])},removeClasses:function(t){for(var e=0,n=this.classes.length;n>e;e++)P(t,this.classes[e])},removeAttributes:function(t){for(var e in this.attributes)t.removeAttribute(e)},applyToTextNode:function(t){var e=t.parentNode;if(1==e.childNodes.length&&I.arrayContains(this.tags,e.tagName)&&this.useExistingElements)this.addClasses(e),this.addAttributes(e);else{var n=this.createContainer(I.getDocument(t));t.parentNode.insertBefore(n,t),n.appendChild(t)}},isRemovable:function(t){return this.tags.length>0&&this.isValidTag(t)&&this.hasClasses(t)&&this.hasAttributes(t)&&this.isModifiable(t)},undoToTextNode:function(t,e,n,i){if(!e.containsNode(n)){var a=e.cloneRange();a.selectNode(n),a.isPointInRange(e.endContainer,e.endOffset)&&(S(n,e.endContainer,e.endOffset,i),e.setEndAfter(n)),a.isPointInRange(e.startContainer,e.startOffset)&&(n=S(n,e.startContainer,e.startOffset,i))}this.isRemovable(n)?u(n,i):(this.removeClasses(n),this.removeAttributes(n))},applyToRange:function(t,e){e=e||[];var n=x(e||[]);t.splitBoundariesPreservingPositions(n);var i=f(t);if(i.length){for(var a,r=0;a=i[r++];)!this.isIgnorableWhiteSpaceNode(a)&&this.isModifiable(a)&&this.applyToTextNode(a,n);t.setStart(i[0],0),a=i[i.length-1],t.setEnd(a,a.length),this.normalize&&this.postApply(i,t,n,!1),_(e,n)}},applyToRanges:function(t){for(var e=t.length;e--;)this.applyToRange(t[e],t);return t},applyToSelection:function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(t,e){e=e||[];var n=x(e);t.splitBoundariesPreservingPositions(n);var i,a,r=f(t),o=r[r.length-1];if(r.length){for(var s=0,l=r.length;l>s;++s)i=r[s],a=this.getSelfOrAncestor(i),a&&this.isModifiable(i)&&this.undoToTextNode(i,t,a,n),t.setStart(r[0],0),t.setEnd(o,o.length);this.normalize&&this.postApply(r,t,n,!0),_(e,n)}},undoToRanges:function(t){for(var e=t.length;e--;)this.undoToRange(t[e],t);return t},undoToSelection:function(e){var n=t.getSelection(e),i=t.getSelection(e).getAllRanges();this.undoToRanges(i),n.setRanges(i)},getTextSelectedByRange:function(t,e){var n=e.cloneRange();n.selectNodeContents(t);var i=n.intersection(e),a=i?i.toString():"";return n.detach(),a},isAppliedToRange:function(t){if(t.collapsed)return!!this.getSelfOrAncestor(t.commonAncestorContainer);for(var e,i=t.getNodes([3]),a=0;e=i[a++];)if(!this.isIgnorableWhiteSpaceNode(e)){if(h(t,e)&&this.isModifiable(e)&&!this.getSelfOrAncestor(e))return!1;if(p(t))return!1}var r=v(t.cloneContents());return r.match(/^<(img)/)||""===n(r.replace(/<.*?>/g,""))?!1:!0},isAppliedToRanges:function(t){var e=t.length;if(0===e)return!1;for(;e--;)if(!this.isAppliedToRange(t[e]))return!1;return!0},isAppliedToSelection:function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleRanges:function(t){this.isAppliedToRanges(t)?this.undoToRanges(t):this.applyToRanges(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},detach:function(){}},N.util={},t.Applier=N,t.createApplier=R}),rangy.createModule("ClassApplier",["WrappedSelection"],function(t,e){function n(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(n,t[n])===!1)return!1;return!0}function i(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function a(t,e){return t.className&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t.className)}function r(t,e){t.className?a(t,e)||(t.className+=" "+e):t.className=e}function o(t){return t.split(/\s+/).sort().join(" ")}function s(t){return o(t.className)}function l(t,e){return s(t)==s(e)}function d(t,e,n,i,a){var r=t.node,o=t.offset,s=r,l=o;r==i&&o>a&&++l,r!=e||o!=n&&o!=n+1||(s=i,l+=a-n),r==e&&o>n+1&&--l,t.node=s,t.offset=l}function c(t,e,n){t.node==e&&t.offset>n&&--t.offset}function u(t,e,n,i){-1==n&&(n=e.childNodes.length);for(var a,r=t.parentNode,o=O.getNodeIndex(t),s=0;a=i[s++];)d(a,r,o,e,n);e.childNodes.length==n?e.appendChild(t):e.insertBefore(t,e.childNodes[n])}function h(t,e){for(var n,i=t.parentNode,a=O.getNodeIndex(t),r=0;n=e[r++];)c(n,i,a);t.parentNode.removeChild(t)}function p(t,e,n,i,a){for(var r,o=[];r=t.firstChild;)u(r,e,n++,a),o.push(r);return i&&t.parentNode.removeChild(t),o}function f(t,e){return p(t,t.parentNode,O.getNodeIndex(t),!0,e)}function g(t,e){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),a=i?i.toString():"";return n.detach(),""!=a}function m(t){for(var e,n=t.getNodes([3]),i=0;(e=n[i])&&!g(t,e);)++i;for(var a=n.length-1;(e=n[a])&&!g(t,e);)--a;return n.slice(i,a+1)}function v(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,a,r=0,o=t.attributes.length;o>r;++r)if(n=t.attributes[r],a=n.name,"class"!=a){if(i=e.attributes.getNamedItem(a),null===n!=(null===i))return!1;if(n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function b(t,e){for(var n,i=0,a=t.attributes.length;a>i;++i)if(n=t.attributes[i].name,(!e||!M(e,n))&&t.attributes[i].specified&&"class"!=n)return!0;return!1}function y(t,e){return n(e,function(e,n){if("object"==typeof n){if(!y(t[e],n))return!1}else if(t[e]!==n)return!1}),!0}function w(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||F(t)&&!F(t.parentNode))}function C(t){return(F(t)||1!=t.nodeType&&F(t.parentNode))&&!w(t)}function x(t){return t&&1==t.nodeType&&!H.test(B(t,"display"))}function _(t){if(0==t.data.length)return!0;if(V.test(t.data))return!1;var e=B(t.parentNode,"whiteSpace");switch(e){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return x(t.previousSibling)||x(t.nextSibling)}function T(t){var e,n,i=[];for(e=0;n=t[e++];)i.push(new P(n.startContainer,n.startOffset),new P(n.endContainer,n.endOffset));return i}function S(t,e){for(var n,i,a,r=0,o=t.length;o>r;++r)n=t[r],i=e[2*r],a=e[2*r+1],n.setStartAndEnd(i.node,i.offset,a.node,a.offset)}function E(t,e){return O.isCharacterDataNode(t)?0==e?!!t.previousSibling:e==t.length?!!t.nextSibling:!0:e>0&&e<t.childNodes.length}function A(t,n,i,a){var r,o,s=0==i;if(O.isAncestorOf(n,t))return t;if(O.isCharacterDataNode(n)){var l=O.getNodeIndex(n);if(0==i)i=l;else{if(i!=n.length)throw e.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+n.data);i=l+1}n=n.parentNode}if(E(n,i)){r=n.cloneNode(!1),o=n.parentNode,r.id&&r.removeAttribute("id");for(var d,c=0;d=n.childNodes[i];)u(d,r,c++,a);return u(r,o,O.getNodeIndex(n)+1,a),n==t?r:A(t,o,O.getNodeIndex(r),a)}if(t!=n){r=n.parentNode;var h=O.getNodeIndex(n);return s||h++,A(t,r,h,a)}return t}function k(t,e){return t.tagName==e.tagName&&l(t,e)&&v(t,e)&&"inline"==B(t,"display")&&"inline"==B(e,"display")}function N(t){var e=t?"nextSibling":"previousSibling";return function(n,i){var a=n.parentNode,r=n[e];if(r){if(r&&3==r.nodeType)return r}else if(i&&(r=a[e],r&&1==r.nodeType&&k(a,r))){var o=r[t?"firstChild":"lastChild"];if(o&&3==o.nodeType)return o}return null}}function R(t){this.isElementMerge=1==t.nodeType,this.textNodes=[];var e=this.isElementMerge?t.lastChild:t;e&&(this.textNodes[0]=e)}function D(t,e,a){var r,o,s,l,d=this;d.cssClass=t;var c=null,u={};if("object"==typeof e&&null!==e){for(a=e.tagNames,c=e.elementProperties,u=e.elementAttributes,o=0;l=G[o++];)e.hasOwnProperty(l)&&(d[l]=e[l]);r=e.normalize}else r=e;d.normalize="undefined"==typeof r?!0:r,d.attrExceptions=[];var h=document.createElement(d.elementTagName);d.elementProperties=d.copyPropertiesToElement(c,h,!0),n(u,function(t){d.attrExceptions.push(t)}),d.elementAttributes=u,d.elementSortedClassName=d.elementProperties.hasOwnProperty("className")?d.elementProperties.className:t,d.applyToAnyTagName=!1;var p=typeof a;if("string"==p)"*"==a?d.applyToAnyTagName=!0:d.tagNames=i(a.toLowerCase()).split(/\s*,\s*/);else if("object"==p&&"number"==typeof a.length)for(d.tagNames=[],o=0,s=a.length;s>o;++o)"*"==a[o]?d.applyToAnyTagName=!0:d.tagNames.push(a[o].toLowerCase());else d.tagNames=[d.elementTagName]}function I(t,e,n){return new D(t,e,n)}var O=t.dom,P=O.DomPosition,M=O.arrayContains,L="span",$=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){e.className&&(e.className=e.className.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),t))}}(),B=O.getComputedStyleProperty,F=function(){var t=document.createElement("div");return"boolean"==typeof t.isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return t&&1==t.nodeType&&"false"!=t.contentEditable?"true"==t.contentEditable||F(t.parentNode):!1}}(),H=/^inline(-block|-table)?$/i,V=/[^\r\n\t\f \u200B]/,U=N(!1),j=N(!0);R.prototype={doMerge:function(t){var e=this.textNodes,n=e[0];if(e.length>1){for(var i,a,r,o,s=[],l=0,d=0,c=e.length;c>d;++d){if(i=e[d],a=i.parentNode,d>0&&(a.removeChild(i),a.hasChildNodes()||a.parentNode.removeChild(a),t))for(r=0;o=t[r++];)o.node==i&&(o.node=n,o.offset+=l);s[d]=i.data,l+=i.data.length}n.data=s.join("")}return n.data},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;n>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}};var G=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],z={};D.prototype={elementTagName:L,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(t,e,n){var i,a,s,l,d,c,u={};for(var h in t)if(t.hasOwnProperty(h))if(l=t[h],d=e[h],"className"==h)r(e,l),r(e,this.cssClass),e[h]=o(e[h]),n&&(u[h]=e[h]);else if("style"==h){a=d,n&&(u[h]=s={});for(i in t[h])a[i]=l[i],n&&(s[i]=a[i]);this.attrExceptions.push(h)}else e[h]=l,n&&(u[h]=e[h],c=z.hasOwnProperty(h)?z[h]:h,this.attrExceptions.push(c));return n?u:""},copyAttributesToElement:function(t,e){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])},hasClass:function(t){return 1==t.nodeType&&M(this.tagNames,t.tagName.toLowerCase())&&a(t,this.cssClass)},getSelfOrAncestorWithClass:function(t){for(;t;){if(this.hasClass(t))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||C(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&_(t)},postApply:function(t,e,n,i){for(var a,r,o,s=t[0],l=t[t.length-1],d=[],c=s,u=l,h=0,p=l.length,f=0,g=t.length;g>f;++f)r=t[f],o=U(r,!i),o?(a||(a=new R(o),d.push(a)),a.textNodes.push(r),r===s&&(c=a.textNodes[0],h=c.length),r===l&&(u=a.textNodes[0],p=a.getLength())):a=null;var m=j(l,!i);if(m&&(a||(a=new R(l),d.push(a)),a.textNodes.push(m)),d.length){for(f=0,g=d.length;g>f;++f)d[f].doMerge(n);e.setStartAndEnd(c,h,u,p)}},createContainer:function(t){var e=t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,e,!1),this.copyAttributesToElement(this.elementAttributes,e),r(e,this.cssClass),this.onElementCreate&&this.onElementCreate(e,this),e},applyToTextNode:function(t){var e=t.parentNode;if(1==e.childNodes.length&&this.useExistingElements&&M(this.tagNames,e.tagName.toLowerCase())&&y(e,this.elementProperties))r(e,this.cssClass);else{var n=this.createContainer(O.getDocument(t));t.parentNode.insertBefore(n,t),n.appendChild(t)}},isRemovable:function(t){return t.tagName.toLowerCase()==this.elementTagName&&s(t)==this.elementSortedClassName&&y(t,this.elementProperties)&&!b(t,this.attrExceptions)&&this.isModifiable(t)},isEmptyContainer:function(t){var e=t.childNodes.length;return 1==t.nodeType&&this.isRemovable(t)&&(0==e||1==e&&this.isEmptyContainer(t.firstChild))},removeEmptyContainers:function(t){for(var e,n=this,i=t.getNodes([1],function(t){return n.isEmptyContainer(t)}),a=[t],r=T(a),o=0;e=i[o++];)h(e,r);S(a,r)},undoToTextNode:function(t,e,n,i){if(!e.containsNode(n)){var a=e.cloneRange();a.selectNode(n),a.isPointInRange(e.endContainer,e.endOffset)&&(A(n,e.endContainer,e.endOffset,i),e.setEndAfter(n)),a.isPointInRange(e.startContainer,e.startOffset)&&(n=A(n,e.startContainer,e.startOffset,i))}this.isRemovable(n)?f(n,i):$(n,this.cssClass)},applyToRange:function(t,e){e=e||[];var n=T(e||[]);t.splitBoundariesPreservingPositions(n),this.removeEmptyElements&&this.removeEmptyContainers(t);var i=m(t);if(i.length){for(var a,r=0;a=i[r++];)this.isIgnorableWhiteSpaceNode(a)||this.getSelfOrAncestorWithClass(a)||!this.isModifiable(a)||this.applyToTextNode(a,n);a=i[i.length-1],t.setStartAndEnd(i[0],0,a,a.length),this.normalize&&this.postApply(i,t,n,!1),S(e,n)}},applyToRanges:function(t){for(var e=t.length;e--;)this.applyToRange(t[e],t);return t},applyToSelection:function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(t,e){e=e||[];var n=T(e);t.splitBoundariesPreservingPositions(n),this.removeEmptyElements&&this.removeEmptyContainers(t,n);var i,a,r=m(t),o=r[r.length-1];if(r.length){for(var s=0,l=r.length;l>s;++s)i=r[s],a=this.getSelfOrAncestorWithClass(i),a&&this.isModifiable(i)&&this.undoToTextNode(i,t,a,n),t.setStartAndEnd(r[0],0,o,o.length);this.normalize&&this.postApply(r,t,n,!0),S(e,n)}},undoToRanges:function(t){for(var e=t.length;e--;)this.undoToRange(t[e],t);return t},undoToSelection:function(e){var n=t.getSelection(e),i=t.getSelection(e).getAllRanges();this.undoToRanges(i),n.setRanges(i)},isAppliedToRange:function(t){if(t.collapsed||""==t.toString())return!!this.getSelfOrAncestorWithClass(t.commonAncestorContainer);var e=t.getNodes([3]);if(e.length)for(var n,i=0;n=e[i++];)if(!this.isIgnorableWhiteSpaceNode(n)&&g(t,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(t){var e=t.length;if(0==e)return!1;for(;e--;)if(!this.isAppliedToRange(t[e]))return!1;return!0},isAppliedToSelection:function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},getElementsWithClassIntersectingRange:function(t){var e=[],n=this;return t.getNodes([3],function(t){var i=n.getSelfOrAncestorWithClass(t);i&&!M(e,i)&&e.push(i)}),e},detach:function(){}},D.util={hasClass:a,addClass:r,removeClass:$,hasSameClasses:l,replaceWithOwnChildren:f,elementsHaveSameNonClassAttributes:v,elementHasNonClassAttributes:b,splitNodeAt:A,isEditableElement:F,isEditingHost:w,isEditable:C},t.CssClassApplier=t.ClassApplier=D,t.createCssClassApplier=t.createClassApplier=I}),rangy.createModule("SaveRestore",["WrappedRange"],function(t,e){function n(t,e){return(e||document).getElementById(t)}function i(t,e){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=f.getDocument(t.startContainer),r=t.cloneRange();return r.collapse(e),n=a.createElement("span"),n.id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(a.createTextNode(g)),r.insertNode(n),r.detach(),n}function a(t,i,a,r){var o=n(a,t);o?(i[r?"setStartBefore":"setEndBefore"](o),o.parentNode.removeChild(o)):e.warn("Marker element has been removed. Cannot restore selection.")}function r(t,e){return e.compareBoundaryPoints(t.START_TO_START,t)}function o(e,n){var a,r,o=t.DomRange.getRangeDocument(e),s=e.toString();return e.collapsed?(r=i(e,!1),{document:o,markerId:r.id,collapsed:!0}):(r=i(e,!1),a=i(e,!0),{document:o,startMarkerId:a.id,endMarkerId:r.id,collapsed:!1,backward:n,toString:function(){return"original text: '"+s+"', new text: '"+e.toString()+"'"}})}function s(i,r){var o=i.document;"undefined"==typeof r&&(r=!0);var s=t.createRange(o);if(i.collapsed){var l=n(i.markerId,o);if(l){l.style.display="inline";var d=l.previousSibling;d&&3==d.nodeType?(l.parentNode.removeChild(l),s.collapseToPoint(d,d.length)):(s.collapseBefore(l),l.parentNode.removeChild(l))}else e.warn("Marker element has been removed. Cannot restore selection.")}else a(o,s,i.startMarkerId,!0),a(o,s,i.endMarkerId,!1);return r&&s.normalizeBoundaries(),s}function l(e,i){var a,s,l=[];e=e.slice(0),e.sort(r);for(var d=0,c=e.length;c>d;++d)l[d]=o(e[d],i);for(d=c-1;d>=0;--d)a=e[d],s=t.DomRange.getRangeDocument(a),a.collapsed?a.collapseAfter(n(l[d].markerId,s)):(a.setEndBefore(n(l[d].endMarkerId,s)),a.setStartAfter(n(l[d].startMarkerId,s)));return l}function d(n){if(!t.isSelectionValid(n))return e.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var i=t.getSelection(n),a=i.getAllRanges(),r=1==a.length&&i.isBackward(),o=l(a,r);return r?i.setSingleRange(a[0],"backward"):i.setRanges(a),{win:n,rangeInfos:o,restored:!1}}function c(t){for(var e=[],n=t.length,i=n-1;i>=0;i--)e[i]=s(t[i],!0);return e}function u(e,n){if(!e.restored){var i=e.rangeInfos,a=t.getSelection(e.win),r=c(i),o=i.length;1==o&&n&&t.features.selectionHasExtend&&i[0].backward?(a.removeAllRanges(),a.addRange(r[0],!0)):a.setRanges(r),e.restored=!0}}function h(t,e){var i=n(e,t);i&&i.parentNode.removeChild(i)}function p(t){for(var e,n=t.rangeInfos,i=0,a=n.length;a>i;++i)e=n[i],e.collapsed?h(t.doc,e.markerId):(h(t.doc,e.startMarkerId),h(t.doc,e.endMarkerId))}var f=t.dom,g="";t.util.extend(t,{saveRange:o,restoreRange:s,saveRanges:l,restoreRanges:c,saveSelection:d,restoreSelection:u,removeMarkerElement:h,removeMarkers:p})}),rangy.createModule("Serializer",["WrappedSelection"],function(t,e){function n(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(t,e){e=e||[];var a=t.nodeType,r=t.childNodes,o=r.length,s=[a,t.nodeName,o].join(":"),l="",d="";switch(a){case 3:l=n(t.nodeValue);break;case 8:l="<!--"+n(t.nodeValue)+"-->";break;default:l="<"+s+">",d="</>"}l&&e.push(l);for(var c=0;o>c;++c)i(r[c],e);return d&&e.push(d),e}function a(t){var e=i(t).join("");return v(e).toString(16)}function r(t,e,n){var i=[],a=t;for(n=n||b.getDocument(t).documentElement;a&&a!=n;)i.push(b.getNodeIndex(a,!0)),a=a.parentNode;return i.join("/")+":"+e}function o(t,n,i){n||(n=(i||document).documentElement);for(var a,r=t.split(":"),o=n,s=r[0]?r[0].split("/"):[],l=s.length;l--;){if(a=parseInt(s[l],10),!(a<o.childNodes.length))throw e.createError("deserializePosition() failed: node "+b.inspectNode(o)+" has no child with index "+a+", "+l);o=o.childNodes[a]}return new b.DomPosition(o,parseInt(r[1],10))}function s(n,i,o){if(o=o||t.DomRange.getRangeDocument(n).documentElement,!b.isOrIsAncestorOf(o,n.commonAncestorContainer))throw e.createError("serializeRange(): range "+n.inspect()+" is not wholly contained within specified root node "+b.inspectNode(o));var s=r(n.startContainer,n.startOffset,o)+","+r(n.endContainer,n.endOffset,o);return i||(s+="{"+a(o)+"}"),s}function l(n,i,r){i?r=r||b.getDocument(i):(r=r||document,i=r.documentElement);var s=y.exec(n),l=s[4],d=a(i);if(l&&l!==a(i))throw e.createError("deserializeRange(): checksums of serialized range root node ("+l+") and target root node ("+d+") do not match");var c=o(s[1],i,r),u=o(s[2],i,r),h=t.createRange(r);return h.setStartAndEnd(c.node,c.offset,u.node,u.offset),h}function d(t,e,n){e||(e=(n||document).documentElement);var i=y.exec(t),r=i[3];return!r||r===a(e)}function c(e,n,i){e=t.getSelection(e);for(var a=e.getAllRanges(),r=[],o=0,l=a.length;l>o;++o)r[o]=s(a[o],n,i);return r.join("|")}function u(e,n,i){n?i=i||b.getWindow(n):(i=i||window,n=i.document.documentElement);for(var a=e.split("|"),r=t.getSelection(i),o=[],s=0,d=a.length;d>s;++s)o[s]=l(a[s],n,i.document);return r.setRanges(o),r}function h(t,e,n){var i;e?i=n?n.document:b.getDocument(e):(n=n||window,e=n.document.documentElement);for(var a=t.split("|"),r=0,o=a.length;o>r;++r)if(!d(a[r],e,i))return!1;return!0}function p(t){for(var e,n,i=t.split(/[;,]/),a=0,r=i.length;r>a;++a)if(e=i[a].split("="),e[0].replace(/^\s+/,"")==w&&(n=e[1]))return decodeURIComponent(n.replace(/\s+$/,""));return null}function f(t){t=t||window;var e=p(t.document.cookie);e&&u(e,t.doc)}function g(e,n){e=e||window,n="object"==typeof n?n:{};var i=n.expires?";expires="+n.expires.toUTCString():"",a=n.path?";path="+n.path:"",r=n.domain?";domain="+n.domain:"",o=n.secure?";secure":"",s=c(t.getSelection(e));e.document.cookie=encodeURIComponent(w)+"="+encodeURIComponent(s)+i+a+r+o}var m="undefined";(typeof encodeURIComponent==m||typeof decodeURIComponent==m)&&e.fail("Global object is missing encodeURIComponent and/or decodeURIComponent method");var v=function(){function t(t){for(var e,n=[],i=0,a=t.length;a>i;++i)e=t.charCodeAt(i),128>e?n.push(e):2048>e?n.push(e>>6|192,63&e|128):n.push(e>>12|224,e>>6&63|128,63&e|128);return n}function e(){for(var t,e,n=[],i=0;256>i;++i){for(e=i,t=8;t--;)1==(1&e)?e=e>>>1^3988292384:e>>>=1;n[i]=e>>>0}return n}function n(){return i||(i=e()),i}var i=null;return function(e){for(var i,a=t(e),r=-1,o=n(),s=0,l=a.length;l>s;++s)i=255&(r^a[s]),r=r>>>8^o[i];return(-1^r)>>>0}}(),b=t.dom,y=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,w="rangySerializedSelection";t.serializePosition=r,t.deserializePosition=o,t.serializeRange=s,t.deserializeRange=l,t.canDeserializeRange=d,t.serializeSelection=c,t.deserializeSelection=u,t.canDeserializeSelection=h,t.restoreSelectionFromCookie=f,t.saveSelectionCookie=g,t.getElementChecksum=a,t.nodeToInfoString=i}),rangy.createModule("TextRange",["WrappedSelection"],function(t,e){function n(t,e){function n(e,n,i){for(var a=t.slice(e,n),r={isWord:i,chars:a,toString:function(){return a.join("")}},o=0,l=a.length;l>o;++o)a[o].token=r;s.push(r)}for(var i,a,r,o=t.join(""),s=[],l=0;i=e.wordRegex.exec(o);){if(a=i.index,r=a+i[0].length,a>l&&n(l,a,!1),e.includeTrailingSpace)for(;Z.test(t[r]);)++r;n(a,r,!0),l=r}return l<t.length&&n(l,t.length,!1),s}function i(t,e){if(t){var n={};return G(n,e),G(n,t),n}return e}function a(t){var e,n;return t?(e=t.language||K,n={},G(n,re[e]||re[K]),G(n,t),n):re[K]}function r(t){return i(t,ie)}function o(t){return i(t,ae)}function s(t,e){var n=ce(t,"display",e),i=t.tagName.toLowerCase();return"block"==n&&ne&&ue.hasOwnProperty(i)?ue[i]:n}function l(t){for(var e=p(t),n=0,i=e.length;i>n;++n)if(1==e[n].nodeType&&"none"==s(e[n]))return!0;return!1}function d(t){var e;return 3==t.nodeType&&(e=t.parentNode)&&"hidden"==ce(e,"visibility")}function c(t){return t&&(1==t.nodeType&&!/^(inline(-block|-table)?|none)$/.test(s(t))||9==t.nodeType||11==t.nodeType)}function u(t){return U.isCharacterDataNode(t)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(t.nodeName)}function h(t){for(var e=[];t.parentNode;)e.unshift(t.parentNode),t=t.parentNode;return e}function p(t){return h(t).concat([t])}function f(t){for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null}function g(t,e){return!e&&t.hasChildNodes()?t.firstChild:f(t)}function m(t){var e=t.previousSibling;if(e){for(t=e;t.hasChildNodes();)t=t.lastChild;return t}var n=t.parentNode;return n&&1==n.nodeType?n:null}function v(t){if(!t||3!=t.nodeType)return!1;var e=t.data;if(""===e)return!0;var n=t.parentNode;if(!n||1!=n.nodeType)return!1;var i=ce(t.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(e)&&/^(normal|nowrap)$/.test(i)||/^[\t\r ]+$/.test(e)&&"pre-line"==i}function b(t){if(""===t.data)return!0;if(!v(t))return!1;var e=t.parentNode;return e?l(t)?!0:!1:!0}function y(t){var e=t.nodeType;return 7==e||8==e||l(t)||/^(script|style)$/i.test(t.nodeName)||d(t)||b(t)}function w(t,e){var n=t.nodeType;return 7==n||8==n||1==n&&"none"==s(t,e)}function C(){this.store={}}function x(t,e,n){return function(i){var a=this.cache;if(a.hasOwnProperty(t))return he++,a[t];pe++;var r=e.call(this,n?this[n]:this,i);return a[t]=r,r}}function _(t,e){this.node=t,this.session=e,this.cache=new C,this.positions=new C}function T(t,e){this.offset=e,this.nodeWrapper=t,this.node=t.node,this.session=t.session,this.cache=new C}function S(){return"[Position("+U.inspectNode(this.node)+":"+this.offset+")]"}function E(){return k(),Se=new Ee}function A(){return Se||E()}function k(){Se&&Se.detach(),Se=null}function N(t,n,i,a){function r(){var t=null;return n?(t=s,l||(s=s.previousVisible(),l=!s||i&&s.equals(i))):l||(t=s=s.nextVisible(),l=!s||i&&s.equals(i)),l&&(s=null),t}i&&(n?y(i.node)&&(i=t.previousVisible()):y(i.node)&&(i=i.nextVisible()));var o,s=t,l=!1,d=!1;return{next:function(){if(d)return d=!1,o;for(var t,e;t=r();)if(e=t.getCharacter(a))return o=t,t;return null},rewind:function(){if(!o)throw e.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");d=!0},dispose:function(){t=i=null}}}function R(t,e,n){function i(t){for(var e,n,i=[],o=t?a:r,s=!1,l=!1;e=o.next();){if(n=e.character,Y.test(n))l&&(l=!1,s=!0);else{if(s){o.rewind();break}l=!0}i.push(e)}return i}var a=N(t,!1,null,e),r=N(t,!0,null,e),o=n.tokenizer,s=i(!0),l=i(!1).reverse(),d=o(l.concat(s),n),c=s.length?d.slice(Ae(d,s[0].token)):[],u=l.length?d.slice(0,Ae(d,l.pop().token)+1):[];return{nextEndToken:function(){for(var t,e;1==c.length&&!(t=c[0]).isWord&&(e=i(!0)).length>0;)c=o(t.chars.concat(e),n);return c.shift()},previousStartToken:function(){for(var t,e;1==u.length&&!(t=u[0]).isWord&&(e=i(!1)).length>0;)u=o(e.reverse().concat(t.chars),n);return u.pop()},dispose:function(){a.dispose(),r.dispose(),c=u=null}}}function D(t,e,n,i,a){var r,o,s,l,d=0,c=t,u=Math.abs(n);if(0!==n){var h=0>n;switch(e){case H:for(o=N(t,h,null,i);(r=o.next())&&u>d;)++d,c=r;s=r,o.dispose();break;case V:for(var p=R(t,i,a),f=h?p.previousStartToken:p.nextEndToken;(l=f())&&u>d;)l.isWord&&(++d,c=h?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+e+"' not implemented")}h?(c=c.previousVisible(),d=-d):c&&c.isLeadingSpace&&(e==V&&(o=N(t,!1,null,i),s=o.next(),o.dispose()),s&&(c=s.previousVisible()))}return{position:c,unitsMoved:d}}function I(t,e,n,i){var a=t.getRangeBoundaryPosition(e,!0),r=t.getRangeBoundaryPosition(e,!1),o=i?r:a,s=i?a:r;return N(o,!!i,s,n)}function O(t,e,n){for(var i,a=[],r=I(t,e,n);i=r.next();)a.push(i);return r.dispose(),a}function P(e,n,i){var a=t.createRange(e.node);a.setStartAndEnd(e.node,e.offset,n.node,n.offset);var r=!a.expand("word",i);return a.detach(),r}function M(t,e,n,i,a){function r(t,e){var n=g[t].previousVisible(),i=g[e-1],r=!a.wholeWordsOnly||P(n,i,a.wordOptions);return{startPos:n,endPos:i,valid:r}}for(var o,s,l,d,c,u,h=Q(a.direction),p=N(t,h,t.session.getRangeBoundaryPosition(i,h),a),f="",g=[],m=null;o=p.next();)if(s=o.character,n||a.caseSensitive||(s=s.toLowerCase()),h?(g.unshift(o),f=s+f):(g.push(o),f+=s),n){if(c=e.exec(f))if(u){if(l=c.index,d=l+c[0].length,!h&&d<f.length||h&&l>0){m=r(l,d);break}}else u=!0}else if(-1!=(l=f.indexOf(e))){m=r(l,l+e.length);break}return u&&(m=r(l,d)),p.dispose(),m}function L(t){return function(){var e=!!Se,n=A(),i=[n].concat(j.toArray(arguments)),a=t.apply(this,i);return e||k(),a}}function $(t,e){return L(function(n,o,s,l){"undefined"==typeof s&&(s=o,o=H),l=i(l,se);var d=r(l.characterOptions),c=a(l.wordOptions),u=t;e&&(u=s>=0,this.collapse(!u));var h=D(n.getRangeBoundaryPosition(this,u),o,s,d,c),p=h.position;return this[u?"setStart":"setEnd"](p.node,p.offset),h.unitsMoved})}function B(t){return L(function(e,n){n=r(n);for(var i,a=I(e,this,n,!t),o=0;(i=a.next())&&Y.test(i.character);)++o;a.dispose();var s=o>0;return s&&this[t?"moveStart":"moveEnd"]("character",t?o:-o,{characterOptions:n}),s})}function F(t){return L(function(e,n){var i=!1;return this.changeEachRange(function(e){i=e[t](n)||i}),i})}var H="character",V="word",U=t.dom,j=t.util,G=j.extend,z=U.getBody,W=/^[ \t\f\r\n]+$/,q=/^[ \t\f\r]+$/,Y=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,Z=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,K="en",Q=t.Selection.isDirectionBackward,J=!1,X=!1,te=!1,ee=!0;!function(){var e=document.createElement("div");e.contentEditable="true",e.innerHTML="<p>1 </p><p></p>";var n=z(document),i=e.firstChild,a=t.getSelection();n.appendChild(e),a.collapse(i.lastChild,2),a.setStart(i.firstChild,0),J=1==(""+a).length,e.innerHTML="1 <br>",a.collapse(e,2),a.setStart(e.firstChild,0),X=1==(""+a).length,e.innerHTML="1 <p>1</p>",a.collapse(e,2),a.setStart(e.firstChild,0),te=1==(""+a).length,n.removeChild(e),a.removeAllRanges()}();var ne,ie={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0},ae={includeBlockContentTrailingSpace:!ee,includeSpaceBeforeBr:!X,includeSpaceBeforeBlock:!te,includePreLineTrailingSpace:!0},re={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:n}},oe={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},se={wordOptions:null,characterOptions:null},le={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},de={wordOptions:null,characterOptions:null,direction:"forward"},ce=U.getComputedStyleProperty;!function(){var t=document.createElement("table"),e=z(document);e.appendChild(t),ne="block"==ce(t,"display"),e.removeChild(t)}(),t.features.tableCssDisplayBlock=ne;var ue={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};C.prototype={get:function(t){return this.store.hasOwnProperty(t)?this.store[t]:null},set:function(t,e){return this.store[t]=e}};var he=0,pe=0,fe={getPosition:function(t){var e=this.positions;return e.get(t)||e.set(t,new T(this,t))
},toString:function(){return"[NodeWrapper("+U.inspectNode(this.node)+")]"}};_.prototype=fe;var ge="EMPTY",me="NON_SPACE",ve="UNCOLLAPSIBLE_SPACE",be="COLLAPSIBLE_SPACE",ye="TRAILING_SPACE_BEFORE_BLOCK",we="TRAILING_SPACE_IN_BLOCK",Ce="TRAILING_SPACE_BEFORE_BR",xe="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",_e="TRAILING_LINE_BREAK_AFTER_BR";G(fe,{isCharacterDataNode:x("isCharacterDataNode",U.isCharacterDataNode,"node"),getNodeIndex:x("nodeIndex",U.getNodeIndex,"node"),getLength:x("nodeLength",U.getNodeLength,"node"),containsPositions:x("containsPositions",u,"node"),isWhitespace:x("isWhitespace",v,"node"),isCollapsedWhitespace:x("isCollapsedWhitespace",b,"node"),getComputedDisplay:x("computedDisplay",s,"node"),isCollapsed:x("collapsed",y,"node"),isIgnored:x("ignored",w,"node"),next:x("nextPos",g,"node"),previous:x("previous",m,"node"),getTextNodeInfo:x("textNodeInfo",function(t){var e=null,n=!1,i=ce(t.parentNode,"whiteSpace"),a="pre-line"==i;return a?(e=q,n=!0):("normal"==i||"nowrap"==i)&&(e=W,n=!0),{node:t,text:t.data,spaceRegex:e,collapseSpaces:n,preLine:a}},"node"),hasInnerText:x("hasInnerText",function(t,e){for(var n=this.session,i=n.getPosition(t.parentNode,this.getNodeIndex()+1),a=n.getPosition(t,0),r=e?i:a,o=e?a:i;r!==o;){if(r.prepopulateChar(),r.isDefinitelyNonEmpty())return!0;r=e?r.previousVisible():r.nextVisible()}return!1},"node"),isRenderedBlock:x("isRenderedBlock",function(t){for(var e=t.getElementsByTagName("br"),n=0,i=e.length;i>n;++n)if(!y(e[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:x("trailingSpace",function(t){if("br"==t.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var e=t.lastChild;e;){if(!w(e))return 1==e.nodeType?this.session.getNodeWrapper(e).getTrailingSpace():"";e=e.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:x("leadingSpace",function(){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Te={character:"",characterType:ge,isBr:!1,prepopulateChar:function(){var t=this;if(!t.prepopulatedChar){var e=t.node,n=t.offset,i="",a=ge,r=!1;if(n>0)if(3==e.nodeType){var o=e.data,s=o.charAt(n-1),l=t.nodeWrapper.getTextNodeInfo(),d=l.spaceRegex;l.collapseSpaces?d.test(s)?n>1&&d.test(o.charAt(n-2))||(l.preLine&&"\n"===o.charAt(n)?(i=" ",a=xe):(i=" ",a=be)):(i=s,a=me,r=!0):(i=s,a=ve,r=!0)}else{var c=e.childNodes[n-1];if(c&&1==c.nodeType&&!y(c)&&("br"==c.tagName.toLowerCase()?(i="\n",t.isBr=!0,a=be,r=!1):t.checkForTrailingSpace=!0),!i){var u=e.childNodes[n];u&&1==u.nodeType&&!y(u)&&(t.checkForLeadingSpace=!0)}}t.prepopulatedChar=!0,t.character=i,t.characterType=a,t.isCharInvariant=r}},isDefinitelyNonEmpty:function(){var t=this.characterType;return t==me||t==ve},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();t&&(this.isTrailingSpace=!0,this.character=t,this.characterType=be),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();e&&(this.isLeadingSpace=!0,this.character=e,this.characterType=be),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(t){for(var e,n=this;n=n.previousVisible();)if(e=n.getCharacter(t),""!==e)return n;return null},getCharacter:function(t){function e(){return l||(r=d.getPrecedingUncollapsedPosition(t),l=!0),r}if(this.resolveLeadingAndTrailingSpaces(),this.isCharInvariant)return this.character;var n=["character",t.includeSpaceBeforeBr,t.includeBlockContentTrailingSpace,t.includePreLineTrailingSpace].join("_"),i=this.cache.get(n);if(null!==i)return i;var a,r,o="",s=this.characterType==be,l=!1,d=this;return s?(" "!=this.character||e()&&!r.isTrailingSpace&&"\n"!=r.character)&&("\n"==this.character&&this.isLeadingSpace?e()&&"\n"!=r.character&&(o="\n"):(a=this.nextUncollapsed(),a&&(a.isBr?this.type=Ce:a.isTrailingSpace&&"\n"==a.character?this.type=we:a.isLeadingSpace&&"\n"==a.character&&(this.type=ye),"\n"===a.character?(this.type!=Ce||t.includeSpaceBeforeBr)&&(this.type!=ye||t.includeSpaceBeforeBlock)&&(this.type==we&&a.isTrailingSpace&&!t.includeBlockContentTrailingSpace||(this.type!=xe||a.type!=me||t.includePreLineTrailingSpace)&&("\n"===this.character?a.isTrailingSpace?this.isTrailingSpace||this.isBr&&(a.type=_e,e()&&r.isLeadingSpace&&"\n"==r.character&&(a.character="")):o="\n":" "===this.character&&(o=" "))):o=this.character))):"\n"===this.character&&(!(a=this.nextUncollapsed())||a.isTrailingSpace),this.cache.set(n,o),o},equals:function(t){return!!t&&this.node===t.node&&this.offset===t.offset},inspect:S,toString:function(){return this.character}};T.prototype=Te,G(Te,{next:x("nextPos",function(t){var e=t.nodeWrapper,n=t.node,i=t.offset,a=e.session;if(!n)return null;var r,o,s;return i==e.getLength()?(r=n.parentNode,o=r?e.getNodeIndex()+1:0):e.isCharacterDataNode()?(r=n,o=i+1):(s=n.childNodes[i],a.getNodeWrapper(s).containsPositions()?(r=s,o=0):(r=n,o=i+1)),r?a.getPosition(r,o):null}),previous:x("previous",function(t){var e,n,i,a=t.nodeWrapper,r=t.node,o=t.offset,s=a.session;return 0==o?(e=r.parentNode,n=e?a.getNodeIndex():0):a.isCharacterDataNode()?(e=r,n=o-1):(i=r.childNodes[o-1],s.getNodeWrapper(i).containsPositions()?(e=i,n=U.getNodeLength(i)):(e=r,n=o-1)),e?s.getPosition(e,n):null}),nextVisible:x("nextVisible",function(t){var e=t.next();if(!e)return null;var n=e.nodeWrapper,i=e.node,a=e;return n.isCollapsed()&&(a=n.session.getPosition(i.parentNode,n.getNodeIndex()+1)),a}),nextUncollapsed:x("nextUncollapsed",function(t){for(var e=t;e=e.nextVisible();)if(e.resolveLeadingAndTrailingSpaces(),""!==e.character)return e;return null}),previousVisible:x("previousVisible",function(t){var e=t.previous();if(!e)return null;var n=e.nodeWrapper,i=e.node,a=e;return n.isCollapsed()&&(a=n.session.getPosition(i.parentNode,n.getNodeIndex())),a})});var Se=null,Ee=function(){function t(t){var e=new C;return{get:function(n){var i=e.get(n[t]);if(i)for(var a,r=0;a=i[r++];)if(a.node===n)return a;return null},set:function(n){var i=n.node[t],a=e.get(i)||e.set(i,[]);a.push(n)}}}function e(){this.initCaches()}var n=j.isHostProperty(document.documentElement,"uniqueID");return e.prototype={initCaches:function(){this.elementCache=n?function(){var t=new C;return{get:function(e){return t.get(e.uniqueID)},set:function(e){t.set(e.node.uniqueID,e)}}}():t("tagName"),this.textNodeCache=t("data"),this.otherNodeCache=t("nodeName")},getNodeWrapper:function(t){var e;switch(t.nodeType){case 1:e=this.elementCache;break;case 3:e=this.textNodeCache;break;default:e=this.otherNodeCache}var n=e.get(t);return n||(n=new _(t,this),e.set(n)),n},getPosition:function(t,e){return this.getNodeWrapper(t).getPosition(e)},getRangeBoundaryPosition:function(t,e){var n=e?"start":"end";return this.getPosition(t[n+"Container"],t[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},e}();G(U,{nextNode:g,previousNode:m});var Ae=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;++n)if(t[n]===e)return n;return-1};G(t.rangePrototype,{moveStart:$(!0,!1),moveEnd:$(!1,!1),move:$(!0,!0),trimStart:B(!0),trimEnd:B(!1),trim:L(function(t,e){var n=this.trimStart(e),i=this.trimEnd(e);return n||i}),expand:L(function(t,e,n){var o=!1;n=i(n,le);var s=r(n.characterOptions);if(e||(e=H),e==V){var l,d,c=a(n.wordOptions),u=t.getRangeBoundaryPosition(this,!0),h=t.getRangeBoundaryPosition(this,!1),p=R(u,s,c),f=p.nextEndToken(),g=f.chars[0].previousVisible();if(this.collapsed)l=f;else{var m=R(h,s,c);l=m.previousStartToken()}return d=l.chars[l.chars.length-1],g.equals(u)||(this.setStart(g.node,g.offset),o=!0),d&&!d.equals(h)&&(this.setEnd(d.node,d.offset),o=!0),n.trim&&(n.trimStart&&(o=this.trimStart(s)||o),n.trimEnd&&(o=this.trimEnd(s)||o)),o}return this.moveEnd(H,1,n)}),text:L(function(t,e){return this.collapsed?"":O(t,this,r(e)).join("")}),selectCharacters:L(function(t,e,n,i,a){var r={characterOptions:a};e||(e=z(this.getDocument())),this.selectNodeContents(e),this.collapse(!0),this.moveStart("character",n,r),this.collapse(!0),this.moveEnd("character",i-n,r)}),toCharacterRange:L(function(t,e,n){e||(e=z(this.getDocument()));var i,a,r=e.parentNode,o=U.getNodeIndex(e),s=-1==U.comparePoints(this.startContainer,this.endContainer,r,o),l=this.cloneRange();return s?(l.setStartAndEnd(this.startContainer,this.startOffset,r,o),i=-l.text(n).length):(l.setStartAndEnd(r,o,this.startContainer,this.startOffset),i=l.text(n).length),a=i+this.text(n).length,{start:i,end:a}}),findText:L(function(e,n,r){r=i(r,oe),r.wholeWordsOnly&&(r.wordOptions=a(r.wordOptions),r.wordOptions.includeTrailingSpace=!1);var o=Q(r.direction),s=r.withinRange;s||(s=t.createRange(),s.selectNodeContents(this.getDocument()));var l=n,d=!1;"string"==typeof l?r.caseSensitive||(l=l.toLowerCase()):d=!0;var c=e.getRangeBoundaryPosition(this,!o),u=s.comparePoint(c.node,c.offset);-1===u?c=e.getRangeBoundaryPosition(s,!0):1===u&&(c=e.getRangeBoundaryPosition(s,!1));for(var h,p=c,f=!1;;)if(h=M(p,l,d,s,r)){if(h.valid)return this.setStartAndEnd(h.startPos.node,h.startPos.offset,h.endPos.node,h.endPos.offset),!0;p=o?h.startPos:h.endPos}else{if(!r.wrap||f)return!1;s=s.cloneRange(),p=e.getRangeBoundaryPosition(s,!o),s.setBoundary(c.node,c.offset,o),f=!0}}),pasteHtml:function(t){if(this.deleteContents(),t){var e=this.createContextualFragment(t),n=e.lastChild;this.insertNode(e),this.collapseAfter(n)}}}),G(t.selectionPrototype,{expand:L(function(t,e,n){this.changeEachRange(function(t){t.expand(e,n)})}),move:L(function(t,e,n,i){var a=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var r=this.getRangeAt(0);i||(i={}),i.characterOptions=o(i.characterOptions),a=r.move(e,n,i),this.setSingleRange(r)}return a}),trimStart:F("trimStart"),trimEnd:F("trimEnd"),trim:F("trim"),selectCharacters:L(function(e,n,i,a,r,o){var s=t.createRange(n);s.selectCharacters(n,i,a,o),this.setSingleRange(s,r)}),saveCharacterRanges:L(function(t,e,n){for(var i=this.getAllRanges(),a=i.length,r=[],o=1==a&&this.isBackward(),s=0,l=i.length;l>s;++s)r[s]={characterRange:i[s].toCharacterRange(e,n),backward:o,characterOptions:n};return r}),restoreCharacterRanges:L(function(e,n,i){this.removeAllRanges();for(var a,r,o,s=0,l=i.length;l>s;++s)r=i[s],o=r.characterRange,a=t.createRange(n),a.selectCharacters(n,o.start,o.end,r.characterOptions),this.addRange(a,r.backward)}),text:L(function(t,e){for(var n=[],i=0,a=this.rangeCount;a>i;++i)n[i]=this.getRangeAt(i).text(e);return n.join("")})}),t.innerText=function(e,n){var i=t.createRange(e);i.selectNodeContents(e);var a=i.text(n);return i.detach(),a},t.createWordIterator=function(t,e,n){var o=A();n=i(n,de);var s=r(n.characterOptions),l=a(n.wordOptions),d=o.getPosition(t,e),c=R(d,s,l),u=Q(n.direction);return{next:function(){return u?c.previousStartToken():c.nextEndToken()},dispose:function(){c.dispose(),this.next=function(){}}}},t.noMutation=function(t){var e=A();t(e),k()},t.noMutation.createEntryPointFunction=L,t.textRange={isBlockNode:c,isCollapsedWhitespaceNode:b,createPosition:L(function(t,e,n){return t.getPosition(e,n)})}});var ri=function(t){var e=t.url;t.data&&"POST"!==t.method||t.queryString?(e+="?"+ri.prepare(t.data),t.data=void 0):"undefined"!=typeof t.data&&(t.data=ri.prepare(t.data)),ri.send(e,t.success,t.method||"GET",t.data,t.async,t.headers||{})};ri.prepare=function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},ri.send=function(t,e,n,i,a,r){var o=new XMLHttpRequest;o.open(n,t,a),o.onreadystatechange=function(){4==o.readyState&&e(o.responseText,o)},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==n&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var s in r)o.setRequestHeader(s,r[s]);o.send(i)},ri.get=function(t,e,n,i,a,r){ri({url:t,data:e,success:n,async:i,headers:a,method:r||"GET"})},ri.post=function(t,e,n,i,a,r){ri({url:t,data:e,success:n,async:i,headers:a,method:r||"POST"})};var oi=null,si="en",li={},di={};p.prototype.init=function(){};var ci={};jQuery(window).on("beforeunload",f);var ui={unsupported:'<div class="{{baseClass}}-unsupported-overlay"></div> <div class="{{baseClass}}-unsupported-content"> It has been detected that you a using a browser that is not supported by Raptor, please use one of the following browsers: <ul> <li><a href="http://www.google.com/chrome">Google Chrome</a></li> <li><a href="http://www.firefox.com">Mozilla Firefox</a></li> <li><a href="http://www.google.com/chromeframe">Internet Explorer with Chrome Frame</a></li> </ul> <div class="{{baseClass}}-unsupported-input"> <button class="{{baseClass}}-unsupported-close">Close</button> <input name="{{baseClass}}-unsupported-show" type="checkbox" /> <label>Don\'t show this message again</label> </div> <div>',"class-menu.item":'<li><a data-value="{{value}}">{{label}}</a></li>',"click-button-to-edit.button":"<button class=\"{{baseClass}}-button\">tr('clickButtonToEditPluginButton')</button>","color-menu-basic.automatic":'<li><a data-color="automatic"><div class="{{baseClass}}-swatch" style="display: none"></div> <span>tr(\'colorMenuBasicAutomatic\')</span></a></li>',"color-menu-basic.item":'<li><a data-color="{{className}}"><div class="{{baseClass}}-swatch" style="background-color: {{color}}"></div> <span>{{label}}</span></a></li>',"embed.dialog":'<div class="{{baseClass}}-panel-tabs ui-tabs ui-widget ui-widget-content ui-corner-all"> <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"> <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a>tr(\'embedDialogTabCode\')</a></li> <li class="ui-state-default ui-corner-top"><a>tr(\'embedDialogTabPreview\')</a></li> </ul> <div class="{{baseClass}}-code-tab"> <p>tr(\'embedDialogTabCodeContent\')</p> <textarea></textarea> </div> <div class="{{baseClass}}-preview-tab" style="display: none"> <p>tr(\'embedDialogTabPreviewContent\')</p> <div class="{{baseClass}}-preview"></div> </div> </div>',"font-family.menu-item":'<li><a data-font="{{fontName}}"><span>{{fontTitle}}</span></a></li>',"image-resize.dialog":'<div class="raptor-resize-image"> <div> <label for="{{baseClass}}-width">tr(\'imageResizeDialogWidth\')</label> <input class="form-text" id="{{baseClass}}-width" name="width" type="text" placeholder="tr(\'imageResizeDialogWidthPlaceHolder\')"/> </div> <div> <label for="{{baseClass}}-height">tr(\'imageResizeDialogHeight\')</label> <input class="form-text" id="{{baseClass}}-height" name="height" type="text" placeholder="tr(\'imageResizeDialogHeightPlaceHolder\')"/> </div> <div class="{{baseClass}}-lock-proportions-container"> <span class="{{baseClass}}-lock-proportions"> <span class="ui-button-text">Constrain proportions</span> <span class="ui-icon ui-icon-locked"></span> </span> </div> </div>',"insert-file.dialog":'<div> <div> <label class="form-label">tr(\'insertFileURLLabel\')</label> <input type="text" name="location" class="form-text" placeholder="tr(\'insertFileURLPlaceHolder\')"/> </div> <div> <label class="form-label">tr(\'insertFileNameLabel\')</label> <input type="text" name="name" class="form-text" placeholder="tr(\'insertFileNamePlaceHolder\')"/> </div> </div>',"language-menu.item":'<li><a data-value="{{value}}"><span class="ui-icon ui-icon-flag-{{icon}}"></span>{{label}}</a></li>',"link.dialog":'<div style="display:none" class="{{baseClass}}-panel"> <div class="{{baseClass}}-menu"> <p>tr(\'linkCreateDialogMenuHeader\')</p> <fieldset data-menu=""></fieldset> </div> <div class="{{baseClass}}-wrap"> <div class="{{baseClass}}-content" data-content=""></div> </div> </div>',"link.document":'<h2>tr(\'linkTypeDocumentHeader\')</h2> <fieldset> <label for="{{baseClass}}-document-href">tr(\'linkTypeDocumentLocationLabel\')</label> <input id="{{baseClass}}-document-href" value="http://" name="location" class="{{baseClass}}-document-href" type="text" placeholder="tr(\'linkTypeDocumentLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeDocumentNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-document-target"> <input id="{{baseClass}}-document-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeDocumentNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeDocumentInfo\')',"link.email":'<h2>tr(\'linkTypeEmailHeader\')</h2> <fieldset class="{{baseClass}}-email"> <label for="{{baseClass}}-email">tr(\'linkTypeEmailToLabel\')</label> <input id="{{baseClass}}-email" name="email" type="text" placeholder="tr(\'linkTypeEmailToPlaceHolder\')"/> </fieldset> <fieldset class="{{baseClass}}-email"> <label for="{{baseClass}}-email-subject">tr(\'linkTypeEmailSubjectLabel\')</label> <input id="{{baseClass}}-email-subject" name="subject" type="text" placeholder="tr(\'linkTypeEmailSubjectPlaceHolder\')"/> </fieldset>',"link.error":'<div style="display:none" class="ui-widget {{baseClass}}-error-message {{messageClass}}"> <div class="ui-state-error ui-corner-all"> <p> <span class="ui-icon ui-icon-alert"></span> {{message}} </p> </div> </div>',"link.external":'<h2>tr(\'linkTypeExternalHeader\')</h2> <fieldset> <label for="{{baseClass}}-external-href">tr(\'linkTypeExternalLocationLabel\')</label> <input id="{{baseClass}}-external-href" value="http://" name="location" class="{{baseClass}}-external-href" type="text" placeholder="tr(\'linkTypeExternalLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeExternalNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-external-target"> <input id="{{baseClass}}-external-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeExternalNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeExternalInfo\')',"link.file-url":'<h2>tr(\'Link to a document or other file\')</h2> <fieldset> <label for="{{baseClass}}-external-href">tr(\'Location\')</label> <input id="{{baseClass}}-external-href" value="http://" name="location" class="{{baseClass}}-external-href" type="text" placeholder="tr(\'Enter your URL\')" /> </fieldset> <h2>tr(\'New window\')</h2> <fieldset> <label for="{{baseClass}}-external-target"> <input id="{{baseClass}}-external-target" name="blank" type="checkbox" /> <span>tr(\'Check this box to have the file open in a new browser window\')</span> </label> </fieldset> <h2>tr(\'Not sure what to put in the box above?\')</h2> <ol> <li>tr(\'Ensure the file has been uploaded to your website\')</li> <li>tr(\'Open the uploaded file in your browser\')</li> <li>tr("Copy the file\'s URL from your browser\'s address bar and paste it into the box above")</li> </ol>',"link.internal":'<h2>tr(\'linkTypeInternalHeader\')</h2> <fieldset> <label for="{{baseClass}}-internal-href">tr(\'linkTypeInternalLocationLabel\') {{domain}}</label> <input id="{{baseClass}}-internal-href" value="" name="location" class="{{baseClass}}-internal-href" type="text" placeholder="tr(\'linkTypeInternalLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeInternalNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-internal-target"> <input id="{{baseClass}}-internal-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeInternalNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeInternalInfo\')',"link.label":'<label> <input type="radio" name="link-type" autocomplete="off"/> <span>{{label}}</span> </label>',"paste.dialog":'<div class="{{baseClass}}-panel ui-dialog-content ui-widget-content"> <div class="{{baseClass}}-panel-tabs ui-tabs ui-widget ui-widget-content ui-corner-all"> <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"> <li class="{{baseClass}}-tab-formatted-clean ui-state-default ui-corner-top ui-state-active ui-tabs-selected" style="display: none"><a>tr(\'pasteDialogFormattedCleaned\')</a></li> <li class="{{baseClass}}-tab-plain-text ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogPlain\')</a></li> <li class="{{baseClass}}-tab-formatted-unclean ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogFormattedUnclean\')</a></li> <li class="{{baseClass}}-tab-source ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogSource\')</a></li> </ul> <div class="{{baseClass}}-content-formatted-clean" style="display: none"> <div contenteditable="true" class="{{baseClass}}-area {{baseClass}}-markup"></div> </div> <div class="{{baseClass}}-content-plain-text" style="display: none"> <textarea class="{{baseClass}}-area {{baseClass}}-plain"></textarea> </div> <div class="{{baseClass}}-content-formatted-unclean" style="display: none"> <div contenteditable="true" class="{{baseClass}}-area {{baseClass}}-rich"></div> </div> <div class="{{baseClass}}-content-source" style="display: none"> <textarea class="{{baseClass}}-area {{baseClass}}-source"></textarea> </div> </div> </div>',"snippet-menu.item":'<li><a data-name="{{name}}">{{name}}</a></li>',"special-characters.dialog":"<div> tr('specialCharactersHelp') <br/> <ul></ul> </div>","special-characters.tab-button":'<button data-setKey="{{setKey}}" data-charactersIndex="{{charactersIndex}}" title="{{description}}">{{htmlEntity}}</button>',"special-characters.tab-content":'<div id="{{baseClass}}-{{key}}"></div>',"special-characters.tab-li":'<li><a href="#{{baseClass}}-{{key}}">{{name}}</a></li>',"statistics.dialog":'<div> <ul> <li data-name="characters"></li> <li data-name="words"></li> <li data-name="sentences"></li> <li data-name="truncation"></li> </ul> </div>',"table.create-menu":'<table class="{{baseClass}}-menu"> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> </table>',"tag-menu.menu":"<li><a data-value=\"na\">tr('tagMenuTagNA')</a></li> <li><a data-value=\"p\">tr('tagMenuTagP')</a></li> <li><a data-value=\"h1\">tr('tagMenuTagH1')</a></li> <li><a data-value=\"h2\">tr('tagMenuTagH2')</a></li> <li><a data-value=\"h3\">tr('tagMenuTagH3')</a></li> <li><a data-value=\"h4\">tr('tagMenuTagH4')</a></li> <li><a data-value=\"div\">tr('tagMenuTagDiv')</a></li> <li><a data-value=\"pre\">tr('tagMenuTagPre')</a></li> <li><a data-value=\"address\">tr('tagMenuTagAddress')</a></li>","unsaved-edit-warning.warning":'<div class="{{baseClass}} ui-corner-tl"> <span class="ui-icon ui-icon-alert"></span> <span>tr(\'unsavedEditWarningText\')</span> </div>',"view-source.dialog":'<div class="{{baseClass}}-inner-wrapper"> <textarea></textarea> </div>'};o("en","English",{alignCenterTitle:"Align text center",alignJustifyTitle:"Align text justify",alignLeftTitle:"Align text left",alignRightTitle:"Align text right",cancelDialogCancelButton:"Continue Editing",cancelDialogContent:"Are you sure you want to cancel editing? All changes will be lost!",cancelDialogOKButton:"Cancel Editing",cancelDialogTitle:"Cancel Editing",cancelTitle:"Cancel editing",classMenuTitle:"Style picker",clearFormattingTitle:"Clear formatting",clickButtonToEditText:"Edit",clickButtonToEditTitle:null,closeTitle:"Close this toolbar",colorMenuBasicAutomatic:"Automatic",colorMenuBasicBlack:"Black",colorMenuBasicBlue:"Blue",colorMenuBasicGreen:"Green",colorMenuBasicGrey:"Grey",colorMenuBasicOrange:"Orange",colorMenuBasicPurple:"Purple",colorMenuBasicRed:"Red",colorMenuBasicTitle:"Change text color",colorMenuBasicWhite:"White",dockToElementTitle:"Dock/undock editor to element",dockToScreenTitle:"Dock/undock editor to screen",embedTitle:"Embed object",embedDialogTitle:"Embed Object",embedDialogTabCode:"Embed Code",embedDialogTabCodeContent:"Paste your embed code into the text area below:",embedDialogTabPreview:"Preview",embedDialogTabPreviewContent:"A preview of your embedded object is displayed below:",embedDialogOKButton:"Embed Object",embedDialogCancelButton:"Cancel",errorUINoName:'UI "{{ui}}" is invalid (must have a name property)',errorUINotObject:'UI "{{ui}}" is invalid (must be an object)',errorUIOverride:'UI "{{name}}" has already been registered, and will be overwritten',floatLeftTitle:"Align image to the left",floatNoneTitle:"Remove image align",floatRightTitle:"Align image to the right",fontFamilyMenuTitle:"Choose your font",fontFamilyMenuFontDefault:"Default Font",fontFamilyMenuFontArial:"Arial",fontFamilyMenuFontPalatino:"Palatino",fontFamilyMenuFontGeorgia:"Georgia",fontFamilyMenuFontTimes:"Times New Roman",fontFamilyMenuFontComicSans:"Comic Sans",fontFamilyMenuFontImpact:"Impact",fontFamilyMenuFontCourier:"Courier New",guidesTitle:"Show element guides",historyRedoTitle:"Redo",historyUndoTitle:"Undo",hrCreateTitle:"Insert Horizontal Rule",imageResizeDialogWidth:"Image width",imageResizeDialogHeight:"Image height",imageResizeDialogWidthPlaceHolder:"Width",imageResizeDialogHeightPlaceHolder:"Height",imageResizeDialogTitle:"Resize Image",imageResizeDialogOKButton:"Resize",imageResizeDialogCancelButton:"Cancel",imageResizeTitle:"Resize this image",insertFileTitle:"Insert file",insertFileDialogTitle:"Insert file",insertFileDialogOKButton:"Insert file",insertFileDialogCancelButton:"Cancel",insertFileURLLabel:"File URL",insertFileNameLabel:"File Name",insertFileURLPlaceHolder:"File URL...",insertFileNamePlaceHolder:"File Name...",languageMenuTitle:"Change Language",loremIpsumTitle:"Insert dummy text for testing",listOrderedTitle:"Ordered list",listUnorderedTitle:"Unordered list",linkCreateTitle:"Insert Link",linkRemoveTitle:"Remove Link",linkCreateDialogTitle:"Insert Link",linkCreateDialogOKButton:"Insert Link",linkCreateDialogCancelButton:"Cancel",linkCreateDialogMenuHeader:"Choose a link type",linkTypeEmailLabel:"Email address",linkTypeEmailHeader:"Link to an email address",linkTypeEmailToLabel:"Email:",linkTypeEmailToPlaceHolder:"Enter email address",linkTypeEmailSubjectLabel:"Subject (optional):",linkTypeEmailSubjectPlaceHolder:"Enter subject",linkTypeExternalLabel:"Page on another website",linkTypeExternalHeader:"Link to a page on another website",linkTypeExternalLocationLabel:"Location:",linkTypeExternalLocationPlaceHolder:"Enter a URL",linkTypeExternalNewWindowHeader:"New window",linkTypeExternalNewWindowLabel:"Check this box to have the link open in a new browser window/tab.",linkTypeExternalInfo:"<h2>Not sure what to put in the box above?</h2><ol>    <li>Find the page on the web you want to link to.</li>    <li>Copy the web address from your browser's address bar and paste it into the box above.</li></ol>",linkTypeDocumentLabel:"Document or other file",linkTypeDocumentHeader:"Link to a document or other file",linkTypeDocumentLocationLabel:"Location:",linkTypeDocumentLocationPlaceHolder:"Enter a URL",linkTypeDocumentNewWindowHeader:"New window",linkTypeDocumentNewWindowLabel:"Check this box to have the file open in a new browser window/tab.",linkTypeDocumentInfo:"<h2>Not sure what to put in the box above?</h2><ol>    <li>Ensure the file has been uploaded to your website.</li>    <li>Open the uploaded file in your browser.</li>    <li>Copy the file's URL from your browser's address bar and paste it into the box above.</li></ol>",linkTypeInternalLabel:"Page on this website",linkTypeInternalHeader:"Link to a page on this website",linkTypeInternalLocationLabel:"",linkTypeInternalLocationPlaceHolder:"Enter a URI",linkTypeInternalNewWindowHeader:"New window",linkTypeInternalNewWindowLabel:"Check this box to have the link open in a new browser window/tab.",linkTypeInternalInfo:'<h2>Not sure what to put in the box above?</h2><ol>    <li>Find the page on this site link to.</li>    <li>Copy the web address from your browser\'s address bar, excluding "{{domain}}" and paste it into the box above.</li></ol>',logoTitle:"Learn More About the Raptor WYSIWYG Editor",navigateAway:"\nThere are unsaved changes on this page. \nIf you navigate away from this page you will lose your unsaved changes",pasteDialogTitle:"Paste",pasteDialogOKButton:"Insert",pasteDialogCancelButton:"Cancel",pasteDialogPlain:"Plain Text",pasteDialogFormattedCleaned:"Formatted &amp; Cleaned",pasteDialogFormattedUnclean:"Formatted Unclean",pasteDialogSource:"Source Code",placeholderPluginDefaultContent:"<br/>",saveTitle:"Save content",saveNotConfigured:"Save has not been configured, or is disabled.",saveJsonFail:"Failed to save {{failed}} content block(s)",saveJsonSaved:"Successfully saved {{saved}} content block(s).",saveRestFail:"Failed to save {{failed}} content block(s).",saveRestPartial:"Saved {{saved}} out of {{failed}} content blocks.",saveRestSaved:"Successfully saved {{saved}} content block(s).",snippetMenuTitle:"Snippets",specialCharactersArrows:"Arrows",specialCharactersDialogOKButton:"OK",specialCharactersDialogTitle:"Insert Special Characters",specialCharactersGreekAlphabet:"Greek Alphabet",specialCharactersHelp:'Click a special character to add it. Click "OK" when done to close this dialog',specialCharactersMathematics:"Mathematics",specialCharactersSymbols:"Symbols",specialCharactersTitle:"Insert a special character",statisticsButtonCharacterOverLimit:"{{charactersRemaining}} characters over limit",statisticsButtonCharacterRemaining:"{{charactersRemaining}} characters remaining",statisticsButtonCharacters:"{{characters}} characters",statisticsDialogCharactersOverLimit:"{{characters}} characters, {{charactersRemaining}} over the recommended limit",statisticsDialogCharactersRemaining:"{{characters}} characters, {{charactersRemaining}} remaining",statisticsDialogNotTruncated:"Content will not be truncated",statisticsDialogOKButton:"Ok",statisticsDialogSentence:"{{sentences}} sentence",statisticsDialogSentences:"{{sentences}} sentences",statisticsDialogTitle:"Content Statistics",statisticsDialogTruncated:"Content contains more than {{limit}} characters and may be truncated",statisticsDialogWord:"{{words}} word",statisticsDialogWords:"{{words}} words",statisticsTitle:"Click to view statistics",imageSwapTitle:"Swap this image",tableCreateTitle:"Create table",tableDeleteColumnTitle:"Delete table column",tableDeleteRowTitle:"Delete table row",tableInsertColumnTitle:"Insert table column",tableInsertRowTitle:"Insert table row",tableMergeCellsTitle:"Merge table cells",tableSplitCellsTitle:"Split table cells",tagMenuTagH1:"Heading&nbsp;1",tagMenuTagH2:"Heading&nbsp;2",tagMenuTagH3:"Heading&nbsp;3",tagMenuTagH4:"Heading&nbsp;4",tagMenuTagNA:"N/A",tagMenuTagP:"Paragraph",tagMenuTagDiv:"Div",tagMenuTagPre:"Pre-formatted",tagMenuTagAddress:"Address",tagMenuTitle:"Change element style",tagTreeElementLink:"Select {{element}} element",tagTreeElementTitle:'Click to select the contents of the "{{element}}" element',tagTreeRoot:"root",tagTreeRootLink:"Select all editable content",tagTreeRootTitle:"Click to select all editable content",textBlockQuoteTitle:"Block quote",textBoldTitle:"Bold",textItalicTitle:"Italic",textStrikeTitle:"Strike through",textSubTitle:"Sub-script",textSuperTitle:"Super-script",textUnderlineTitle:"Underline",textSizeDecreaseTitle:"Decrease text size",textSizeIncreaseTitle:"Increase text size",unsavedEditWarningText:"There are unsaved changes on this page",revisionsText:"Revisions",revisionsTextEmpty:"No Revisions",revisionsTitle:null,revisionsCreated:"Created",revisionsApplyButtonTitle:"Rollback",revisionsApplyButtonText:"Rollback",revisionsAJAXFailed:"Failed to retrieve revisions",revisionsApplyButtonDialogCancelButton:"Cancel",revisionsApplyButtonDialogOKButton:"Rollback",revisionsApplyButtonDialogTitle:"Rollback Confirmation",revisionsApplyDialogContent:"This will replace the current content with the selected revision.<br/>The current content will be added as a revision, and will be visible in the revisions list for this block.",revisionsDialogCancelButton:"Cancel",revisionsDialogTitle:"View content revisions",revisionsButtonCurrent:"Current",revisionsButtonViewDiffText:"Differences",revisionsButtonViewDiffTitle:null,revisionsDiffButtonDialogCancelButton:"Close",revisionsDiffButtonDialogTitle:"View differences",revisionsDiffButtonTitle:"View differences",revisionsDiffButtonText:"View differences",revisionsLoading:"Loading revisions...",revisionsNone:"No revisions for this element",revisionsPreviewButtonTitle:"Preview",revisionsPreviewButtonText:"Preview",fileManagerDialogTitle:"File Manager",fileManagerTitle:"File Manager",rfmClose:"Close",rfmContinue:"Continue",rfmDeleteTitle:"Delete",rfmDownloadTitle:"Download",rfmEditTitle:"Edit",rfmFileActions:"Actions",rfmFileModificationTime:"Modified",rfmFileName:"Name",rfmFileSize:"Size",rfmFileType:"Type",rfmFilteredTotal:"Showing {{start}} to {{end}} of {{filteredTotal}} files",rfmFirst:"First",rfmHeadingDirectories:"Directories",rfmHeadingSearch:"Search",rfmHeadingTags:"Tags",rfmHeadingUpload:"Upload",rfmInsertTitle:"Insert",rfmLast:"Last",rfmRenameTitle:"Rename",rfmSearch:"Go",rfmTagDocument:"Document",rfmTagImage:"Image",rfmTotal:", filtered from {{total}}",rfmUpload:"Upload",rfmUploadBrowse:"Browse",rfmUploadDrop:"Drop Files Here",rfmUploadFileRemove:"Remove",rfmUploadOr:"or",rfmViewTitle:"View",imageEditorDialogCancelButton:"Cancel",imageEditorDialogOKButton:"Save",imageEditorDialogTitle:"Image Editor",imageEditorTitle:"Edit Image",rieApply:"Apply",rieBlurTitle:"Blur",rieBrightnessTitle:"Brightness/Contrast",rieCancel:"Cancel",rieCancelTitle:"Cancel",rieColorAdjustTitle:"Adjsut Color",rieCropTitle:"Crop",rieDesaturateTitle:"Desaturate",rieFlipHTitle:"Flip Horizontally",rieFlipVTitle:"Flip Vertically",rieGlowTitle:"Glow",rieHslTitle:"Hue, Saturation, Lightness.",rieInvertTitle:"Invert",riePosterizeTitle:"Posterize",rieRedoTitle:"Redo",rieRemoveNoiseTitle:"Remove Noise",rieResizeTitle:"Resize",rieRevertTitle:"Revert",rieRotateLeftTitle:"Rotate Left",rieRotateRightTitle:"Rotate Right",rieSaveTitle:"Save",rieSaveTitle:"Save",rieSepiaTitle:"Sepia",rieSharpenTitle:"Sharpen",rieSolarizeTitle:"Solarize",rieUndoTitle:"Undo",rieUploadTitle:"Upload",rieActionColorAdjustRed:"Red",rieActionColorAdjustGreen:"Green",rieActionColorAdjustBlue:"Blue",rieActionBrightnessBrightness:"Brightness",rieActionBrightnessContrast:"Contrast",rieActionGlowAmount:"Glow Amount",rieActionGlowRadius:"Glow Radius",rieActionHsl:"Hue",rieActionHsl:"Saturation",rieActionHsl:"Lightness",rieActionPosterize:"Levels",viewSourceDialogCancelButton:"Close",viewSourceDialogOKButton:"Apply source code",viewSourceDialogTitle:"Content source code",viewSourceTitle:"View/edit source code"});
var hi=!1,pi=jQuery;pi(function(){rangy.initialized||rangy.init(),pi.isFunction(rangy.rangePrototype.insertNodeAtEnd)||(rangy.rangePrototype.insertNodeAtEnd=function(t){var e=this.cloneRange();e.collapse(!1),e.insertNode(t),e.detach(),this.setEndAfter(t)})}),pi("html").click(function(){pi(".ui-editor-selectmenu-visible").removeClass("ui-editor-selectmenu-visible")});var fi,gi,mi,vi,bi;Object.create||(Object.create=function(t){function e(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return e.prototype=t,new e}),"undefined"==typeof Node&&(Node={TEXT_NODE:3}),"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var yi={globalDefaults:{},defaults:{},enableHotkeys:!0,hotkeys:{},plugins:{},ui:{},layouts:{},presets:{},hoverPanels:{},instances:[],getInstances:function(){return this.instances},eachInstance:function(t){for(var e=0;e<this.instances.length;e++)t.call(this.instances[e],this.instances[e])},urlPrefix:"/raptor/",getTemplate:function(t,e){var n;if(this.templates[t])n=this.templates[t];else{var i=e||this.urlPrefix,a=t.split(".");i+=1===a.length?"templates/"+a[0]+".html":"plugins/"+a[0]+"/templates/"+a.splice(1).join("/")+".html",pi.ajax({url:i,type:"GET",async:!1,timeout:15e3,error:function(){n=null},success:function(t){n=t}}),this.templates[t]=n}return n},isDirty:function(){for(var t=this.getInstances(),e=0;e<t.length;e++)if(t[e].isDirty())return!0;return!1},unloadWarning:function(){for(var t=this.getInstances(),e=0;e<t.length;e++)if(t[e].isDirty()&&t[e].isEditing()&&t[e].options.unloadWarning)return d("navigateAway")},registerUi:function(t){this.ui[t.name]=t},registerLayout:function(t){this.layouts[t.name]=t},registerPlugin:function(t){this.plugins[t.name]=t},registerPreset:function(t,e){this.presets[t.name]=t,e&&(this.defaults=t)},persist:function(t,e,n){return t=n?n+"."+t:t,void 0===e?h(t):u(t,e)}},wi=!1,Ci={_init:function(){if(!this.element.attr("data-raptor-initialised")){this.element.attr("data-raptor-initialised",!0),-1===pi.inArray(this,yi.instances)&&yi.instances.push(this);var t=this,e=this.persist("locale")||this.options.initialLocale;e&&(oi=e);var n=this.options;this.options=this.options.preset?pi.extend(!0,{},yi.globalDefaults,yi.presets[this.options.preset],this.options):pi.extend(!0,{},yi.globalDefaults,yi.defaults,this.options),n.layouts&&n.layouts.toolbar&&n.layouts.toolbar.uiOrder&&(this.options.layouts.toolbar.uiOrder=n.layouts.toolbar.uiOrder),this.element.attr("id")||this.element.attr("id",W()),this.ready=!1,this.events={},this.plugins={},this.layouts={},this.templates=pi.extend({},yi.templates),this.target=this.element,this.layout=null,this.previewState=null,this.pausedState=null,this.pausedScrollX=null,this.pausedScrollY=null,this.enabled=!1,this.initialised=!1,this.uiObjects={},this.hotkeys={},this.hotkeysSuspended=!1,this.options.enableHotkeys&&this.registerHotkey(this.hotkeys);for(var i in this.options.bind)this.bind(i,this.options.bind[i]);this.history=[],this.present=0,this.historyEnabled=!0,pn()&&(this.setOriginalHtml(this.element.is(":input")?this.element.val():this.element.html()),this.historyPush(this.getOriginalHtml()),this.element.is(":input")&&this.replaceOriginal(),this.loadPlugins(),this.dirty=!1,this.previousContent=null,this.previousSelection=null,this.getElement().addClass("raptor-editable-block"),this.loadLayouts(),this.ready=!0,this.fire("ready"),this.options.autoEnable&&pi(function(){t.enableEditing()}))}},attach:function(){this.bind("change",this.historyPush),this.getElement().on("click.raptor","img",function(t){ge(t.target),this.checkSelectionChange()}.bind(this)),this.getElement().on("focus.raptor",this.showLayout.bind(this)),this.target.on("mouseup.raptor",this.checkSelectionChange.bind(this)),this.target.on("input.raptor keyup.raptor mouseup.raptor",this.checkChangeDelayed.bind(this)),pi(window).bind("beforeunload",yi.unloadWarning.bind(yi));var t=this;pi(window).resize(function(){t.fire("resize")})},detach:function(){this.unbind("change"),this.getElement().off("click.raptor","img"),this.getElement().off("focus.raptor"),this.getElement().blur(),this.target.off("mouseup.raptor"),this.target.off("keyup.raptor")},localeChange:function(){if(!this.ready){var t;return t=function(){this.unbind("ready",t),this.localeChange()},void this.bind("ready",t)}this.actionPreviewRestore();var e=[];for(var n in this.layouts)this.layouts[n].isVisible()&&e.push(n);this.layoutsDestruct(),this.events={},this.plugins={},this.uiObjects={},this.hotkeys={},this.loadPlugins(),this.loadLayouts();for(var i=0;i<e.length;i++)this.layouts[e[i]].show();this.checkSelectionChange()},restoreFocus:function(){this.getElement().focus()},getElement:function(){return this.target},getNode:function(){return this.target[0]},getOriginalElement:function(){return this.element},replaceOriginal:function(){if(this.target.is(":input")){for(var t=pi("<div/>").html(this.element.val()).insertBefore(this.element).attr("id",W()).addClass(this.element.attr("class")).addClass(this.options.classes),e=H(this.element),n=0;n<this.options.replaceStyle.length;n++)t.css(this.options.replaceStyle[n],e[this.options.replaceStyle[n]]);this.element.hide(),this.bind("change",function(){this.getOriginalElement().is(":input")?this.getOriginalElement().val(this.getHtml()).trigger("input"):this.getOriginalElement().html(this.getHtml())}),this.target=t}},checkSelectionChange:function(){var t=rangy.serializeSelection(null,!1);this.previousSelection!==t&&this.fire("selectionChange"),this.previousSelection=t},checkChangeTimer:null,checkChangeCount:0,checkChangeDelayed:function(){null!==this.checkChangeTimer&&(clearTimeout(this.checkChangeTimer),this.checkChangeTimer=null),this.checkChangeCount++<10?this.checkChangeTimer=setTimeout(this.checkChange.bind(this),200):this.checkChange()},checkChange:function(){this.checkChangeCount=0;var t=this.getHtml(),e=this.dirty;this.dirty=this.originalHtml!==t,this.previousHtml!==t&&(this.previousHtml=t,this.fire("change",[t]),e!==this.dirty&&this.fire(this.dirty?"dirty":"cleaned"),this.checkSelectionChange())},change:function(){this.fire("change",[this.getHtml()])},destruct:function(){this.disableEditing(),this.fire("destroy"),this.events={},this.getElement().off(".raptor"),this.getOriginalElement().is(":input")&&(this.target.remove(),this.target=null,this.element.show()),this.layoutsDestruct()},actionPreview:function(t){this.actionPreviewRestore();try{var e=this.fire("selectionCustomise");e.length>0?this.previewState=T(this.previewState,this.target,function(){for(var n=0,i=e.length;i>n;n++)rangy.getSelection().setSingleRange(e[n]),this.selectionConstrain(),t()}.bind(this)):(this.selectionConstrain(),this.previewState=T(this.previewState,this.target,t)),this.checkSelectionChange()}catch(n){}},actionPreviewRestore:function(){this.previewState&&(this.target=S(this.previewState,this.target),this.previewState=null,this.checkSelectionChange())},actionApply:function(t){this.actionPreviewRestore();var e=this.stateSave();try{var n=this.fire("selectionCustomise");n.length>0?E(function(){for(var e=0,i=n.length;i>e;e++)rangy.getSelection().setSingleRange(n[e]),this.selectionConstrain(),E(t,this.history)}.bind(this),this.history):(this.selectionConstrain(),E(t,this.history)),this.checkChange()}catch(i){this.stateRestore(e)}},actionUndo:function(){},actionRedo:function(){},stateSave:function(){return this.selectionConstrain(),Le(this.target)},stateRestore:function(t){var e=$e(this.target,t),n=rangy.getSelection();this.target=e.element,null!==e.ranges&&(n.setRanges(e.ranges),n.refresh())},selectionConstrain:function(){Ae(this.target[0])},pause:function(){this.pausedState||(this.pausedState=this.stateSave(),this.suspendHotkeys(),this.pausedScrollX=window.scrollX,this.pausedScrollY=window.scrollY)},resume:function(){this.pausedState&&(this.stateRestore(this.pausedState),this.pausedState=null,this.resumeHotkeys(),this.restoreFocus(),window.scrollTo(this.pausedScrollX,this.pausedScrollY))},persist:function(t,e){return this.options.persistence?yi.persist(t,e,this.options.namespace):null},enableEditing:function(){if(!this.enabled){if(this.fire("enabling"),this.attach(),this.enabled=!0,this.getElement().addClass(this.options.baseClass+"-editing").addClass(this.options.classes),this.options.partialEdit?this.getElement().find(this.options.partialEdit).prop("contenteditable",!0):this.getElement().prop("contenteditable",!0),!this.initialised){this.initialised=!0;for(var t in this.plugins)this.plugins[t].enable();this.bindHotkeys(),this.getElement().closest("form").on("submit.raptor",function(){I(this.getElement()),this.fire("change",[this.getHtml()])}.bind(this))}I(this.getElement()),this.fire("enabled"),this.showLayout();var e=this.options.partialEdit?this.getElement().find("[contenteditable]")[0]:this.getNode();switch(this.options.autoSelect){case"all":fe(e);break;case"start":var n=pi(e).find("*:first")[0];if(!n){fe(e);break}var i=rangy.createRange();i.setStartBefore(n),i.setEndBefore(n),he(i);break;case"end":var n=pi(e).find("*:last")[0];if(!n){fe(e);break}fe(n);var i=rangy.createRange();i.setStartAfter(n),i.setEndAfter(n),he(i)}}},disableEditing:function(){this.enabled&&(this.detach(),this.enabled=!1,this.getElement().prop("contenteditable",!1).removeClass(this.options.baseClass+"-editing").removeClass(this.options.classes),rangy.getSelection().removeAllRanges(),this.fire("disabled"),this.options.reloadOnDisable&&!wi&&(wi=!0,window.location.reload()))},cancelEditing:function(){this.unify(function(t){t.stopEditing()})},stopEditing:function(){this.fire("cancel"),this.options.reloadOnDisable||this.resetHtml(),this.disableEditing(),this.dirty=!1,ce()},isEditing:function(){return this.enabled},isRoot:function(t){return this.getElement()[0]===pi(t)[0]},unify:function(t,e){if(e!==!1&&t(this),this.options.unify){var n=this;yi.eachInstance(function(e){e!==n&&e.options.unify&&t(e)})}},getLayout:function(t){return this.layouts[t]},loadLayouts:function(){for(var t in this.options.layouts)"undefined"!=typeof yi.layouts[t]&&(this.layouts[t]=this.prepareComponent(yi.layouts[t],this.options.layouts[t],"layout").instance,this.layouts[t].hotkeys&&this.registerHotkey(this.layouts[t].hotkeys,null,this.layouts[t]))},layoutsDestruct:function(){for(var t in this.layouts)this.layouts[t].destruct()},prepareComponent:function(t,e,n){var i=pi.extend({},t),a=pi.extend({},this.options,{baseClass:this.options.baseClass+"-"+n+"-"+m(t.name)},i.options,e);i.raptor=this,i.options=a;var r=i.init();return{init:r,instance:i}},showLayout:function(){this.unify(function(t){t.fire("layoutHide")},!1),this.fire("layoutShow"),this.fire("resize"),"undefined"==typeof this.getElement().attr("tabindex")&&this.getElement().attr("tabindex",-1)},getTemplate:function(t,e){return this.templates[t]||(this.templates[t]=b(t,this.options.urlPrefix)),y(this.templates[t],e)},historyPush:function(){if(this.historyEnabled){var t=this.getHtml();t!==this.historyPeek()&&(this.present!==this.history.length-1&&(this.history=this.history.splice(0,this.present+1)),this.history.push(this.getHtml()),this.present=this.history.length-1,this.fire("historyChange"))}},historyPeek:function(){return this.history.length?this.history[this.present]:null},historyBack:function(){this.present>0&&(this.present--,this.setHtml(this.history[this.present]),this.historyEnabled=!1,this.change(),this.historyEnabled=!0,this.fire("historyChange"))},historyForward:function(){this.present<this.history.length-1&&(this.present++,this.setHtml(this.history[this.present]),this.historyEnabled=!1,this.change(),this.historyEnabled=!0,this.fire("historyChange"))},registerHotkey:function(t,e){this.hotkeys[t]=e},bindHotkeys:function(){for(var t in this.hotkeys)this.getElement().on("keydown.raptor",t,function(t){if(this.isEditing()&&!this.hotkeysSuspended){var e=this.hotkeys[t.data]();e!==!1&&t.preventDefault()}}.bind(this))},suspendHotkeys:function(){this.hotkeysSuspended=!0},resumeHotkeys:function(){this.hotkeysSuspended=!1},isUiEnabled:function(t){return this.options.enableUi===!1&&"undefined"==typeof this.options.plugins[t]||this.options.plugins[t]===!1?!1:-1!==pi.inArray(t,this.options.disabledUi)||-1!==pi.inArray(t,this.options.disabledPlugins)?!1:!0},getUi:function(t){return this.uiObjects[t]},getPlugin:function(t){return this.uiObjects[t]||this.plugins[t]},loadPlugins:function(){var t=this;this.options.plugins||(this.options.plugins={});for(var e in yi.plugins)this.options.enablePlugins===!1&&"undefined"==typeof this.options.plugins[e]||this.options.plugins[e]===!1||-1===pi.inArray(e,this.options.disabledUi)&&-1===pi.inArray(e,this.options.disabledPlugins)&&(t.plugins[e]=this.prepareComponent(yi.plugins[e],t.options.plugins[e],"plugin").instance)},isDirty:function(){return this.dirty},getHtml:function(){return this.getElement().html()},clean:function(){this.actionApply(function(){I(this.getElement())}.bind(this))},setHtml:function(t){this.getElement().html(t),this.fire("html"),this.checkChange()},resetHtml:function(){this.setHtml(this.getOriginalHtml()),this.fire("cleaned")},getOriginalHtml:function(){return this.originalHtml},saved:function(t){this.setOriginalHtml(this.getHtml()),this.dirty=!1,this.fire("saved",t),this.fire("cleaned")},setOriginalHtml:function(t){this.originalHtml=t},bind:function(t,e,n){if("undefined"!=typeof e&&pi.isFunction(e))for(var i=t.split(/,\s*/),a=0,r=i.length;r>a;a++)this.events[i[a]]||(this.events[i[a]]=[]),this.events[i[a]].push({context:n,callback:e})},unbind:function(t,e,n){for(var i=0,a=this.events[t].length;a>i;i++)this.events[t][i]&&this.events[t][i].callback===e&&this.events[t][i].context===n&&this.events[t].splice(i,1)},fire:function(t,e){var n=[];if(this.events[t])for(var i=0,a=this.events[t].length;a>i;i++){var r=this.events[t][i];if("undefined"!=typeof r&&"undefined"!=typeof r.callback){var o=r.callback.apply(r.context||this,e);"undefined"!=typeof o&&(n=n.concat(o))}}return n}};pi.widget("ui.raptor",Ci),pi.fn.raptor.Raptor=yi,fn.prototype.init=function(){},fn.prototype.destruct=function(){},fn.prototype.isVisible=function(){return!1},fn.prototype.show=function(){},fn.prototype.hide=function(){},gn.prototype.init=function(){},gn.prototype.enable=function(){},mn.prototype.appendTo=function(t,e){for(var n=0,i=this.uiOrder.length;i>n;n++){for(var a=pi("<div/>").addClass(this.raptor.options.baseClass+"-layout-toolbar-group"),r=this.uiOrder[n],o=0,s=r.length;s>o;o++)if(this.raptor.isUiEnabled(r[o])&&yi.ui[r[o]]){var l=this.raptor.options.plugins[r[o]];if(l===!1)continue;var d=this.raptor.prepareComponent(yi.ui[r[o]],l,"ui");d.instance.layout=t,this.raptor.uiObjects[r[o]]=d.instance,_(d.init)&&(d.init.removeClass("ui-corner-all"),a.append(d.init))}a.children().length>0&&a.appendTo(e)}e.find(".ui-button:first-child").addClass("ui-corner-left"),e.find(".ui-button:last-child").addClass("ui-corner-right")},vn.prototype=Object.create(fn.prototype),vn.prototype.init=function(){this.raptor.bind("enabled",this.show.bind(this)),this.raptor.bind("disabled",this.hide.bind(this)),this.raptor.bind("layoutShow",this.show.bind(this)),this.raptor.bind("layoutHide",this.hide.bind(this)),pi(window).resize(this.constrainPosition.bind(this))},vn.prototype.destruct=function(){this.wrapper&&(this.wrapper.remove(),this.wrapper=null),this.raptor.fire("toolbarDestroy")},vn.prototype.show=function(){this.isVisible()||(this.getElement().css("display",""),this.constrainPosition(),this.raptor.getElement().zIndex()>this.getElement().zIndex()?this.getElement().css("z-index",this.raptor.getElement().zIndex()+1):this.getElement().css("z-index",null),this.raptor.fire("toolbarShow"))},vn.prototype.hide=function(){this.isReady()&&(this.getElement().css("display","none"),this.raptor.fire("toolbarHide"))},vn.prototype.initDragging=function(){if(pi.fn.draggable&&this.options.draggable&&!this.getElement().data("ui-draggable")){this.getElement().draggable({cancel:"a, button",cursor:"move",stop:this.constrainPosition.bind(this)}),this.getElement().css("position","fixed");var t=this.raptor.persist("position")||this.options.dialogPosition;t||(t=[10,10]),parseInt(t[0],10)+this.getElement().outerHeight()>pi(window).height()&&(t[0]=pi(window).height()-this.getElement().outerHeight()),parseInt(t[1],10)+this.getElement().outerWidth()>pi(window).width()&&(t[1]=pi(window).width()-this.getElement().outerWidth()),this.getElement().css({top:Math.abs(parseInt(t[0],10)),left:Math.abs(parseInt(t[1],10))})}},vn.prototype.enableDragging=function(){pi.fn.draggable&&this.options.draggable&&this.getElement().data("ui-draggable")&&this.getElement().draggable("enable")},vn.prototype.disableDragging=function(){pi.fn.draggable&&this.options.draggable&&this.getElement().is(".ui-draggable")&&this.getElement().draggable("disable").removeClass("ui-state-disabled")},vn.prototype.isReady=function(){return null!==this.wrapper},vn.prototype.isVisible=function(){return this.isReady()&&this.getElement().is(":visible")},vn.prototype.constrainPosition=function(){if(this.isVisible()){var t=parseInt(this.wrapper.css("left"))||-999,e=parseInt(this.wrapper.css("top"))||-999,n=this.wrapper.outerWidth(),i=this.wrapper.outerHeight(),a=pi(window).width(),r=pi(window).height(),o=Math.max(0,Math.min(t,a-n)),s=Math.max(0,Math.min(e,r-i));(o!==t||s!==e)&&this.wrapper.css({left:o,top:s}),this.raptor.persist("position",[this.wrapper.css("top"),this.wrapper.css("left")])}},vn.prototype.getElement=function(){if(null===this.wrapper){if(!this.options.uiOrder){this.options.uiOrder=[[]];for(var t in yi.ui)this.options.uiOrder[0].push(t)}var e=this.toolbar=pi("<div/>").addClass(this.options.baseClass+"-toolbar"),n=this.toolbarWrapper=pi("<div/>").addClass(this.options.baseClass+"-inner").addClass("ui-widget-content").mousedown(function(t){t.preventDefault()}).append(e),i=this.path=pi("<div/>").addClass(this.options.baseClass+"-path").addClass("ui-widget-header"),a=this.wrapper=pi("<div/>").addClass(this.options.baseClass+"-outer "+this.raptor.options.baseClass+"-layout").css("display","none").append(i).append(n),r=new mn(this.raptor,this.options.uiOrder);r.appendTo(this,this.toolbar),pi("<div/>").css("clear","both").appendTo(this.toolbar),pi(function(){a.appendTo("body"),this.initDragging(),this.constrainPosition(!0),this.raptor.fire("layoutReady",[this.wrapper]),this.raptor.fire("toolbarReady",[this])}.bind(this))}return this.wrapper},yi.registerLayout(new vn),bn.prototype=Object.create(fn.prototype),bn.prototype.init=function(){this.raptor.bind("ready",this.ready.bind(this)),this.raptor.bind("enabled",this.enabled.bind(this))},bn.prototype.ready=function(){this.raptor.getElement().mouseenter(this.show.bind(this)).mouseleave(this.hide.bind(this))},bn.prototype.enabled=function(){this.getElement().hide()},bn.prototype.getElement=function(){if(null===this.hoverPanel){this.hoverPanel=pi("<div/>").addClass(this.raptor.options.baseClass+"-layout "+this.options.baseClass).mouseleave(this.hide.bind(this));var t=new mn(this.raptor,this.options.uiOrder);t.appendTo(this,this.hoverPanel),pi(window).bind("scroll",this.position.bind(this)),this.hoverPanel.appendTo("body"),this.raptor.fire("layoutReady",[this.hoverPanel])}return this.hoverPanel},bn.prototype.show=function(){this.raptor.isEditing()||(this.visible=!0,this.getElement().show(),this.raptor.getElement().zIndex()>this.getElement().zIndex()?this.getElement().css("z-index",this.raptor.getElement().zIndex()+1):this.getElement().css("z-index",null),this.position(),this.raptor.getElement().addClass(this.raptor.options.baseClass+"-editable-block-hover"))},bn.prototype.hide=function(t){this.visible&&t&&(pi.contains(this.getElement().get(0),t.relatedTarget)||t.relatedTarget!==this.getElement().get(0)&&this.getElement().get(0)!==pi(t.relatedTarget).parent().get(0)&&(pi.contains(this.raptor.getElement().get(0),t.relatedTarget)||t.relatedTarget!==this.raptor.getElement().get(0)&&(this.visible=!1,this.getElement().hide(),this.raptor.getElement().removeClass(this.raptor.options.baseClass+"-editable-block-hover"))))},bn.prototype.position=function(){if(this.visible){var t=F(this.raptor.getElement());this.getElement().css({top:t.top+(t.height/2-this.getElement().outerHeight()/2),left:t.left+(t.width/2-this.getElement().outerWidth()/2)})}},bn.prototype.destruct=function(){this.hoverPanel&&(this.hoverPanel.remove(),this.hoverPanel=null),this.visible=!1},yi.registerLayout(new bn),yn.prototype=Object.create(fn.prototype),yn.prototype.init=function(){this.raptor.bind("ready",this.ready.bind(this))},yn.prototype.ready=function(){this.raptor.getElement().on("mouseenter",this.options.elements,this.show.bind(this)).on("mouseleave",this.options.elements,this.hide.bind(this))},yn.prototype.getElement=function(){if(null===this.hoverPanel){this.hoverPanel=pi("<div/>").addClass(this.raptor.options.baseClass+"-layout raptor-layout-hover-panel "+this.options.baseClass).mouseleave(this.hide.bind(this));var t=new mn(this.raptor,this.options.uiOrder);t.appendTo(this,this.hoverPanel),pi(window).bind("scroll",this.position.bind(this)),this.hoverPanel.appendTo("body"),this.raptor.fire("layoutReady",[this.hoverPanel])}return this.hoverPanel},yn.prototype.show=function(t){this.enabled&&this.raptor.isEditing()&&(this.target=t.target,this.visible=!0,Y(this.getElement().show(),pi(this.target)))},yn.prototype.hide=function(t){if(this.visible){if(t){if(pi.contains(this.getElement().get(0),t.relatedTarget))return;if(t.relatedTarget===this.getElement().get(0))return;if(this.getElement().get(0)===pi(t.relatedTarget).parent().get(0))return;if(pi.contains(this.raptor.getElement().get(0),t.relatedTarget))return;if(t.relatedTarget===this.raptor.getElement().get(0))return}this.visible=!1,this.getElement().hide()}},yn.prototype.close=function(){this.visible&&(this.enabled=!1,this.visible=!1,this.getElement().hide(),setTimeout(function(){this.enabled=!0}.bind(this),1e3))},yn.prototype.position=function(){this.visible&&Y(this.getElement(),pi(this.target))},yn.prototype.destruct=function(){this.hoverPanel&&(this.hoverPanel.remove(),this.hoverPanel=null),this.visible=!1},yi.registerLayout(new yn),wn.prototype.init=function(){if("string"==typeof this.hotkey)this.raptor.registerHotkey(this.hotkey,this.action.bind(this));else if(x(this.hotkey))for(var t=0,e=this.hotkey.length;e>t;t++)this.raptor.registerHotkey(this.hotkey[t],this.action.bind(this));return this.getButton()},wn.prototype.getButton=function(){if(!this.button){var t=this.text||this.translate("Text",!1);this.button=pi("<div>").html(t).addClass(this.options.baseClass).attr("title",this.getTitle()).click(this.click.bind(this)),Je(this.button,{icons:{primary:this.getIcon()},text:t,label:this.label})}return this.button},wn.prototype.getTitle=function(){return this.title||this.translate("Title")},wn.prototype.getIcon=function(){return null===this.icon?"ui-icon-"+m(this.name):this.icon},wn.prototype.click=function(){nn(this.button)&&this.raptor.actionApply(this.action.bind(this))},wn.prototype.translate=function(t,e){return d(this.name+t,e)},Cn.prototype=Object.create(wn.prototype),Cn.prototype.init=function(){return this.preview="undefined"==typeof this.options.preview?!0:!1,wn.prototype.init.apply(this,arguments)},Cn.prototype.getButton=function(){return this.button||(this.button=wn.prototype.getButton.call(this).mouseenter(this.mouseEnter.bind(this)).mouseleave(this.mouseLeave.bind(this))),this.button},Cn.prototype.mouseEnter=function(){this.canPreview()&&(this.endPreview(),this.previewTimer=setTimeout(this.applyPreview.bind(this),this.previewTimeout))},Cn.prototype.applyPreview=function(){this.canPreview()&&(this.previewing=!0,this.raptor.actionPreview(this.action.bind(this)))},Cn.prototype.endPreview=function(){null!==this.previewTimer&&(clearTimeout(this.previewTimer),this.previewTimer=null),this.previewing=!1},Cn.prototype.mouseLeave=function(){this.endPreview(),this.raptor.actionPreviewRestore()},Cn.prototype.click=function(){return this.endPreview(),wn.prototype.click.apply(this,arguments)},Cn.prototype.canPreview=function(){return this.preview},Cn.prototype.isPreviewing=function(){return this.previewing},xn.prototype=Object.create(wn.prototype),xn.prototype.init=function(){return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),wn.prototype.init.apply(this,arguments)},xn.prototype.selectionChange=function(){this.selectionToggle()?(rn(this.button),this.disable&&en(this.button)):(on(this.button),this.disable&&an(this.button))},_n.prototype=Object.create(Cn.prototype),_n.prototype.init=function(){return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),Cn.prototype.init.apply(this,arguments)},_n.prototype.selectionChange=function(){this.selectionToggle()?this.isPreviewing()||rn(this.button):on(this.button)},Tn.prototype=Object.create(Cn.prototype),Tn.prototype.init=function(){var t=Cn.prototype.init.apply(this,arguments);return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),t},Tn.prototype.selectionChange=function(){this.isEnabled()?en(this.button):an(this.button)},Tn.prototype.canPreview=function(){return Cn.prototype.canPreview.call(this)&&this.isEnabled()},Tn.prototype.isEnabled=function(){var t=se();return t?!!this.getElement(t):!!this.previewing},Tn.prototype.action=function(){ue(function(t){var e=this.getElement(t);e&&this.applyToElement(e)}.bind(this))},Sn.prototype=Object.create(_n.prototype),Sn.prototype.action=function(){Re(),this.raptor.selectionConstrain();for(var t=0,e=this.classes.length;e>t;t++){var n=rangy.createCssClassApplier(this.options.cssPrefix+this.classes[t],{elementTagName:this.tag||"span"});n.toggleSelection()}},Sn.prototype.selectionToggle=function(){for(var t=0,e=this.classes.length;e>t;t++){var n=rangy.createCssClassApplier(this.options.cssPrefix+this.classes[t],{elementTagName:this.tag||"span"});if(!n.isAppliedToSelection())return!1}return!0};var xi={};En.prototype=Object.create(wn.prototype),En.prototype.action=function(){this.openDialog()},En.prototype.validateDialog=function(){return!0},En.prototype.openDialog=function(){this.raptor.pause(),dn(this.getDialog())},En.prototype.onDialogClose=function(){xi[this.name].instance.raptor.resume()},En.prototype.okButtonClick=function(){var t=xi[this.name].instance.validateDialog();t===!0&&(cn(xi[this.name].dialog),xi[this.name].instance.applyAction.call(xi[this.name].instance,xi[this.name].dialog))},En.prototype.closeDialog=function(){cn(xi[this.name].dialog)},En.prototype.cancelButtonClick=En.prototype.closeDialog,En.prototype.getOkButton=function(t){return{text:d(t+"DialogOKButton"),click:this.okButtonClick.bind(this),icons:{primary:"ui-icon-circle-check"}}},En.prototype.getCancelButton=function(t){return{text:d(t+"DialogCancelButton"),click:this.cancelButtonClick.bind(this),icons:{primary:"ui-icon-circle-close"}}},En.prototype.getDefaultDialogOptions=function(t){var e={modal:!0,resizable:!0,autoOpen:!1,title:d(t+"DialogTitle"),dialogClass:this.options.baseClass+"-dialog "+this.options.dialogClass,close:this.onDialogClose.bind(this),buttons:[]},n=this.getOkButton(t),i=this.getCancelButton(t);return"undefined"!=typeof n&&n!==!1&&e.buttons.push(n),"undefined"!=typeof i&&i!==!1&&e.buttons.push(i),e},En.prototype.getDialog=function(){return"undefined"==typeof xi[this.name]&&(xi[this.name]={dialog:pi(this.getDialogTemplate())},ln(xi[this.name].dialog,pi.extend(this.getDefaultDialogOptions(this.name),this.dialogOptions))),xi[this.name].instance=this,xi[this.name].dialog},An.prototype=Object.create(En.prototype),An.prototype.init=xn.prototype.init,An.prototype.selectionChange=xn.prototype.selectionChange,kn.prototype=Object.create(wn.prototype),kn.prototype.click=function(t){this.menu.getMenu().is(":visible")?pi(".raptor-menu").hide():this.menu.show(),t.preventDefault()},Nn.prototype.init=function(){this.setOptions();var t=this.getButton().init();return t.addClass("raptor-menu-button"),t},Nn.prototype.getButton=function(){return this.button||(this.button=new kn(this)),this.button},Nn.prototype.setOptions=function(){this.options.title=d(this.name+"Title"),this.options.icon="ui-icon-"+this.name},Nn.prototype.getMenu=function(){return this.menu||(this.menu=pi("<div>").addClass("ui-menu ui-widget ui-widget-content ui-corner-all "+this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.menuContent).css("position","fixed").hide().mousedown(function(t){t.preventDefault()}).children().appendTo("body")),this.menu},Nn.prototype.show=function(){pi(".raptor-menu").hide(),G(this.getMenu().toggle(),this.getButton().getButton())},pi("html").click(function(t){pi(t.target).hasClass("raptor-menu-button")||0!==pi(t.target).closest(".raptor-menu-button").length||pi(".raptor-menu").hide()}),Nn.prototype.getMenu=function(){return this.menu||(this.menu=pi("<div>").addClass("ui-menu ui-widget ui-widget-content ui-corner-all "+this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.menuContent).css("position","fixed").hide().appendTo("body").mousedown(function(t){t.preventDefault()})),this.menu},Rn.prototype=Object.create(Nn.prototype),Rn.prototype.menuItemMouseDown=function(t){t.preventDefault()},Rn.prototype.menuItemClick=function(t){return Xe(this.button.button,pi(t.target).html()),pi(this.menu).closest("ul").hide(),!1},Rn.prototype.menuItemMouseEnter=function(){},Rn.prototype.menuItemMouseLeave=function(){},Rn.prototype.getMenu=function(){return this.menu||(this.menu=pi("<ul>").addClass(this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.getMenuItems()).css("position","fixed").hide().find("a").mousedown(this.menuItemMouseDown.bind(this)).mouseenter(this.menuItemMouseEnter.bind(this)).mouseleave(this.menuItemMouseLeave.bind(this)).click(this.menuItemClick.bind(this)).end().appendTo("body"),sn(this.menu)),this.menu},yi.registerUi(new En({name:"cancel",hotkey:"esc",dialogOptions:{width:500},action:function(){this.raptor.isDirty()?En.prototype.action.call(this):this.applyAction()},applyAction:function(){this.raptor.cancelEditing()},getDialogTemplate:function(){return pi("<div>").html(d("cancelDialogContent"))}})),Dn.prototype=Object.create(Rn.prototype),Dn.prototype.init=function(){var t=Rn.prototype.init.call(this);return"object"==typeof this.options.classes&&Object.keys(this.options.classes).length>0?(this.raptor.bind("selectionChange",this.updateButton.bind(this)),t):void 0},Dn.prototype.changeClass=function(t){Ee(t,[],this.raptor.getElement())},Dn.prototype.menuItemClick=function(t){Rn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeClass([pi(t.currentTarget).data("value")])}.bind(this))},Dn.prototype.menuItemMouseEnter=function(t){this.raptor.actionPreview(function(){this.changeClass([pi(t.currentTarget).data("value")])}.bind(this))},Dn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Dn.prototype.updateButton=function(){},Dn.prototype.getMenuItems=function(){var t="";for(var e in this.options.classes)t+=this.raptor.getTemplate("class-menu.item",{label:e,value:this.options.classes[e]});return t},yi.registerUi(new Dn),yi.registerUi(new Cn({name:"cleanBlock",action:function(){var t=this.raptor.getElement();R(t,["style"]),D(t,["font","span:not([class])",".cms-color:has(.cms-color)",":header strong",":header b",":header strong"]),k(t,["b","big","em","i","small","span","strong",":not(:visible)"])}})),yi.registerUi(new Cn({name:"clearFormatting",action:function(){ke(this.raptor.getElement().get(0)),k(this.raptor.getElement(),["a","b","i","sub","sup","strong","em","big","small","p"]),N(this.raptor.getElement()[0],"p")}})),yi.registerUi(new wn({name:"clickButtonToEdit",action:function(){this.raptor.enableEditing()}})),yi.registerUi(new wn({name:"close",click:function(){this.layout.close()}})),In.prototype=Object.create(Rn.prototype),In.prototype.init=function(){return this.raptor.bind("selectionChange",this.updateButton.bind(this)),this.updateButton(),Rn.prototype.init.apply(this,arguments)
},In.prototype.updateButton=function(){var t=we()[0],e=this.getButton().getButton(),n=null,i=null;if(Xe(e,d("colorMenuBasicAutomatic")),tn(e,!1),t){t=pi(t);for(var a in this.options.colors)if(i=pi(t).closest("."+this.options.cssPrefix+a),i.length){n=a;break}return n?(Xe(e,d("colorMenuBasic"+v(n))),tn(e,"ui-icon-swatch"),void e.find(".ui-icon").css("background-color",i.css("color"))):void 0}},In.prototype.changeColor=function(t,e){e&&(this.currentColor=t),this.raptor.actionApply(function(){if(Re(),"automatic"===t)we().parents("."+this.options.cssPrefix+"color").addBack().each(function(){var t=pi(this).attr("class");if(null!==t&&"undefined"!=typeof t&&(t=t.match(/(cms-(.*?))( |$)/gi),null!==t&&"undefined"!=typeof t))for(var e=0,n=t.length;n>e;e++)pi(this).removeClass(t[e].trim()),pi(this).attr("class").trim()||pi(this).contents().unwrap()});else{var e=W();xe("span",{classes:this.options.cssPrefix+"color "+this.options.cssPrefix+t,attributes:{id:e}});var n=pi("#"+e);if(n.length){fe(n.removeAttr("id").get(0));var i;do i=pi("#"+e),i.removeAttr("id");while(i.length)}}D(this.raptor.getElement(),[".cms-color:has(.cms-color)"])}.bind(this))},In.prototype.menuItemMouseEnter=function(t){this.raptor.actionPreview(function(){this.changeColor(pi(t.currentTarget).data("color"))}.bind(this))},In.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},In.prototype.menuItemClick=function(t){Rn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeColor(pi(t.currentTarget).data("color"),!0)}.bind(this))},In.prototype.getMenuItems=function(){var t=this.raptor.getTemplate("color-menu-basic.automatic",this.options);for(var e in this.options.colors)t+=this.raptor.getTemplate("color-menu-basic.item",{color:this.options.colors[e],label:d("colorMenuBasic"+v(e)),className:e,baseClass:this.options.baseClass});return t},yi.registerUi(new In),On.prototype=Object.create(gn.prototype),On.prototype.init=function(){var t;this.options.persist&&(t=this.raptor.persist("docked")),"undefined"==typeof t&&(t=this.options.docked),"undefined"==typeof t&&(t=!1),t&&(this.raptor.bind("toolbarReady",function(){t&&this.toggleState()}.bind(this)),this.raptor.bind("toolbarHide",function(){this.dockState&&this.dockState.spacer&&(this.dockState.spacer.addClass(this.options.baseClass+"-hidden"),this.dockState.spacer.removeClass(this.options.baseClass+"-visible"))}.bind(this)),this.raptor.bind("toolbarShow",function(){this.dockState&&this.dockState.spacer&&(this.dockState.spacer.removeClass(this.options.baseClass+"-hidden"),this.dockState.spacer.addClass(this.options.baseClass+"-visible"))}.bind(this)),this.raptor.bind("toolbarDestroy",function(){this.dockState&&this.dockState.spacer&&this.dockState.spacer.remove()}.bind(this)))},On.prototype.toggleState=function(){return this.options.dockToElement?this.toggleDockToElement():this.toggleDockToScreen()},On.prototype.toggleDockToElement=function(){this.dockState?"undefined"!=typeof this.dockState.dockedTo?this.undockFromElement():(this.undockFromScreen(),this.dockToElement()):this.dockToElement()},On.prototype.dockToElement=function(){var t=this.options.dockTo?pi(this.options.dockTo):this.raptor.getElement(),e=this.raptor.getLayout("toolbar").getElement();this.marker=pi("<marker>").addClass(this.options.baseClass+"-marker").insertAfter(e),e.addClass(this.options.baseClass+"-docked-to-element"),this.dockState=M(e,t,{position:this.options.position,spacer:!1,wrapperClass:this.options.baseClass+"-inline-wrapper"}),this.activateButton(this.raptor.getPlugin("dockToElement")),this.raptor.persist("docked",!0)},On.prototype.undockFromElement=function(){this.marker.replaceWith(L(this.dockState)),this.dockState=null,this.raptor.getLayout("toolbar").getElement().removeClass(this.options.baseClass+"-docked-to-element"),this.deactivateButton(this.raptor.getPlugin("dockToElement")),this.raptor.persist("docked",!1)},On.prototype.toggleDockToScreen=function(){this.dockState?"undefined"!=typeof this.dockState.dockedTo?(this.undockFromElement(),this.dockToScreen()):this.undockFromScreen():this.dockToScreen()},On.prototype.dockToScreen=function(){if(!this.dockState){var t=this.raptor.getLayout("toolbar");if(t.isReady()){var e=t.getElement();this.marker=pi("<marker>").addClass(this.options.baseClass+"-marker").insertAfter(e),e.addClass(this.options.baseClass+"-docked"),t.disableDragging(),this.dockState=O(e,{position:this.options.position,spacer:this.options.spacer,under:this.options.under}),t.isVisible()||(this.dockState.spacer.removeClass(this.options.baseClass+"-visible"),this.dockState.spacer.addClass(this.options.baseClass+"-hidden")),this.activateButton(this.raptor.getPlugin("dockToScreen")),this.raptor.persist("docked",!0)}}},On.prototype.undockFromScreen=function(){if(this.dockState){var t=this.raptor.getLayout("toolbar"),e=P(this.dockState);this.marker.replaceWith(e),t.enableDragging(),t.constrainPosition(),this.dockState=null,e.removeClass(this.options.baseClass+"-docked"),this.deactivateButton(this.raptor.getPlugin("dockToScreen")),this.raptor.persist("docked",!1)}},On.prototype.deactivateButton=function(t){"undefined"!=typeof t&&"undefined"!=typeof t.button&&on(t.button)},On.prototype.activateButton=function(t){"undefined"!=typeof t&&"undefined"!=typeof t.button&&rn(t.button)},yi.registerPlugin(new On),yi.registerUi(new wn({name:"dockToScreen",action:function(){this.raptor.unify(function(t){t.plugins.dock.toggleDockToScreen()})}})),yi.registerUi(new wn({name:"dockToElement",action:function(){this.raptor.unify(function(t){t.plugins.dock.toggleDockToElement()})}})),yi.registerUi(new En({name:"embed",state:null,dialogOptions:{width:600,height:400},applyAction:function(t){this.raptor.actionApply(function(){pe(t.find("textarea").val())})},getDialogTemplate:function(){var t=pi("<div>").html(this.raptor.getTemplate("embed.dialog",this.options));t.find("textarea").change(function(e){t.find("."+this.options.baseClass+"-preview").html(pi(e.target).val())}.bind(this));var e=t.find("."+this.options.baseClass+"-panel-tabs");return e.find("li").click(function(){e.find("ul li").removeClass("ui-state-active").removeClass("ui-tabs-selected"),pi(this).addClass("ui-state-active").addClass("ui-tabs-selected"),e.children("div").hide().eq(pi(this).index()).show()}),t}})),yi.registerUi(new Tn({name:"floatLeft",applyToElement:function(t){t.removeClass(this.options.cssPrefix+"float-right"),t.toggleClass(this.options.cssPrefix+"float-left"),A(t,["class"])},getElement:function(t){var e=pi(t.commonAncestorContainer).find("img");return e.length?e:null}})),yi.registerUi(new Tn({name:"floatNone",applyToElement:function(t){t.removeClass(this.options.cssPrefix+"float-right"),t.removeClass(this.options.cssPrefix+"float-left"),A(t,["class"])},getElement:function(t){var e=pi(t.commonAncestorContainer).find("img");return e.length?e:null}})),yi.registerUi(new Tn({name:"floatRight",applyToElement:function(t){t.removeClass(this.options.cssPrefix+"float-left"),t.toggleClass(this.options.cssPrefix+"float-right"),A(t,["class"])},getElement:function(t){var e=pi(t.commonAncestorContainer).find("img");return e.length?e:null}})),Pn.prototype=Object.create(Rn.prototype),Pn.prototype.init=function(){return this.raptor.bind("selectionChange",this.updateButton.bind(this)),this.updateButton(),Rn.prototype.init.apply(this,arguments)},Pn.prototype.updateButton=function(){var t=we()[0],e=this.getButton().getButton(),n=null,i=null;if(Xe(e,d("fontFamilyMenuFontDefault")),tn(e,!1),t){for(var a=0;a<this.options.fonts.length;a++)if(i=pi(t).closest("."+this.options.cssPrefix+"font-"+this.options.fonts[a]),i.length){n=this.options.fonts[a];break}return n?void Xe(e,this.getMenu().find('[data-font="'+n+'"]').text()):void 0}},Pn.prototype.changeFont=function(t){if(Re(),"default"===t)we().parents("."+this.options.cssPrefix+"font").addBack().each(function(){var t=pi(this).attr("class");if(null!==t&&"undefined"!=typeof t&&(t=t.match(/(cms-font-(.*?))( |$)/gi),null!==t&&"undefined"!=typeof t))for(var e=0,n=t.length;n>e;e++)pi(this).removeClass(pi.trim(t[e]))});else{var e=W();xe("span",{classes:this.options.classes||this.options.cssPrefix+"font "+this.options.cssPrefix+"font-"+t,attributes:{id:e}});var n=pi("#"+e);if(n.length){fe(n.removeAttr("id").get(0));var i;do i=pi("#"+e),i.removeAttr("id");while(i.length)}}},Pn.prototype.menuItemMouseEnter=function(t){this.raptor.actionPreview(function(){this.changeFont(pi(t.currentTarget).data("font"))}.bind(this))},Pn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Pn.prototype.menuItemClick=function(t){Rn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeFont(pi(t.currentTarget).data("font"))}.bind(this))},Pn.prototype.getMenuItems=function(){for(var t=this.raptor.getTemplate("font-family.menu-item",{fontName:"default",fontTitle:d("fontFamilyMenuFontDefault")}),e=0,n=this.options.fonts.length;n>e;e++)t+=this.raptor.getTemplate("font-family.menu-item",{fontName:this.options.fonts[e],fontTitle:d(("fontFamilyMenuFont-"+this.options.fonts[e]).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}))});return t},yi.registerUi(new Pn),yi.registerUi(new Cn({name:"guides",action:function(){this.raptor.getElement().toggleClass(this.getClassName()),this.updateButtonState()},updateButtonState:function(){this.raptor.getElement().hasClass(this.getClassName())?rn(this.button):on(this.button)},init:function(){return this.raptor.bind("cancel",this.removeClass.bind(this)),this.raptor.bind("saved",this.removeClass.bind(this)),Cn.prototype.init.call(this)},removeClass:function(){this.raptor.getElement().removeClass(this.getClassName())},getClassName:function(){return this.options.baseClass+"-visible"},mouseEnter:function(){Cn.prototype.mouseEnter.call(this),this.updateButtonState()},mouseLeave:function(){Cn.prototype.mouseLeave.call(this),this.updateButtonState()}})),yi.registerUi(new wn({name:"historyRedo",hotkey:["ctrl+y","ctrl+shift+z"],action:function(){this.raptor.historyForward()},init:function(){return this.raptor.bind("historyChange",this.historyChange.bind(this)),wn.prototype.init.apply(this,arguments),an(this.button),this.button},historyChange:function(){this.raptor.present<this.raptor.history.length-1?en(this.button):an(this.button)}})),yi.registerUi(new wn({name:"historyUndo",hotkey:"ctrl+z",action:function(){this.raptor.historyBack()},init:function(){return this.raptor.bind("historyChange",this.historyChange.bind(this)),wn.prototype.init.apply(this,arguments),an(this.button),this.button},historyChange:function(){0===this.raptor.present?an(this.button):en(this.button)}})),yi.registerUi(new Cn({name:"hrCreate",action:function(){pe("<hr/>")}})),yi.registerUi(new En({name:"imageResize",proportional:!0,image:null,dialogOptions:{width:450},action:function(){var t=this.getDialog();this.image=c(this.layout.target),this.originalWidth=this.layout.target.width,this.originalHeight=this.layout.target.height,t.find("[name=width]").val(this.layout.target.width),t.find("[name=height]").val(this.layout.target.height),this.openDialog()},applyAction:function(){var t=this.getDialog(),e=t.find("[name=width]").val(),n=t.find("[name=height]").val();this.raptor.actionApply(function(){pi("#"+this.image).css({width:e,height:n}).attr("width",e).attr("height",n),ge(pi("#"+this.image)[0])}.bind(this))},getDialogTemplate:function(){var t=pi("<div>").html(this.raptor.getTemplate("image-resize.dialog",this.options)),e=this;t.find("."+this.options.baseClass+"-lock-proportions").hover(function(){pi(this).addClass("ui-state-hover")},function(){pi(this).removeClass("ui-state-hover")}).click(function(){xi[e.name].instance.proportional=!xi[e.name].instance.proportional,pi(this).find(".ui-icon").toggleClass("ui-icon-locked",e.proportional).toggleClass("ui-icon-unlocked",!e.proportional)});var n=t.find("[name=width]"),i=t.find("[name=height]");return n.on("input.raptor",function(){var t=parseInt(pi(this).val());isNaN(t)||xi[e.name].instance.proportional&&i.val(Math.round(Math.abs(xi[e.name].instance.originalHeight/xi[e.name].instance.originalWidth*t)))}),i.on("input.raptor",function(){var t=parseInt(pi(this).val());isNaN(t)||xi[e.name].instance.proportional&&n.val(Math.round(Math.abs(xi[e.name].instance.originalWidth/xi[e.name].instance.originalHeight*t)))}),t}})),yi.registerUi(new wn({name:"imageSwap",chooser:null,click:function(){ge(this.layout.target),this.raptor.getPlugin(this.options.chooser).action(this.layout.target)}})),yi.registerUi(new En({name:"insertFile",state:!1,imageTypes:["jpeg","jpg","png","gif"],options:{customAction:!1},action:function(t){return this.options.customAction&&this.options.customAction.call(this,t)!==!1?void 0:("undefined"!=typeof t?(this.getDialog().find("[name=location]").val(t.getAttribute("src")||t.getAttribute("href")),this.getDialog().find("[name=name]").val(t.innerHTML)):(this.getDialog().find("[name=location]").val(""),this.getDialog().find("[name=name]").val("")),this.openDialog())},applyAction:function(){var t=this.getDialog(),e=t.find("[name=location]").val(),n=t.find("[name=name]").val();this.raptor.actionApply(function(){this.insertFiles([{location:e,name:n}])}.bind(this))},getDialogTemplate:function(){return pi(this.raptor.getTemplate("insert-file.dialog"))},getFileType:function(t){if("undefined"!=typeof t.extension)return t.extension.toLowerCase();var e=t.location.split(".");return e.length>0?e.pop().toLowerCase():"unknown"},isImage:function(t){return-1!==pi.inArray(this.getFileType(t),this.imageTypes)},insertFiles:function(t){this.raptor.resume(),t.length&&this.raptor.actionApply(function(){1===t.length&&(this.isImage(t[0])&&pi(be()).is("img")||Ce())?this.replaceFiles(t):this.linkFiles(t)}.bind(this))},linkFiles:function(t){De("a",this.raptor.getElement()),Ie();var e=rangy.createApplier({tag:"a",attributes:{href:t[0].location.replace(/([^:])\/\//g,"$1/"),title:t[0].name,"class":this.options.cssPrefix+"file "+this.options.cssPrefix+this.getFileType(t[0])}});e.applyToSelection()},replaceFiles:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.prepareElement(t[n]));pe(e.join(", "))},prepareElement:function(t,e){return this.isImage(t)?this.prepareImage(t,this.options.cssPrefix+this.getFileType(t),e):this.prepareAnchor(t,this.options.cssPrefix+"file "+this.options.cssPrefix+this.getFileType(t),e)},prepareImage:function(t,e,n){return pi("<div/>").html(pi("<img/>").attr({src:t.location.replace(/([^:])\/\//g,"$1/"),title:n||t.name,"class":e})).html()},prepareAnchor:function(t,e,n){return pi("<div/>").html(pi("<a/>").attr({href:t.location.replace(/([^:])\/\//g,"$1/"),title:t.name,"class":e}).html(n||t.name)).html()}})),Mn.prototype=Object.create(Rn.prototype),Mn.prototype.init=function(){var t=Nn.prototype.init.call(this);return Xe(this.button.button,di[oi]),tn(this.button.button,"ui-icon-flag-"+oi.toLowerCase()),t},Mn.prototype.menuItemClick=function(t){var e=pi(t.currentTarget).data("value");this.options.persist&&yi.persist("locale",e),setTimeout(function(){s(e)},1)},Mn.prototype.getMenuItems=function(){var t="";for(var e in li)t+=this.raptor.getTemplate("language-menu.item",{label:di[e],value:e,icon:e.toLowerCase()});return t},yi.registerUi(new Mn);var _i,Ti,Si,Ei;yi.registerUi(new An({name:"linkCreate",dialogOptions:{width:850},applyAction:function(){this.raptor.actionApply(function(){if(Ei&&""!==Ei.href.trim()){var t=window.getSelection().getRangeAt(0);if("A"!==t.commonAncestorContainer.tagName){Re(),De("a",this.raptor.getElement()),Ie();var e=rangy.createApplier({tag:"a",attributes:Ei});e.applyToSelection(),k(this.raptor.getElement(),["a"])}else for(var n in Ei)t.commonAncestorContainer.setAttribute(n,Ei[n])}}.bind(this))},openDialog:function(){this.getDialog();var t=ye();if(t.is("a"))for(var e=0,n=Ti.length;n>e;e++){var i=Ti[e].updateInputs(t,Si.children("div:eq("+e+")"));i&&_i.find(":radio:eq("+e+")").trigger("click")}An.prototype.openDialog.call(this)},validateDialog:function(){var t=_i.find(":radio:checked").val();return Ei=Ti[t].getAttributes(Si.children("div:eq("+t+")")),Ei!==!1},selectionToggle:function(){var t=ye();return t&&t.closest("a").length?!0:!1},getDialogTemplate:function(){var t=pi(this.raptor.getTemplate("link.dialog",this.options));_i=t.find("[data-menu]"),Si=t.find("[data-content]"),Ti=[new Fn(this.raptor),new Bn(this.raptor),new Ln(this.raptor),new $n(this.raptor)];for(var e=0,n=Ti.length;n>e;e++)pi(this.raptor.getTemplate("link.label",Ti[e])).click(function(){Si.children("div").hide(),Si.children("div:eq("+pi(this).index()+")").show()}).find(":radio").val(e).end().appendTo(_i),pi("<div>").append(Ti[e].getContent()).hide().appendTo(Si);return _i.find(":radio:first").prop("checked",!0),Si.children("div:first").show(),t}})),yi.registerUi(new _n({name:"linkRemove",disable:!0,action:function(){this.raptor.actionApply(function(){document.execCommand("unlink")}.bind(this))},selectionToggle:function(){var t=ye();return t&&t.closest("a").length?!0:!1}})),Ln.prototype=Object.create(Bn.prototype),Ln.prototype.getContent=function(){return this.raptor.getTemplate("link.document",this.raptor.options)},$n.prototype.getContent=function(){return this.raptor.getTemplate("link.email",this.raptor.options)},$n.prototype.getAttributes=function(t){var e=t.find("[name=email]").val(),n=t.find("[name=subject]").val();return pi.trim(n)&&(n="?Subject="+encodeURIComponent(n)),""===pi.trim(e)?!1:{href:"mailto:"+e+n}},$n.prototype.updateInputs=function(t,e){var n=!1;if(email="",subject="",href=t.attr("href"),0===href.indexOf("mailto:")){var i=href.indexOf("?Subject=");i>0?(email=href.substring(7,i),subject=href.substring(i+9)):(email=href.substring(7),subject=""),n=!0}return e.find("[name=email]").val(email),e.find("[name=subject]").val(subject),n},Bn.prototype.getContent=function(){return this.raptor.getTemplate("link.external",this.raptor.options)},Bn.prototype.getAttributes=function(t){var e=t.find("[name=location]").val(),n=t.find("[name=blank]").is(":checked"),i={href:e};return n&&(i.target="_blank"),"http://"===pi.trim(i.href)?!1:i},Bn.prototype.updateInputs=function(t,e){var n=!1,i=t.attr("href");return 0===i.indexOf("http://")?(e.find("[name=location]").val(i),n=!0):e.find("[name=location]").val("http://"),"_blank"===t.attr("target")?e.find("[name=blank]").prop("checked",!0):e.find("[name=blank]").prop("checked",!1),n},Fn.prototype.getContent=function(){return this.raptor.getTemplate("link.internal",{baseClass:this.raptor.options.baseClass,domain:window.location.protocol+"//"+window.location.host})},Fn.prototype.getAttributes=function(t){var e=t.find("[name=location]").val(),n=t.find("[name=blank]").is(":checked"),i={href:e};return n&&(i.target="_blank"),i},Fn.prototype.updateInputs=function(t,e){var n=t.attr("href");return e.find("[name=location]").val(-1===n.indexOf("http://")&&-1===n.indexOf("mailto:")?n:""),"_blank"===t.attr("target")?e.find("[name=blank]").prop("checked",!0):e.find("[name=blank]").prop("checked",!1),!1},yi.registerUi(new wn({name:"listOrdered",action:function(){document.execCommand("insertOrderedList")}})),yi.registerUi(new wn({name:"listUnordered",action:function(){document.execCommand("insertUnorderedList")}})),yi.registerUi(new wn({name:"logo",action:function(){window.open("http://www.raptor-editor.com/about/VERSION","_blank")}})),Hn.prototype=Object.create(gn.prototype),Hn.prototype.init=function(){this.raptor.getElement().on("keypress.raptor",this.preventReturn.bind(this)),this.raptor.getElement().on("drop.raptor",this.preventDrop.bind(this))},Hn.prototype.preventReturn=function(t){return this.options.enabled&&13===t.which?!1:void 0},Hn.prototype.preventDrop=function(){return this.options.enabled},yi.registerPlugin(new Hn),Vn.prototype=Object.create(gn.prototype),Vn.prototype.init=function(){this.raptor.registerHotkey("return",this.returnPressed.bind(this)),this.raptor.registerHotkey("shift+return",this.shiftReturnPressed.bind(this))},Vn.prototype.returnPressedList=function(t){var e=t.closest("li");if(!e.length)return!1;var n=e.closest("ul, ol"),i=n.get(0).tagName.toLowerCase(),a=!1;if(U(e)){var r=e.next();r.length&&r.is("li")?(a=listBreakByReplacingSelection(i,"li",this.raptor.getElement(),"<p>&nbsp;</p>"),a&&fe(a.get(0))):(e.remove(),fe(pi("<p>&nbsp;</p>").insertAfter(n).get(0)))}else a=listBreakAtSelection(i,"li",this.raptor.getElement()),a&&ve(a.get(0));return!0},Vn.prototype.returnPressed=function(){var t=ye();return this.returnPressedList(t)?!0:!1},Vn.prototype.shiftReturnPressedList=function(t){if(t.closest("li").length){var e=t.closest("ul, ol").get(0).tagName.toLowerCase(),n=listBreakByReplacingSelection(e,"li",this.raptor.getElement(),"<p>&nbsp;</p>");return n&&fe(n.get(0)),!0}return!1},Vn.prototype.shiftReturnPressed=function(){var t=ye();return this.shiftReturnPressedList(t)?!0:!1},yi.registerPlugin(new Vn);var Ai=!1,ki=null,Ni=null,Ri=null;Un.prototype=Object.create(gn.prototype),Un.prototype.enable=function(){this.raptor.getElement().on("paste.raptor",this.capturePaste.bind(this))},Un.prototype.capturePaste=function(t){if(!Ri){if(Ai)return!1;le();var e=this.raptor.getNode(),n=e.innerHTML;return e&&e.clipboardData&&t.clipboardData.getData?(e.innerHTML=/text\/html/.test(t.clipboardData.types)?t.clipboardData.getData("text/html"):/text\/plain/.test(t.clipboardData.types)?t.clipboardData.getData("text/plain"):"",this.waitForPasteData(e,n),t.stopPropagation(),t.preventDefault(),!1):(e.innerHTML="",this.waitForPasteData(e,n),!0)}},Un.prototype.waitForPasteData=function(t,e){t.childNodes&&t.childNodes.length>0?this.processPaste(t,e):setTimeout(function(){this.waitForPasteData(t,e)}.bind(this),20)},Un.prototype.processPaste=function(t,e){var n=t.innerHTML;t.innerHTML=e,this.showPasteDialog(n)},Un.prototype.showPasteDialog=function(t){dn(this.getDialog(this,t))},Un.prototype.pasteContent=function(t){this.raptor.actionApply(function(){var e=W();de(),t=this.filterAttributes(t),t=this.filterChars(t),pe(pi('<placeholder id="'+e+'">'+t+"</placeholder>"));var n=pi("#"+e);fe(n.get(0)),le(),n.contents().unwrap(),de()}.bind(this))},Un.prototype.getDialog=function(t,e){if(Ni=t,!ki){ki=pi("<div>").html(this.raptor.getTemplate("paste.dialog",this.options));for(var n=0,i=this.options.panels.length;i>n;n++)ki.find("."+this.options.baseClass+"-tab-"+this.options.panels[n]).css("display",""),0===n&&ki.find("."+this.options.baseClass+"-content-"+this.options.panels[n]).css("display","");ki.find("."+this.options.baseClass+"-panel-tabs > div:visible:not(:first)").hide(),ln(ki,{modal:!0,resizable:!0,autoOpen:!1,width:800,height:500,title:d("pasteDialogTitle"),dialogClass:this.options.baseClass+"-dialog",close:function(){Ai=!1},buttons:[{text:d("pasteDialogOKButton"),click:function(){var t=null,e=ki.find("."+this.options.baseClass+"-area:visible");t=e.hasClass(this.options.baseClass+"-plain")||e.hasClass(this.options.baseClass+"-source")?e.val():e.html(),cn(ki),Ni.pasteContent(t)}.bind(this),icons:{primary:"ui-icon-circle-check"}},{text:d("pasteDialogCancelButton"),click:function(){ce(),cn(ki)},icons:{primary:"ui-icon-circle-close"}}]});var a=ki.find("."+this.options.baseClass+"-panel-tabs");a.find("li").click(function(){a.find("ul li").removeClass("ui-state-active").removeClass("ui-tabs-selected"),pi(this).addClass("ui-state-active").addClass("ui-tabs-selected"),a.children("div").hide().eq(pi(this).index()).show()})}return this.updateAreas(e),ki},Un.prototype.filterAttributes=function(t){var e=[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(<!--(.|\s){1,}?-->)/gi,handler:""},{regexp:/(class="Apple-(style|converted)-[a-z]+\s?[^"]+")/,handle:""},{regexp:/id="internal-source-marker_[^"]+"|dir="[rtl]{3}"/,handle:""},{regexp:/(<p[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/gi,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/gi,handler:""}];return pi.each(e,function(e,n){t=t.replace(n.regexp,n.handler)}),t},Un.prototype.filterChars=function(t){var e=t;return e=e.replace(/[\u2018|\u2019|\u201A]/g,"'"),e=e.replace(/[\u201C|\u201D|\u201E]/g,'"'),e=e.replace(/\u2026/g,"..."),e=e.replace(/[\u2013|\u2014]/g,"-"),e=e.replace(/\u02C6/g,"^"),e=e.replace(/\u2039/g,"<"),e=e.replace(/\u203A/g,">"),e=e.replace(/[\u02DC|\u00A0]/g," ")},Un.prototype.stripAttributes=function(t){t=pi("<div/>").html(t);var e=this.options.allowedAttributes;return pi(t.find("*")).each(function(){var t=[];pi.each(this.attributes,function(n,i){-1===pi.inArray(i.nodeName,e)&&t.push(i.nodeName)});for(var n=0;n<t.length;n++)pi(this).attr(t[n],null)}),t.html()},Un.prototype.stripEmpty=function(t){var e=pi("<div/>").html(t),n=this.options.allowedEmptyTags;return e.find("*").filter(function(){return-1!==pi.inArray(this.tagName.toLowerCase(),n)?!1:pi(this).find(n.join(",")).length?!1:""===pi.trim(pi(this).text())}).remove(),e.html()},Un.prototype.stripSpans=function(t){var e=pi("<div/>").html(t);return e.find("span").each(function(){this.attributes.length||pi(this).replaceWith(pi(this).html())}),e.html()},Un.prototype.updateAreas=function(t){var e=t;e=this.filterAttributes(e),e=this.filterChars(e),e=this.stripEmpty(e),e=this.stripAttributes(e),e=this.stripSpans(e),e=Be(e,this.options.allowedTags);var n=pi("<div/>").html(t).text(),i=t;ki.find("."+this.options.baseClass+"-plain").val(pi("<div/>").html(n).text()),ki.find("."+this.options.baseClass+"-rich").html(e),ki.find("."+this.options.baseClass+"-source").html(i),ki.find("."+this.options.baseClass+"-markup").html(e)},pi(document).on("keyup.raptor keydown.raptor",function(t){Ri=t.shiftKey}),yi.registerPlugin(new Un),jn.prototype=Object.create(gn.prototype),jn.prototype.init=function(){this.raptor.bind("enabled",this.enabled.bind(this)),this.raptor.bind("change",this.check.bind(this))},jn.prototype.enabled=function(){this.check(this.raptor.getHtml())},jn.prototype.check=function(t){if(t=t.trim(),!t||"<br>"===t||"<div><br></div>"===t){var e=this.raptor.getNode(),n=document.createElement(this.options.tag);n.innerHTML=this.options.content,e.innerHTML="",e.appendChild(n),this.options.select&&fe(e.childNodes[0]),this.raptor.checkChange()}},yi.registerPlugin(new jn),yi.registerUi(new wn({name:"save",action:function(){this.getPlugin()?this.getPlugin().save():hn({text:d("saveNotConfigured"),type:"error"})},init:function(){if(null!==this.options.plugin){var t=wn.prototype.init.apply(this,arguments);return this.raptor.bind("dirty",this.dirty.bind(this)),this.raptor.bind("cleaned",this.clean.bind(this)),this.clean(),t}},getPlugin:function(){return this.raptor.getPlugin(this.options.plugin)},dirty:function(){en(this.button)},clean:function(){an(this.button)}})),Gn.prototype=Object.create(gn.prototype),yi.registerPlugin(new Gn),Gn.prototype.save=function(t){"undefined"!=typeof RaptorSection&&t!==!1&&RaptorSection.save(!1);var e={};this.raptor.unify(function(t){if(t.isDirty()){t.clean();var n=t.getPlugin("saveJson"),i=n.options.id.call(n),a=t.getHtml();e[i]=a}}.bind(this));var n={};this.size=Object.keys(e).length,n[this.options.postName]=JSON.stringify(e),pi.ajax({type:this.options.type||"post",dataType:this.options.dataType||"json",url:this.options.url,data:n}).done(this.done.bind(this)).fail(this.fail.bind(this))},Gn.prototype.done=function(t,e,n){this.raptor.unify(function(i){i.isDirty()&&i.saved([t,e,n])});var i=d("saveJsonSaved",{saved:this.size});pi.isFunction(this.options.formatResponse)&&(i=this.options.formatResponse(t)),hn({text:i,type:"success"}),this.options.retain||this.raptor.unify(function(t){t.disableEditing()})},Gn.prototype.fail=function(){hn({text:d("saveJsonFail",{failed:this.size}),type:"error"})},zn.prototype=Object.create(gn.prototype),zn.prototype.save=function(){this.requests=0,this.errors=[],this.messages=[],this.raptor.unify(function(t){if(t.isDirty()){this.requests++;var e=t.getPlugin("saveRest").sendRequest();e.raptor=t,e.done(this.done.bind(this)).fail(this.fail.bind(this)).always(this.always.bind(this))}}.bind(this))},zn.prototype.done=function(t,e,n){n.raptor.saved(),this.messages.push(t)},zn.prototype.fail=function(t){this.errors.push(t.responseText)},zn.prototype.always=function(){this.requests--,0===this.requests&&(this.errors.length>0&&0===this.messages.length?hn({text:d("saveRestFail",{failed:this.errors.length}),type:"error"}):this.errors.length>0?hn({text:d("saveRestPartial",{saved:this.messages.length,failed:this.errors.length}),type:"error"}):(hn({text:d("saveRestSaved",{saved:this.messages.length}),type:"success"}),this.options.retain||this.raptor.unify(function(t){t.disableEditing()})))},zn.prototype.sendRequest=function(){var t=this.raptor.getPlugin("saveRest").getHeaders(),e=this.raptor.getPlugin("saveRest").getData(),n=this.raptor.getPlugin("saveRest").getURL();return pi.ajax({type:this.options.type||"post",dataType:this.options.dataType||"json",headers:t,data:e,url:n})},zn.prototype.getHeaders=function(){return this.options.headers?this.options.headers.call(this):{}},zn.prototype.getData=function(){this.raptor.clean();var t=this.raptor.getHtml(),e=this.options.data.call(this,t);return e._method=this.method,e},zn.prototype.getURL=function(){return"string"==typeof this.options.url?this.options.url:this.options.url.call(this)},yi.registerPlugin(new zn),Wn.prototype=Object.create(Rn.prototype),Wn.prototype.init=function(){var t=Rn.prototype.init.call(this);return"undefined"!=typeof this.options.snippets&&Object.keys(this.options.snippets).length>0?t:void 0},Wn.prototype.insertSnippet=function(t){pe(this.options.snippets[t])},Wn.prototype.menuItemMouseDown=function(t){this.raptor.actionApply(function(){this.insertSnippet(pi(t.currentTarget).data("name"))}.bind(this))},Wn.prototype.menuItemMouseEnter=function(t){this.raptor.actionPreview(function(){this.insertSnippet(pi(t.currentTarget).data("name"))}.bind(this))},Wn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Wn.prototype.getMenuItems=function(){var t="";for(var e in this.options.snippets)t+=this.raptor.getTemplate("snippet-menu.item",{name:e});return t},yi.registerUi(new Wn);var Di=!1;yi.registerUi(new En({name:"specialCharacters",dialogOptions:{width:645},options:{setOrder:["symbols","mathematics","arrows","greekAlphabet"],characterSets:{symbols:{name:d("specialCharactersSymbols"),characters:[["<","&lt;","less than"],[">","&gt;","greater than"],["&","&amp;","ampersand"],['"',"&quot;","quotation mark"],["&nbsp;","non-breaking space: ' '"],["&emsp;","em space: '  '"],["&ensp;","en space: ' '"],["&thinsp;","thin space: ''"],["&mdash;","em dash"],["&ndash;","en dash"],["&minus;","minus"],["-","hyphen"],["&oline;","overbar space"],["&cent;","cent"],["&pound;","pound"],["&euro;","euro"],["&sect;","section"],["&dagger;","dagger"],["&Dagger;","double dagger"],["&lsquo;","left single quotes"],["&rsquo;","right single quotes"],["'","single quotes"],["&#x263a;","smiley face"],["&#x2605;","black star"],["&#x2606;","white star"],["&#x2610;","check box"],["&middot;","middle dot"],["&bull;","bullet"],["&copy;","copyright"],["&reg;","registered"],["&trade;","trade"],["&iquest;","inverted question mark"],["&iexcl;","inverted exclamation mark"],["&Aring;","Angstrm"],["&hellip;","ellipsis"],["&#x2295;","earth"],["&#x2299;","sun"],["&#x2640;","female"],["&#x2642;","male"],["&clubs;","clubs or shamrock"],["&spades;","spades"],["&hearts;","hearts or valentine"],["&diams;","diamonds"],["&loz;","diamond"]]},mathematics:{name:d("specialCharactersMathematics"),characters:[["&lt;","less than"],["&le;","less than or equal to"],["&gt;","greater than"],["&ge;","greater than or equal to"],["&ne;","not equal"],["&asymp;","approximately equal to"],["&equiv;","identically equal to"],["&cong;","congruent to"],["&prop;","proportional"],["&there4;","therefore"],["&sum;","summation"],["&prod;","product"],["&prime;","prime or minutes"],["&Prime;","double prime or seconds"],["&Delta;","delta"],["&nabla;","del"],["&part;","partial"],["&int;","integral"],["&middot;","middle dot"],["&sdot;","dot operator"],["&bull;","bullet"],["&minus;","minus sign"],["&times;","multipllcation sign"],["&divide;","division sign"],["&frasl;","fraction slash, (ordinary / \\)"],["&plusmn;","plus or minus"],["&deg;","degree sign"],["&lfloor;","floor function"],["&rfloor;","floor function"],["&lceil;","ceiling function"],["&rceil;","ceiling function"],["&lowast;","asterisk operator, (ordinary *)"],["&oplus;","circled plus"],["&otimes;","circled times"],["&ordm;","masculine ordinal"],["&lang;","bra"],["&rang;","ket"],["&infin;","infinity"],["&pi;","pi"],["&frac12;","half"],["&alefsym;","aleph"],["&radic;","radical"],["&ang;","angle"],["&perp;","perpendicular"],["&real;","real"],["&isin;","is an element of"],["&notin;","not an element of"],["&empty;","null set"],["&sub;","subset of"],["&sube;","subset or or equal to"],["&nsub;","not a subset"],["&cap;","intersection"],["&cup;","union"],["&sim;","tilde operator (ordinary ~)"],["&Oslash;","slash O"],["&and;","logical and"],["&Lambda;","lambda (and)"],["&or;","logical or"],["&not;","not sign"],["&sim;","tilde operator (ordinary ~)"],["&rarr;","right arrow"],["&rArr;","double right arrow"],["&larr;","left arrow"],["&lArr;","left double arrow"],["&harr;","left right arrow"],["&hArr;","left right double arrow"]]},arrows:{name:d("specialCharactersArrows"),characters:[["&darr;","down arrow"],["&dArr;","down double arrow"],["&uarr;","up arrow"],["&uArr;","up double arrow"],["&crarr;","arriage return arrow"],["&rarr;","right arrow"],["&rArr;","double right arrow"],["&larr;","left arrow"],["&lArr;","left double arrow"],["&harr;","left right arrow"],["&hArr;","left right double arrow"]]},greekAlphabet:{name:d("specialCharactersGreekAlphabet"),characters:[["&alpha;","alpha"],["&beta;","beta"],["&gamma;","gamma"],["&delta;","delta"],["&epsilon;","epsilon"],["&zeta;","zeta"],["&eta;","eta"],["&theta;","theta"],["&iota;","iota"],["&kappa;","kappa"],["&lambda;","lambda"],["&mu;","mu"],["&nu;","nu"],["&xi;","xi"],["&omicron;","omicron"],["&pi;","pi"],["&rho;","rho"],["&sigma;","sigma"],["&tau;","tau"],["&upsilon;","upsilon"],["&phi;","phi"],["&chi;","chi"],["&psi;","psi"],["&omega;","omega"],["&Alpha;","alpha"],["&Beta;","beta"],["&Gamma;","gamma"],["&Delta;","delta"],["&Epsilon;","epsilon"],["&Zeta;","zeta"],["&Eta;","eta"],["&Theta;","theta"],["&Iota;","iota"],["&Kappa;","kappa"],["&Lambda;","lambda"],["&Mu;","mu"],["&Nu;","nu"],["&Xi;","xi"],["&Omicron;","omicron"],["&Pi;","pi"],["&Rho;","rho"],["&Sigma;","sigma"],["&Tau;","tau"],["&Upsilon;","upsilon"],["&Phi;","phi"],["&Chi;","chi"],["&Psi;","psi"],["&Omega;","omega"]]}}},applyAction:function(){this.raptor.actionApply(function(){Di&&pe(Di),Di=!1
})},getDialogTemplate:function(){for(var t,e,n,i,a=pi(this.raptor.getTemplate("special-characters.dialog")).appendTo("body").hide(),r=0;r<this.options.setOrder.length;r++){t=this.options.setOrder[r],a.find("ul").append(this.raptor.getTemplate("special-characters.tab-li",{baseClass:this.options.baseClass,name:this.options.characterSets[t].name,key:t})),e=pi(this.raptor.getTemplate("special-characters.tab-content",{baseClass:this.options.baseClass,key:t}));for(var o=[],s=0;s<this.options.characterSets[t].characters.length;s++)n=this.options.characterSets[t].characters[s],i=this.raptor.getTemplate("special-characters.tab-button",{htmlEntity:n[0],description:n[1],setKey:t,charactersIndex:s}),o.push(i);e.append(o.join("")),a.find("ul").after(e)}a.show();var l=this;return a.find("button").each(function(){Je(pi(this))}).click(function(){var t=pi(this).attr("data-setKey"),e=pi(this).attr("data-charactersIndex");Di=l.options.characterSets[t].characters[e][0],l.getOkButton(l.name).click.call(this)}),un(a),a},getCancelButton:function(){}}));yi.registerUi(new En({name:"statistics",options:{maximum:100,showCountInButton:!0},dialogOptions:{width:350},init:function(){return this.options.showCountInButton&&this.raptor.bind("change",this.updateButton.bind(this)),En.prototype.init.apply(this,arguments)},applyAction:function(){},getCancelButton:function(){},getCharacterCount:function(){return pi("<div>").html(this.raptor.getHtml()).text().trim().length},getContent:function(){return pi("<div>").html(this.raptor.getHtml()).text().trim()},updateButton:function(){var t=null,e=null,n=this.getCharacterCount();this.options.maximum?(t=this.options.maximum-n,e=t>=0?d("statisticsButtonCharacterRemaining",{charactersRemaining:t}):d("statisticsButtonCharacterOverLimit",{charactersRemaining:-1*t})):e=d("statisticsButtonCharacters",{characters:n}),Xe(this.button,e),this.options.maximum&&(0>t?this.button.addClass("ui-state-error").removeClass("ui-state-default"):t>=0&&15>=t?this.button.addClass("ui-state-highlight").removeClass("ui-state-error ui-state-default"):this.button.removeClass("ui-state-highlight ui-state-error").addClass("ui-state-default"))},getButton:function(){return this.button||(wn.prototype.getButton.call(this),Je(this.button,{text:!0}),this.options.showCountInButton&&this.updateButton()),this.button},getDialogTemplate:function(){return pi(this.raptor.getTemplate("statistics.dialog",this.options))},openDialog:function(){var t=this.getDialog(),e=this.getContent(),n=this.options.maximum?this.options.maximum-e.length:"&infin;";t.find("[data-name=truncation]").html(C(n)&&0>n?d("statisticsDialogTruncated",{limit:this.options.maximum}):d("statisticsDialogNotTruncated"));var i=e.split(" ").length;t.find("[data-name=words]").html(1===i?d("statisticsDialogWord",{words:i}):d("statisticsDialogWords",{words:i}));var a=e.split(". ").length;t.find("[data-name=sentences]").html(1===a?d("statisticsDialogSentence",{sentences:a}):d("statisticsDialogSentences",{sentences:a}));t.find("[data-name=characters]").html(n>=0||!C(n)?d("statisticsDialogCharactersRemaining",{characters:e.length,charactersRemaining:n}):d("statisticsDialogCharactersOverLimit",{characters:e.length,charactersRemaining:-1*n})),En.prototype.openDialog.call(this)}})),qn.prototype=Object.create(Tn.prototype),qn.prototype.getElement=function(t){var e=pi(t.commonAncestorContainer.parentNode).closest("td, th");return e.length&&!e.find(this.raptor.getElement()).length?e[0]:null},Yn.prototype=Object.create(Nn.prototype),Yn.prototype.createTable=function(t){this.raptor.actionApply(function(){pe(B(pi(je(t.target.cellIndex+1,t.target.parentNode.rowIndex+1,{placeHolder:"&nbsp;"}))))})},Yn.prototype.highlight=function(t){var e=Ke(this.menuTable.get(0),{x:0,y:0},{x:t.target.cellIndex,y:t.target.parentNode.rowIndex});this.highlightRemove(t),pi(e).addClass(this.options.baseClass+"-menu-hover"),this.raptor.actionPreview(function(){pe(B(pi(je(t.target.cellIndex+1,t.target.parentNode.rowIndex+1,{placeHolder:"&nbsp;"}))))})},Yn.prototype.highlightRemove=function(){this.menuTable.find("."+this.options.baseClass+"-menu-hover").removeClass(this.options.baseClass+"-menu-hover"),this.raptor.actionPreviewRestore()},Yn.prototype.getMenu=function(){return this.menu||(this.menuContent=this.raptor.getTemplate("table.create-menu",this.options),Nn.prototype.getMenu.call(this).on("click","td",this.createTable.bind(this)).on("mouseenter","td",this.highlight.bind(this)).mouseleave(this.highlightRemove.bind(this)),this.menuTable=this.menu.find("table:eq(0)")),this.menu},yi.registerUi(new Yn),yi.registerUi(new qn({name:"tableDeleteColumn",applyToElement:function(t){var e,n=Ye(t),i=t.parentNode.parentNode.parentNode;return ze(t.parentNode.parentNode.parentNode,n.x),Qe(i)?void i.parentNode.removeChild(i):(e=Ze(i,n),!e&&n.x>0&&(e=Ze(i,{x:n.x-1,y:n.y})),void fe(e))}})),yi.registerUi(new qn({name:"tableDeleteRow",applyToElement:function(t){var e,n=Ye(t),i=t.parentNode.parentNode.parentNode;return qe(t.parentNode.parentNode.parentNode,n.y),Qe(i)?void i.parentNode.removeChild(i):(e=Ze(i,n),!e&&n.y>0&&(e=Ze(i,{x:n.x,y:n.y-1})),void fe(e))}})),yi.registerUi(new qn({name:"tableInsertColumn",applyToElement:function(t){Ge(t.parentNode.parentNode.parentNode,Ye(t).x+1,{placeHolder:"&nbsp;"})}})),yi.registerUi(new qn({name:"tableInsertRow",applyToElement:function(t){We(t.parentNode.parentNode.parentNode,Ye(t).y+1,{placeHolder:"&nbsp;"})}})),yi.registerUi(new wn({name:"tableMergeCells",action:function(){}})),yi.registerUi(new wn({name:"tableSplitCells",action:function(){}}));var Ii=!1,Oi=null;Zn.prototype=Object.create(gn.prototype),Zn.prototype.init=function(){this.raptor.bind("selectionCustomise",this.selectionCustomise.bind(this)),this.raptor.registerHotkey("tab",this.tabToNextCell.bind(this)),this.raptor.registerHotkey("shift+tab",this.tabToPrevCell.bind(this)),this.raptor.getElement().on("mousedown","tbody td",this.cellMouseDown.bind(this)).on("mouseover","tbody td",this.cellMouseOver.bind(this)).mouseup(this.cellMouseUp.bind(this))},Zn.prototype.selectionCustomise=function(){var t,e=[];return pi("."+this.options.baseClass+"-cell-selected").each(function(){t=rangy.createRange(),t.selectNodeContents(this),e.push(t)}),e},Zn.prototype.cellMouseDown=function(t){this.raptor.isEditing()&&(Oi=Ye(t.target),null!==Oi&&(Ii=!0,pi(t.target).closest("table").addClass(this.options.baseClass+"-selected")))},Zn.prototype.cellMouseUp=function(t){Ii=!1;var e=pi(t.target).closest("td"),n=!1;if(e.length>0&&null!==Oi){var i=Ye(e.get(0));(null===i||i.x==Oi.x&&i.y==Oi.y)&&(n=!0)}else n=!0;n&&(pi("."+this.options.baseClass+"-selected").removeClass(this.options.baseClass+"-selected"),pi("."+this.options.baseClass+"-cell-selected").removeClass(this.options.baseClass+"-cell-selected"))},Zn.prototype.cellMouseOver=function(t){if(Ii){var e=Ke(pi(t.target).closest("table").get(0),Oi,Ye(t.target));pi("."+this.options.baseClass+"-cell-selected").removeClass(this.options.baseClass+"-cell-selected"),pi(e).addClass(this.options.baseClass+"-cell-selected"),rangy.getSelection().removeAllRanges()}},Zn.prototype.tabToNextCell=function(){var t=rangy.getSelection().getRangeAt(0),e=ne(t),n=pi(e).closest("td");if(0===n.length)return!1;var i=n.next("td");0===i.length&&(i=n.closest("tr").next("tr").find("td:first"),0===i.length&&(i=n.closest("tbody").find("td:first"))),X(t,i),rangy.getSelection().setSingleRange(t)},Zn.prototype.tabToPrevCell=function(){var t=rangy.getSelection().getRangeAt(0),e=ne(t),n=pi(e).closest("td");if(0===n.length)return!1;var i=n.prev("td");0===i.length&&(i=n.closest("tr").prev("tr").find("td:last"),0===i.length&&(i=n.closest("tbody").find("td:last"))),X(t,i),rangy.getSelection().setSingleRange(t)},yi.registerPlugin(new Zn),Kn.prototype=Object.create(Rn.prototype),Kn.prototype.init=function(){return this.raptor.bind("selectionChange",this.updateButton.bind(this)),Rn.prototype.init.apply(this,arguments)},Kn.prototype.changeTag=function(t){if("undefined"!=typeof t&&"na"!==t){var e=ye(),n=this.raptor.getElement();if(e&&!e.is(n)){var i=e.closest("td, li, #"+n.attr("id"));0!==i.length&&(n=i)}Pe(t,["h1","h2","h3","h4","h5","h6","p","div","pre","address"],n)}},Kn.prototype.menuItemClick=function(t){Rn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeTag(pi(t.currentTarget).data("value"))}.bind(this))},Kn.prototype.menuItemMouseEnter=function(t){this.raptor.actionPreview(function(){this.changeTag(pi(t.currentTarget).data("value"))}.bind(this))},Kn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Kn.prototype.updateButton=function(){var t=we()[0],e=this.getButton().getButton();if(t){var n=t.tagName.toLowerCase(),i=this.getMenu().find("[data-value="+n+"]");i.length?Xe(e,i.html()):Xe(e,d("tagMenuTagNA"))}},Kn.prototype.getMenuItems=function(){return this.raptor.getTemplate("tag-menu.menu",this.options)},yi.registerUi(new Kn),Qn.prototype=Object.create(_n.prototype),Qn.prototype.action=function(){Ee([this.getClass()],[this.options.cssPrefix+"center",this.options.cssPrefix+"left",this.options.cssPrefix+"right",this.options.cssPrefix+"justify"],this.raptor.getElement(),"span"),this.selectionChange()},Qn.prototype.selectionToggle=function(){return rangy.getSelection().getAllRanges().length>0&&Me("."+this.getClass(),this.raptor.getElement())},yi.registerUi(new Qn({name:"alignCenter",getClass:function(){return this.options.cssPrefix+"center"}})),yi.registerUi(new Qn({name:"alignJustify",getClass:function(){return this.options.cssPrefix+"justify"}})),yi.registerUi(new Qn({name:"alignLeft",getClass:function(){return this.options.cssPrefix+"left"}})),yi.registerUi(new Qn({name:"alignRight",getClass:function(){return this.options.cssPrefix+"right"}})),yi.registerUi(new Sn({name:"textBold",hotkey:"ctrl+b",tag:"strong",classes:["bold"]})),yi.registerUi(new Sn({name:"textItalic",hotkey:"ctrl+i",tag:"em",classes:["italic"]})),yi.registerUi(new Sn({name:"textStrike",tag:"del",classes:["strike"]})),yi.registerUi(new wn({name:"textBlockQuote",action:function(){document.execCommand("formatBlock",!1,"<blockquote>")}})),yi.registerUi(new Cn({name:"textSizeDecrease",action:function(){Re(),this.raptor.selectionConstrain(),Ne("small",this.options.cssPrefix+"small","big",this.options.cssPrefix+"big"),this.raptor.getElement().find("small."+this.options.cssPrefix+"small:empty, big."+this.options.cssPrefix+"big:empty").remove()}})),yi.registerUi(new Cn({name:"textSizeIncrease",action:function(){Re(),this.raptor.selectionConstrain(),Ne("big",this.options.cssPrefix+"big","small",this.options.cssPrefix+"small"),this.raptor.getElement().find("small."+this.options.cssPrefix+"small:empty, big."+this.options.cssPrefix+"big:empty").remove()}})),yi.registerUi(new Sn({name:"textUnderline",hotkey:"ctrl+u",tag:"u",classes:["underline"]})),yi.registerUi(new Sn({name:"textSub",tag:"sub",classes:["sub"]})),yi.registerUi(new Sn({name:"textSuper",tag:"sup",classes:["sup"]})),Jn.prototype=Object.create(gn.prototype),Jn.prototype.init=function(){this.raptor.bind("layoutReady",function(t){pi(t).on("mouseover","[title]",function(){pi(this).attr("data-title",pi(this).attr("title")).removeAttr("title")})})},yi.registerPlugin(new Jn);var Pi=0,Mi=null;Xn.prototype=Object.create(gn.prototype),Xn.prototype.enable=function(){this.raptor.bind("dirty",this.show.bind(this)),this.raptor.bind("cleaned",this.hide.bind(this))},Xn.prototype.show=function(){Pi++,$(this.getElement()),this.getElement().addClass(this.options.baseClass+"-visible")},Xn.prototype.hide=function(){0===--Pi&&this.getElement().removeClass(this.options.baseClass+"-visible")},Xn.prototype.getElement=function(){if(!Mi){var t="raptor-plugin-unsaved-edit-warning-dirty";Mi=pi(this.raptor.getTemplate("unsaved-edit-warning.warning",this.options)).mouseenter(function(){yi.eachInstance(function(e){e.isDirty()&&e.getElement().addClass(t)})}).mouseleave(function(){pi("."+t).removeClass(t)}).appendTo("body")}return Mi},yi.registerPlugin(new Xn),yi.registerUi(new En({name:"viewSource",dialogOptions:{width:600,height:400},applyAction:function(t){var e=t.find("textarea").val();this.raptor.actionApply(function(){this.raptor.setHtml(e),ve(this.raptor.getElement().first()),this.raptor.checkSelectionChange()}.bind(this))},openDialog:function(){var t=this.getDialog().find("textarea");t.val(this.raptor.getHtml()),En.prototype.openDialog.call(this),t.select()},getDialogTemplate:function(){return pi("<div>").html(this.raptor.getTemplate("view-source.dialog",this.options))}})),yi.globalDefaults={layouts:{},plugins:{},ui:{},bind:{},namespace:null,unify:!0,persistence:!0,persistenceName:"uiEditor",unloadWarning:!0,autoEnable:!1,partialEdit:!1,autoSelect:"end",enablePlugins:!0,disabledPlugins:[],enableUi:!0,disabledUi:[],replace:!1,replaceStyle:["display","position","float","width","padding-left","padding-right","padding-top","padding-bottom","margin-left","margin-right","margin-top","margin-bottom"],baseClass:"raptor",cssPrefix:"cms-",draggable:!0},yi.registerPreset({name:"full",plugins:{imageSwap:{chooser:"insertFile"}},layouts:{toolbar:{uiOrder:[["logo"],["save","cancel"],["dockToScreen","dockToElement","guides"],["viewSource"],["historyUndo","historyRedo"],["alignLeft","alignCenter","alignJustify","alignRight"],["textBold","textItalic","textUnderline","textStrike"],["textSuper","textSub"],["listUnordered","listOrdered"],["hrCreate","textBlockQuote"],["textSizeDecrease","textSizeIncrease","fontFamilyMenu"],["clearFormatting","cleanBlock"],["linkCreate","linkRemove"],["embed","insertFile"],["floatLeft","floatNone","floatRight"],["colorMenuBasic"],["tagMenu"],["classMenu"],["snippetMenu","specialCharacters"],["tableCreate","tableInsertRow","tableDeleteRow","tableInsertColumn","tableDeleteColumn"],["languageMenu"],["statistics"]]},hoverPanel:{uiOrder:[["clickButtonToEdit"]]},elementHoverPanel:{elements:"img",uiOrder:[["imageResize","imageSwap","close"]]}}},!0),yi.registerPreset({name:"micro",layouts:{toolbar:{uiOrder:[["logo"],["save","cancel"],["dockToScreen","dockToElement"],["historyUndo","historyRedo"],["specialCharacters"],["languageMenu"],["statistics"]]},hoverPanel:{uiOrder:[["clickButtonToEdit","revisions"]]}},plugins:{placeholder:!1,paste:{panels:["plain-text"]},noBreak:{enabled:!0}}}),yi.registerPreset({name:"inline",classes:"raptor-editing-inline",autoEnable:!0,draggable:!1,unify:!1,unloadWarning:!1,reloadOnDisable:!0,plugins:{unsavedEditWarning:!1,dock:{dockToElement:!0,docked:!0,persist:!1}},layouts:{toolbar:{uiOrder:[["textBold","textItalic","textUnderline","textStrike"],["colorMenuBasic"],["textBlockQuote"],["listOrdered","listUnordered"],["textSizeDecrease","textSizeIncrease"],["linkCreate","linkRemove"]]}}})}(),function(){!function(t,e,n){var i,a,r;return r="slidesjs",a={width:940,height:528,start:1,navigation:{active:!0,effect:"slide"},pagination:{active:!0,effect:"slide"},play:{active:!1,effect:"slide",interval:5e3,auto:!1,swap:!0,pauseOnHover:!1,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:!0}},callback:{loaded:function(){},start:function(){},complete:function(){}}},i=function(){function e(e,n){this.element=e,this.options=t.extend(!0,{},a,n),this._defaults=a,this._name=r,this.init()}return e}(),i.prototype.init=function(){var n,i,a,r,o,s,l=this;return n=t(this.element),this.data=t.data(this),t.data(this,"animating",!1),t.data(this,"total",n.children().not(".slidesjs-navigation",n).length),t.data(this,"current",this.options.start-1),t.data(this,"vendorPrefix",this._getVendorPrefix()),"undefined"!=typeof TouchEvent&&(t.data(this,"touch",!0),this.options.effect.slide.speed=this.options.effect.slide.speed/2),n.css({overflow:"hidden"}),n.slidesContainer=n.children().not(".slidesjs-navigation",n).wrapAll("<div class='slidesjs-container'>",n).parent().css({overflow:"hidden",position:"relative"}),t(".slidesjs-container",n).wrapInner("<div class='slidesjs-control'>",n).children(),t(".slidesjs-control",n).css({position:"relative",left:0}),t(".slidesjs-control",n).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"}),t.each(t(".slidesjs-control",n).children(),function(e){var n;return n=t(this),n.attr("slidesjs-index",e)}),this.data.touch&&(t(".slidesjs-control",n).on("touchstart",function(t){return l._touchstart(t)}),t(".slidesjs-control",n).on("touchmove",function(t){return l._touchmove(t)}),t(".slidesjs-control",n).on("touchend",function(t){return l._touchend(t)})),n.fadeIn(0),this.update(),this.data.touch&&this._setuptouch(),t(".slidesjs-control",n).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return t(this).css({zIndex:10})}),this.options.navigation.active&&(o=t("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(n),i=t("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(n)),t(".slidesjs-next",n).click(function(t){return t.preventDefault(),l.stop(!0),l.next(l.options.navigation.effect)}),t(".slidesjs-previous",n).click(function(t){return t.preventDefault(),l.stop(!0),l.previous(l.options.navigation.effect)}),this.options.play.active&&(r=t("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(n),s=t("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(n),r.click(function(t){return t.preventDefault(),l.play(!0)}),s.click(function(t){return t.preventDefault(),l.stop(!0)}),this.options.play.swap&&s.css({display:"none"})),this.options.pagination.active&&(a=t("<ul>",{"class":"slidesjs-pagination"}).appendTo(n),t.each(new Array(this.data.total),function(e){var n,i;return n=t("<li>",{"class":"slidesjs-pagination-item"}).appendTo(a),i=t("<a>",{href:"#","data-slidesjs-item":e,html:e+1}).appendTo(n),i.click(function(e){return e.preventDefault(),l.stop(!0),l.goto(1*t(e.currentTarget).attr("data-slidesjs-item")+1)})})),t(e).bind("resize",function(){return l.update()}),this._setActive(),this.options.play.auto&&this.play(),this.options.callback.loaded(this.options.start)},i.prototype._setActive=function(e){var n,i;return n=t(this.element),this.data=t.data(this),i=e>-1?e:this.data.current,t(".active",n).removeClass("active"),t(".slidesjs-pagination li:eq("+i+") a",n).addClass("active")},i.prototype.update=function(){var e,n,i;return e=t(this.element),this.data=t.data(this),t(".slidesjs-control",e).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0}),i=e.width(),n=this.options.height/this.options.width*i,this.options.width=i,this.options.height=n,t(".slidesjs-control, .slidesjs-container",e).css({width:i,height:n})},i.prototype.next=function(e){var n;return n=t(this.element),this.data=t.data(this),t.data(this,"direction","next"),void 0===e&&(e=this.options.navigation.effect),"fade"===e?this._fade():this._slide()},i.prototype.previous=function(e){var n;return n=t(this.element),this.data=t.data(this),t.data(this,"direction","previous"),void 0===e&&(e=this.options.navigation.effect),"fade"===e?this._fade():this._slide()},i.prototype.goto=function(e){var n,i;if(n=t(this.element),this.data=t.data(this),void 0===i&&(i=this.options.pagination.effect),e>this.data.total?e=this.data.total:1>e&&(e=1),"number"==typeof e)return"fade"===i?this._fade(e):this._slide(e);if("string"==typeof e){if("first"===e)return"fade"===i?this._fade(0):this._slide(0);if("last"===e)return"fade"===i?this._fade(this.data.total):this._slide(this.data.total)}},i.prototype._setuptouch=function(){var e,n,i,a;return e=t(this.element),this.data=t.data(this),a=t(".slidesjs-control",e),n=this.data.current+1,i=this.data.current-1,0>i&&(i=this.data.total-1),n>this.data.total-1&&(n=0),a.children(":eq("+n+")").css({display:"block",left:this.options.width}),a.children(":eq("+i+")").css({display:"block",left:-this.options.width})},i.prototype._touchstart=function(e){var n,i;return n=t(this.element),this.data=t.data(this),i=e.originalEvent.touches[0],this._setuptouch(),t.data(this,"touchtimer",Number(new Date)),t.data(this,"touchstartx",i.pageX),t.data(this,"touchstarty",i.pageY),e.stopPropagation()},i.prototype._touchend=function(e){var n,i,a,r,o,s,l,d=this;return n=t(this.element),this.data=t.data(this),s=e.originalEvent.touches[0],r=t(".slidesjs-control",n),r.position().left>.5*this.options.width||r.position().left>.1*this.options.width&&Number(new Date)-this.data.touchtimer<250?(t.data(this,"direction","previous"),this._slide()):r.position().left<-(.5*this.options.width)||r.position().left<-(.1*this.options.width)&&Number(new Date)-this.data.touchtimer<250?(t.data(this,"direction","next"),this._slide()):(a=this.data.vendorPrefix,l=a+"Transform",i=a+"TransitionDuration",o=a+"TransitionTimingFunction",r[0].style[l]="translateX(0px)",r[0].style[i]=.85*this.options.effect.slide.speed+"ms"),r.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return a=d.data.vendorPrefix,l=a+"Transform",i=a+"TransitionDuration",o=a+"TransitionTimingFunction",r[0].style[l]="",r[0].style[i]="",r[0].style[o]=""}),e.stopPropagation()},i.prototype._touchmove=function(e){var n,i,a,r,o;return n=t(this.element),this.data=t.data(this),r=e.originalEvent.touches[0],i=this.data.vendorPrefix,a=t(".slidesjs-control",n),o=i+"Transform",t.data(this,"scrolling",Math.abs(r.pageX-this.data.touchstartx)<Math.abs(r.pageY-this.data.touchstarty)),this.data.animating||this.data.scrolling||(e.preventDefault(),this._setuptouch(),a[0].style[o]="translateX("+(r.pageX-this.data.touchstartx)+"px)"),e.stopPropagation()},i.prototype.play=function(e){var n,i,a,r=this;return n=t(this.element),this.data=t.data(this),!this.data.playInterval&&(e&&(i=this.data.current,this.data.direction="next","fade"===this.options.play.effect?this._fade():this._slide()),t.data(this,"playInterval",setInterval(function(){return i=r.data.current,r.data.direction="next","fade"===r.options.play.effect?r._fade():r._slide()},this.options.play.interval)),a=t(".slidesjs-container",n),this.options.play.pauseOnHover&&(a.unbind(),a.bind("mouseenter",function(){return r.stop()}),a.bind("mouseleave",function(){return r.options.play.restartDelay?t.data(r,"restartDelay",setTimeout(function(){return r.play(!0)},r.options.play.restartDelay)):r.play()})),t.data(this,"playing",!0),t(".slidesjs-play",n).addClass("slidesjs-playing"),this.options.play.swap)?(t(".slidesjs-play",n).hide(),t(".slidesjs-stop",n).show()):void 0},i.prototype.stop=function(e){var n;return n=t(this.element),this.data=t.data(this),clearInterval(this.data.playInterval),this.options.play.pauseOnHover&&e&&t(".slidesjs-container",n).unbind(),t.data(this,"playInterval",null),t.data(this,"playing",!1),t(".slidesjs-play",n).removeClass("slidesjs-playing"),this.options.play.swap?(t(".slidesjs-stop",n).hide(),t(".slidesjs-play",n).show()):void 0},i.prototype._slide=function(e){var n,i,a,r,o,s,l,d,c,u,h=this;return n=t(this.element),this.data=t.data(this),this.data.animating||e===this.data.current+1?void 0:(t.data(this,"animating",!0),i=this.data.current,e>-1?(e-=1,u=e>i?1:-1,a=e>i?-this.options.width:this.options.width,o=e):(u="next"===this.data.direction?1:-1,a="next"===this.data.direction?-this.options.width:this.options.width,o=i+u),-1===o&&(o=this.data.total-1),o===this.data.total&&(o=0),this._setActive(o),l=t(".slidesjs-control",n),e>-1&&l.children(":not(:eq("+i+"))").css({display:"none",left:0,zIndex:0}),l.children(":eq("+o+")").css({display:"block",left:u*this.options.width,zIndex:10}),this.options.callback.start(i+1),this.data.vendorPrefix?(s=this.data.vendorPrefix,c=s+"Transform",r=s+"TransitionDuration",d=s+"TransitionTimingFunction",l[0].style[c]="translateX("+a+"px)",l[0].style[r]=this.options.effect.slide.speed+"ms",l.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return l[0].style[c]="",l[0].style[r]="",l.children(":eq("+o+")").css({left:0}),l.children(":eq("+i+")").css({display:"none",left:0,zIndex:0}),t.data(h,"current",o),t.data(h,"animating",!1),l.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),l.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0}),h.data.touch&&h._setuptouch(),h.options.callback.complete(o+1)})):l.stop().animate({left:a},this.options.effect.slide.speed,function(){return l.css({left:0}),l.children(":eq("+o+")").css({left:0}),l.children(":eq("+i+")").css({display:"none",left:0,zIndex:0},t.data(h,"current",o),t.data(h,"animating",!1),h.options.callback.complete(o+1))}))},i.prototype._fade=function(e){var n,i,a,r,o,s=this;return n=t(this.element),this.data=t.data(this),this.data.animating||e===this.data.current+1?void 0:(t.data(this,"animating",!0),i=this.data.current,e?(e-=1,o=e>i?1:-1,a=e):(o="next"===this.data.direction?1:-1,a=i+o),-1===a&&(a=this.data.total-1),a===this.data.total&&(a=0),this._setActive(a),r=t(".slidesjs-control",n),r.children(":eq("+a+")").css({display:"none",left:0,zIndex:10}),this.options.callback.start(i+1),this.options.effect.fade.crossfade?(r.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed),r.children(":eq("+a+")").stop().fadeIn(this.options.effect.fade.speed,function(){return r.children(":eq("+a+")").css({zIndex:0}),t.data(s,"animating",!1),t.data(s,"current",a),s.options.callback.complete(a+1)})):r.children(":eq("+i+")").stop().fadeOut(this.options.effect.fade.speed,function(){return r.children(":eq("+a+")").stop().fadeIn(s.options.effect.fade.speed,function(){return r.children(":eq("+a+")").css({zIndex:10})}),t.data(s,"animating",!1),t.data(s,"current",a),s.options.callback.complete(a+1)}))},i.prototype._getVendorPrefix=function(){var t,e,i,a,r;for(t=n.body||n.documentElement,i=t.style,a="transition",r=["Moz","Webkit","Khtml","O","ms"],a=a.charAt(0).toUpperCase()+a.substr(1),e=0;e<r.length;){if("string"==typeof i[r[e]+a])return r[e];e++}return!1},t.fn[r]=function(e){return this.each(function(){return t.data(this,"plugin_"+r)?void 0:t.data(this,"plugin_"+r,new i(this,e))})}}(jQuery,window,document)}.call(this),function(t){t.fn.bootstrapFileInput=function(){this.each(function(e,n){var i=t(n);if("undefined"==typeof i.attr("data-bfi-disabled")){var a="Browse";"undefined"!=typeof i.attr("title")&&(a=i.attr("title"));var r="";i.attr("class")&&(r=" "+i.attr("class")),i.wrap('<a class="file-input-wrapper btn btn-default '+r+'"></a>').parent().prepend(t("<span></span>").html(a))}}).promise().done(function(){t(".file-input-wrapper").mousemove(function(e){var n,i,a,r,o,s,l,d;i=t(this),n=i.find("input"),a=i.offset().left,r=i.offset().top,o=n.width(),s=n.height(),l=e.pageX,d=e.pageY,moveInputX=l-a-o+20,moveInputY=d-r-s/2,n.css({left:moveInputX,top:moveInputY})}),t("body").on("change",".file-input-wrapper input[type=file]",function(){var e;if(e=t(this).val(),t(this).parent().next(".file-input-name").remove(),e=t(this).prop("files")&&t(this).prop("files").length>1?t(this)[0].files.length+" files":e.substring(e.lastIndexOf("\\")+1,e.length)){var n=t(this).data("filename-placement");"inside"===n?(t(this).siblings("span").html(e),t(this).attr("title",e)):t(this).parent().after('<span class="file-input-name">'+e+"</span>")}})})};var e="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";t("link[rel=stylesheet]").eq(0).before(e)}(jQuery),$(function(){$(".axform").submit(function(t){submitAjax($(this)),t.preventDefault()}),$(".confirm").submit(function(){var t="Are you sure?\n"+$(this).data("warning");return window.confirm(t)}),$(".file-form").submit(function(t){t.preventDefault(),$(this).children("button").innerHTML="Uploading..."}),$("#request-training").submit(function(t){t.preventDefault();var e=new Date,n=e.getMonth(),i=e.getDate(),a=e.getFullYear(),r=e.getHours(),o=e.getMinutes(),s=$(".datepick:eq(0)").val();""==s&&(s=a+"-"+n+"-"+i+" "+r+":"+o+":00");var l=$(".datepick:eq(1)").val();""==l&&(l=a+"-"+n+"-"+i+" "+r+":"+o+":00"),$.ajax({url:"/t/request/new",type:"post",data:{start:s,end:l,user:document.getElementById("userid").value,cert:document.getElementById("examid").value}}).done(function(t){t=JSON.parse(t),t.success?($(".ajax-success").removeClass("hidden"),$(".ajax-success .message").text(t.message)):($(".ajax-error").removeClass("hidden"),$(".ajax-error .message").text(t.message))})}),$("#pm-reply").submit(function(t){validateCC($(this))||t.preventDefault()}),$("#page-create").click(function(){$("#published").val("1")}),$("#page-draft").click(function(){$("#published").val("0")})}),$(function(){if($(".file-control").bootstrapFileInput({"data-filename-placement":"inside"}),highlightCorrect(),$(".datepick").datetimepicker({language:"en",format:"m-d-Y H:i:s",inline:!0,minDate:"0",maxDate:"+1970/01/30",onChangeDateTime:function(t,e){var n=$(this.prev()[0]).data("field");document.getElementById(n).value=e.val()}}),$("#slideshow").slidesjs({width:900,height:400,pagination:{active:!1},play:{active:!1,interval:4e3,auto:!0,swap:!1,pauseOnHover:!0,restartDelay:2500},effect:{slide:{speed:2e3},fade:{speed:2e3,crossfade:!0}}}),$("#training")){var t=$("#training .progress-bar").attr("aria-valuenow"),e=t/58*100;$("#training .progress-bar").css("width",e+"%")}$(".editor").redactor({buttons:["bold","italic","underline","unorderedlist","orderedlist","outdent","indent","image","link"]}),"/training/request/new"==window.location.pathname&&createDateChangeListener()});